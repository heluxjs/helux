!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,T,n){"use strict";var t;T=T&&T.hasOwnProperty("default")?T.default:T,n=n&&n.hasOwnProperty("default")?n.default:n;var ee="$$global",q="$$default",V="$$cc",B="$$concent_void_module_624313307",r="$$CONCENT_ROUTER",R="$$CcClass",U="$$CcFrag",N="$$CcHook",h="$$Cc",G="$$Dispatcher",o="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",te=Symbol("__for_sync_param_ccsync__"),b=Symbol("__for_mock_event__"),a=Symbol("__lazy_handle_state__"),I=10,D=11,A=13,k="dispatch",re="setState",ne="setModuleState",oe="forceUpdate",O="invoke",g="sync",_="module",ae="ref",M="watch",ie={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[ie.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[ie.CC_MODULE_NOT_FOUND]="module not found!",t[ie.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[ie.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[ie.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[ie.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[ie.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[ie.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[ie.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[ie.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),c=Object.freeze({MODULE_GLOBAL:ee,MODULE_DEFAULT:q,MODULE_CC:V,MODULE_VOID:B,MODULE_CC_ROUTER:r,CC_CLASS_PREFIX:R,CC_FRAGMENT_PREFIX:U,CC_HOOK_PREFIX:N,CC_PREFIX:h,CC_DISPATCHER:G,CC_DISPATCHER_BOX:o,CCSYNC_KEY:te,MOCKE_KEY:b,LAZY_KEY:a,SIG_FN_START:I,SIG_FN_END:D,SIG_FN_QUIT:12,SIG_FN_ERR:A,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,STATE_FOR_ONE_CC_INSTANCE_FIRSTLY:1,STATE_FOR_ALL_CC_INSTANCES_OF_ONE_MODULE:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:k,SET_STATE:re,SET_MODULE_STATE:ne,FORCE_UPDATE:oe,INVOKE:O,SYNC:g,CATE_MODULE:_,CATE_REF:ae,FN_CU:"computed",FN_WATCH:M,ERR:ie,ERR_MESSAGE:i,default:{MODULE_GLOBAL:ee,MODULE_DEFAULT:q,MODULE_CC:V,ERR:ie,ERR_MESSAGE:i,STATE_FOR_ONE_CC_INSTANCE_FIRSTLY:1,STATE_FOR_ALL_CC_INSTANCES_OF_ONE_MODULE:2}}),$={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1};function s(e){return null!=e&&0<Object.keys(e).length}function u(e){return!s(e)}function ce(e,t){if(void 0===t&&(t=!1),!e)return!1;var r="object"==typeof e;if(r){var n=Array.isArray(e);return t?n:r&&!n}return!1}function d(e,t){var r="";r="string"==typeof e?e:i[e]||"",t&&(r+=t),r||(r="undefined message for code:"+e);var n=Error(r);return n.code=e,n}function f(e,t){return e+"$"+t}function l(e){return e?" --verbose-info: "+e:""}function p(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function y(e){return"%c"+e}var v=function(e){return"------------ CC "+e+" ------------"};function F(e){console.error(v("WARNING")),e instanceof Error?(console.error(e.message),console.error(e.stack)):console.error(e)}function x(e){console.log(v("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function z(e){if(console.error(v("WARNING")),console.error(e),$.isStrict)throw e}function S(e,t,r){void 0===r&&(r={});var n=e[t];return n||(n=e[t]=r),n}function se(e,t){var r=e[t];return r||(r=e[t]=[]),r}function m(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function C(t,r,n){void 0===r&&(r=[]),Array.isArray(t)?t.length=0:Object.keys(t).forEach(function(e){r.includes(e)||(n?t[e]=n:delete t[e])})}function j(e){return Object.keys(e)}function L(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function K(t,r,e){function n(e){e?e[t]=r:window[t]=r}window?n(e):setTimeout(function(){n(e)},3e3)}function E(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function ue(e,t){var r=[];return e.forEach(function(e){t.includes(e)||r.push(e)}),r}function P(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:q},e)}var w="";function W(){return w}function H(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function Y(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function X(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}var J,Z={},Q=((J={})[ee]={},J[q]={},J[V]={},J),de={},fe={},le={_computedValue:Q,_computedRaw:fe,_computedDep:de,getRootComputedValue:function(){return Q},getRootComputedDep:function(){return de},getRootComputedRaw:function(){return fe}},pe={},ye={},ve={_watchRaw:ye,_watchDep:pe,getRootWatchDep:function(){return pe},getRootWatchRaw:function(){return ye}};var me={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function he(e,t){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys}}function _e(e,t,r,n,o,a,i,c){var s=n[o],u=[];if(!s)return{pickedFns:u,setted:[],changed:[]};var d=s.retKey_fn_,f=s.stateKey_retKeys_,l=s.fnCount;if(e){var p=j(d),y=j(i),v=y;return"computed"===r?{pickedFns:p.map(function(e){return he(e,d)}),setted:y,changed:v}:(p.forEach(function(e){var t=d[e];t.immediate&&u.push({retKey:e,fn:t.fn,depKeys:t.depKeys})}),{pickedFns:u,setted:y,changed:v})}var m=function(r,n){var o=[],a=[];return j(n).forEach(function(e){var t=n[e];void 0!==t&&(a.push(e),t!==r[e]&&o.push(e))}),{changed:o,setted:a}}(a,i),h=m.setted,_=m.changed;if(0===h.length)return{pickedFns:u,setted:[],changed:[]};var C=h.join(",")+"|"+_.join(",")+"|"+o,g=me[t][r],K=c?S(g,c):g,E=K[C];return E?{pickedFns:E.map(function(e){return he(e,d)}),setted:h,changed:_}:(function(s,o,u,d,a,f){if(0===o.length)return;var e=a["*"];if(e){var i=0<u.length;e.forEach(function(e){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a={retKey:e,fn:r,depKeys:o};n?i&&s.push(a):s.push(a)})}s.length<f&&function(){var c={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!c[e]){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a=!0;n&&!u.includes(i)&&(a=!1),a&&(c[e]=!0,s.push({retKey:e,fn:r,depKeys:o}))}}),s.length===f?"break":void 0):"continue"};e:for(var r=0;r<e;r++){var n=t(r);switch(n){case"continue":continue;case"break":break e}}}()}(u,h,_,d,f,l),K[C]=u.map(function(e){return e.retKey}),{pickedFns:u,setted:h,changed:_})}function Ce(e,t,r){var n=t[r];return void 0!==n&&(e[r]=n,!0)}function ge(t,r,e,n){void 0===r&&(r=[]),void 0===e&&(e=!1),void 0===n&&(n=!1);var o={},a=[];if(!ce(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var i=!0,c=j(t);return c.length<r.length?c.forEach(function(e){r.includes(e)?Ce(o,t,e)&&(i=!1):n&&a.push(e)}):(r.forEach(function(e){Ce(o,t,e)&&(i=!1)}),n&&(a=ue(c,r))),i&&e&&(o=null),{partialState:o,isStateEmpty:i,ignoredStateKeys:a}}for(var Ke,Ee=function(K,E,S,w,b,e,N,O,I,U,D,A,x){for(var T=0,R=e,k=!0,t=function(){var e=b(R,1===++T&&U),t=e.pickedFns,n=e.setted,o=e.changed;if(!t.length)return"break";var r=H(),a=r.commit,i=r.getFnCommittedState,c=H(),s=c.commit,u=c.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,r=function(e,t,r,n,o,a){var i;if($.alwaysGiveState)i=r(n,o,a);else{var c=t[0];i=1===t.length&&"*"!==c&&c===e?r(n[c],o[c],a):r(n,o,a)}return i}(t,e.depKeys,e.fn,N,w,{retKey:t,callInfo:I,isFirstCall:U,commit:a,commitCu:s,setted:n,changed:o,stateModule:E,refModule:S,oldState:w,committedState:R,refCtx:K});"computed"===D?x[t]=r:!1===r&&(k=!1)}),R=i()){var d=function(e,t){void 0===t&&(t=!1),R=e,t&&0===j(e).length?R=null:(Object.assign(N,R),Object.assign(O,R))},f=ge(R,"ref"===A?K.privStateKeys:Z[E],!0,!0),l=f.partialState,p=f.ignoredStateKeys;if(l)if(D===M){var y=(A===ae?K.computedDep[K.module]||{}:le._computedDep[E]||{}).stateKey_retKeys_;if(y){var v=[],m={};j(l).forEach(function(e){y[e]?v.push(e):m[e]=l[e]}),0<v.length&&F("these state keys["+v.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),d(m,!0)}else d(l)}else d(l);if(p.length){var h="they are not "+(A===ae?"private":"module")+", fn is "+A+" "+D;F("these state keys["+p.join(",")+"] are invalid, "+h)}}var _=u();if(_){var C;if("ref"===A)C="computed"===D?K.computedRetKeyFns:K.watchRetKeyFns;else{var g=le.getRootComputedDep()[E]||{};C=g.retKey_fn_||null}C&&j(_).forEach(function(e){C[e]?x[e]=_[e]:F("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}if(10<T)throw Error("fnCtx.commit may goes endless loop, please check your code")};R;){if("break"===t())break}return k},Se=le._computedValue,we=j,be={},Ne=function(r,e,t){var n=void 0===t?{}:t,o=n.refCtx,a=void 0===o?null:o,i=n.callInfo,c=void 0===i?{}:i,s=Oe(r),u=Ie(r),d=Se[r],f=le.getRootComputedDep(),l=ve.getRootWatchDep(),p=a?a.module:null,y=Object.assign({},s,e),v=Object.assign({},e),m=v;return Ee(a,r,p,s,function(e,t){return _e(t,_,"computed",f,r,s,e)},m,y,v,c,!1,"computed",_,d),Ee(a,r,p,s,function(e,t){return _e(t,_,"watch",l,r,s,e)},m,y,v,c,!1,"watch",_,d),we(v).forEach(function(e){u[e]=s[e],Ue(r,e),s[e]=v[e]}),v},Oe=function(e){return Ae[e]},Ie=function(e){return xe[e]},Ue=function(e,t){Te[e][t]++},De=function(){var e;return(e={})[V]={},e[B]={},e[ee]={},e[q]={},e},Ae=De(),xe=De(),Te={},Re={getDispatcher:function(){return be[G]},isHotReloadMode:function(){return!!Re.isHot||window&&(window.webpackHotUpdate||Y())},runtimeVar:$,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:Z,moduleName_isConfigured_:{},connectedModuleName_ccClassKeys_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var r=se(Z,e);j(t).forEach(function(e){r.includes(e)||r.push(e)}),Re.store.setState(e,t)},_state:Ae,_prevState:xe,_stateVer:Te,getState:function(e){return e?Oe(e):Ae},getPrevState:function(e){return e?Ie(e):xe},getStateVer:function(e){return e?Te[e]:Te},setState:function(e,t,r){return Ne(e,t,r)},setGlobalState:function(e){return Ne(ee,e)},getGlobalState:function(){return Ae[ee]}},reducer:{_reducer:(Ke={},Ke[ee]={},Ke[V]={},Ke),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:le,watch:ve,refStore:{_state:{},setState:function(e,t){var r=Re.refStore._state,n=Object.assign({},r[e],t);r[e]=n}},init:{_init:{}},ccUkey_ref_:be,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},renderKey_ccUkeys_:{},refRetKey_fnUid_:{},refs:be,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"1.5.162",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"destiny"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[]},ke=localStorage.length,Me=Re.refStore._state,$e=0;$e<ke;$e++){var Fe=localStorage.key($e);if(Fe.startsWith("CCSS_"))try{Me[Fe.substr(5)]=JSON.parse(localStorage.getItem(Fe))}catch(e){console.error(e)}}function je(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Pe=function(e){if(!Re.errorHandler)throw e;Re.errorHandler(e)},He=0,qe={},Ve={},Be={},Ge={};function ze(){return++He}function We(e,t,r,n){if(r){var o=n[e];o||(o=n[e]={});var a=o[t];a?Object.assign(a,r):o[t]=r}}function Ye(e,t,r){We(e,t,r,qe)}function Xe(e,t,r){return Ye(e,t,r),function(e){var t=function(e){return qe[e]}(e),r=[];return j(t).forEach(function(e){r.push({module:e,state:t[e]})}),r}(e)}function Je(e){delete qe[e]}var Ze=[I,D,12,A,14,15],Qe={};function et(t,r){Qe[t].forEach(function(e){e({sig:t,payload:r})})}function tt(e,t){function r(e,t){var r=Qe[e];r?r.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)}Ze.forEach(function(e){return Qe[e]=[]});var rt="is not a plain json object!",nt="should be an string array or *!",ot=function(e){return e.toLowerCase()===V},at=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},it=l,ct=d;function st(e){if(!at(e))throw Error("module["+e+"] writing is invalid!");if(ot(e))throw Error("'$$cc' is a built-in module name for concent")}function ut(e,t,r){void 0===t&&(t=!0),void 0===r&&(r="");var n=r||"module["+e+"]",o=Re.store._state;if(st(e),e!==ee)if(t){if(s(o[e]))throw ct(ie.CC_MODULE_NAME_DUPLICATE,it(n))}else if(!o[e])throw ct(ie.CC_MODULE_NOT_FOUND,it(n))}function dt(t,e){var r=Array.isArray(e);if(!r&&"*"!==e)throw Error("storedKeys type err, "+nt);r&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var ft={},lt=function(e,t,r){void 0===r&&(r=1e3);var n=ft[t];n&&clearTimeout(n),ft[t]=setTimeout(function(){delete ft[t],e()},r)};function pt(e,r,n,t,o,a,i){if(void 0===i&&(i=!1),!e.hasWatchFn)return!0;var c=Object.assign({},t),s=e.watchDep,u=e.module,d=e.ccUniqueKey,f=e.refComputed,l=Object.assign({},n,t),p=Ee(e,r,u,n,function(e,t){return _e(t,"ref","watch",s,r,n,e,d)},t,l,c,o,a,"watch",ae,f);return i&&Object.assign(t,c),p}function yt(e,r,n,t,o,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var c=Object.assign({},t);if(!e.hasComputedFn)return c;var s=e.computedDep,u=e.module,d=e.refComputed,f=e.ccUniqueKey,l=Object.assign({},n,t);return Ee(e,r,u,n,function(e,t){return _e(t,ae,"computed",s,r,n,e,f)},t,l,c,o,a,"computed",ae,d),i&&Object.assign(t,c),c}var vt=ce,mt=F,ht=s,_t=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Ct=j,gt=ue,Kt=1,Et=2,St=oe,wt=re,bt=ne,Nt=O,Ot=g,It=15,Ut=1,Dt=2,At=3,xt=Re.store,Tt=xt.setState,Rt=xt.getPrevState,kt=Re.middlewares,Mt=Re.moduleName_ccClassKeys_,$t=Re.ccClassKey_ccClassContext_,Ft=Re.connectedModuleName_ccClassKeys_,jt=Re.refStore,Lt=Re.moduleName_stateKeys_,Pt=Re.ccUkey_ref_,Ht=Re.renderKey_ccUkeys_;function qt(e,t,r){var n=void 0===t?{}:t,o=n.module,a=n.skipMiddleware,i=void 0!==a&&a,c=n.payload,s=n.reactCallback,u=n.type,d=n.calledBy,f=void 0===d?wt:d,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,v=void 0===y?"":y,m=n.delay,h=void 0===m?-1:m;if(void 0!==e)if(vt(e)){var _=r.ctx,C=_.module,g=_.ccUniqueKey,K=_.ccKey,E=function(e,t){return e===t?Kt:Et}(o,C),S={calledBy:f,type:u,payload:c,renderKey:v,delay:h,ccKey:K,ccUniqueKey:g,state:e,refModule:C,module:o,fnName:p},w={payload:c,renderKey:v,ccKey:K,module:o,fnName:p},b=function(e,t,r){var n=ge(t,Lt[e],!0).partialState;if(n){var o=Tt(e,n,r);return Object.assign(n,o),n}return n}(o,e,{refCtx:E===Kt?r.ctx:null,callInfo:w});Object.assign(e,b),Vt(r,w,v,f,e,E,s,function(e,t){e===Ut&&!b||et(It,{committedState:t,sharedState:b,module:o,type:function(e,t){return[St,wt,bt,Nt,Ot].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,u),ccUniqueKey:g,renderKey:v}),b&&function(e,t,r,n,o,a,i){var c=function(){!function(d,e,f,t,r,n){if(!f)return;var o=e.ctx,l=o.ccUniqueKey,a=$t[o.ccClassKey].renderKeyClasses,p=t===Kt,y=Mt[r]||[],v=[];if(n){y="*"===a?[]:gt(y,a);var i=Ht[n]||[],c=function(e,t){var r=e.indexOf(t);if(-1<r){var n=e.slice();return n.splice(r,1),n}return e}(i,l);(function(e,n,o,a){e.forEach(function(e){var t=Pt[e],r=t.ctx.module;r===n?Vt(t,a,null,"broadcastState",o,Kt):x("although ref's renderKey matched but its module "+r+" mismatch target module "+n+", cc will ignore trigger it re-render")})})(v=c,r,f,d)}for(var s=y.length,u=function(e){var t=y[e],r=$t[t],n=r.ccKeys,o=r.watchedKeys,a=r.originalWatchedKeys;if(0===n.length)return"continue";if(0===o.length)return"continue";var i=void 0;if("*"===a)i=f;else{var c=ge(f,o,!0),s=c.partialState,u=c.isStateEmpty;if(u)return"continue";i=s}n.forEach(function(e){if(!(v.includes(e)||e===l&&p)){var t=Pt[e];t&&Vt(t,d,null,"broadcastState",i,Kt)}})},m=0;m<s;m++)u(m);!function(r,n,o){var a=Ct(n);(Ft[r]||[]).forEach(function(e){var t=$t[e];!function(e,o,a,t,i){var r=e.connectedModuleKeyMapping;if(1===e.connectedModule[o]){for(var n=e.ccKeys,c=!1,s=t.length,u=0;u<s;u++){var d=o+"/"+t[u];if(r[d]){c=!0;break}}if(!0===c){var f=Rt(o);n.forEach(function(e){var t=Pt[e];if(t&&!0!==t.__$$isUnmounted){var r=t.ctx;yt(r,o,f,a,i);var n=pt(r,o,f,a,i);n&&r.__$$ccForceUpdate()}})}}}(t,r,n,a,o)})}(r,f,d)}(e,t,r,n,o,a)};if(0<i){var s=_t(t.ctx.ccUniqueKey,r);lt(c,s,i)}else c()}(w,r,b,E,o,v,h)},i,S)}else mt("your committed state "+rt)}function Vt(e,t,r,n,o,a,i,c,s,u){var d=e.state,f=e.ctx;if(!0===e.__$$isUnmounted||a!==Kt||n!==St&&!ht(o))return i&&i(d),c&&c(Ut,o);var l=f.module,p=f.storedKeys,y=f.ccUniqueKey,v=At;if(r&&(v=Dt,f.renderKey!==r))return c&&c(Ut,o);if(0<p.length){var m=ge(o,p),h=m.partialState;if(!m.isStateEmpty){if(!0===f.persistStoredKeys){var _=ge(d,p),C=Object.assign({},_.partialState,h);localStorage.setItem("CCSS_"+y,JSON.stringify(C))}jt.setState(y,h)}}function g(){return f.__$$ccSetState(K,i,E)}var K=yt(f,l,d,o,t),E=pt(f,l,d,K,t,!1,!0);c?(u.state=K,function(e,r,n){if(!0!==e){var o=kt.length;if(0<o){var a=0;!function e(){if(a===o)n();else{var t=kt[a];a++,t(r,e)}}()}else n()}else n()}(s,u,function(){g(),c(v,K)})):g()}function Bt(e,t){void 0===t&&(t=!1);var r=Re.ccUkey_ref_,n=Re.moduleName_ccClassKeys_,o=Re.ccClassKey_ccClassContext_,a=[];if(e){if(!Re.store._state[e])throw Error("module["+e+"] is not declared in store");var i=n[e];if(i&&0!==i.length){var c=i[0],s=o[c];if(!s)throw Error("no ccClassContext found for ccClassKey "+c+"!");a=s.ccKeys}if(e===q&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[G]}}else a=[G];var u=r[a[0]];if(!u)throw Error("cc found no ref!");return u}function Gt(e,t,r,n,o){void 0===n&&(n=-1);try{Bt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:r,delay:n,skipMiddleware:o})}catch(e){z(e)}}var zt=Re.store.setState,Wt=Re.globalStateKeys,Yt="note! you are trying set state for global module, but the state you commit include some invalid keys which is not declared in cc's global state, \ncc will ignore them, but if this result is not as you expected, please check your committed global state!";var Xt=F,Jt=ce,Zt=Re.store,Qt=Zt.getState,er=Zt.setState,tr=Re.reducer._reducer,rr=Re.computed._computedValue,nr=d,or=l;function ar(e,t){void 0===t&&(t=!0);try{return ut(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;sr(e)}(e,t),!1}}function ir(o,a){return function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e?a(e):o.apply(void 0,r)}}function cr(e,t,r,n){var o;return!0===e?(function(e){Be[e]=!0}(o=ze()),n[o]=1):n[o=t||ze()]||(n[o]=1),{_chainId:o,_oriChainId:r||o}}function sr(e,t){e&&(t?t(e):(Xt(e),Re.errorHandler&&Re.errorHandler(e)))}function ur(e,t,r){return function(n,o,a,i){return new Promise(function(e,t){var r=Object.assign(a,{__innerCb:ir(e,t)});n(o,r,i)}).catch(Pe)}(yr,e,t,r)}function dr(e,t,r){return ur(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},r)}function fr(a,i){return function(e,t,r){var n=a.ctx,o=Object.assign({},n.state,e);n.state=o,i&&(i.state=o),n.type===N&&(a.state=o),r?(n.renderCount+=1,n.reactSetState(e,t)):n.type!==N&&Object.assign(a.state,e)}}function lr(r){return function(e){var t=r.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function pr(_,e){var t=void 0===e?{}:e,C=t.chainId,g=t.oriChainId,K=t.isLazy,r=t.delay,E=void 0===r?-1:r,n=t.isSilent,S=void 0!==n&&n,o=t.chainId_depth_,w=void 0===o?{}:o;return function(e,t,r,n){var o=K,a=S,i="",c=null!=n?n:E;if(Jt(r)){var s=r.lazy,u=r.silent,d=r.renderKey,f=r.delay;void 0!==s&&(o=s),void 0!==u&&(a=u),void 0!==d&&(i=d),void 0!==f&&(c=f)}else i=r;var l,p,y=cr(o,C,g,w),v=typeof e,m={callerRef:_,calledBy:O,module:_.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:w,delay:c,renderKey:i},h=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==v)return e.__fnName&&(e.name=e.__fnName),dr(e,m,t);if("object"!=v)throw h;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw h;return p&&(m.module=p),dr(l,m,t)}}function yr(l,e,p){var y=e.callerRef,v=y.ctx.module,t=e.module,m=void 0===t?v:t,r=e.context,h=void 0!==r&&r,_=e.__innerCb,C=e.type,g=e.calledBy,K=e.fnName,n=e.delay,E=void 0===n?-1:n,S=e.renderKey,w=e.chainId,b=e.oriChainId,N=e.chainId_depth_,O=e.isSilent;!function(e,t,r,n){var o=r;ar(e,!1)?(e!==t&&r&&(Xt(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),n(null,o)):n(Error("inputModule:"+e+" invalid"),null)}(m,v,e.cb,function(e,n){if(e)return sr(e,_);var o,t=Qt(m),r={};if(o=w===b&&1===N[w],h){N[w]=N[w]+1;var a=vr(y,!1,O,m,S,E,w,b,N),i=vr(y,!1,!0,m,S,E,w,b,N),c=vr(y,!0,O,m,S,E,w,b,N),s=pr(y,{delay:E,chainId:w,oriChainId:b,chainId_depth_:N}),u=pr(y,{isLazy:!0,delay:E,oriChainId:b,chainId_depth_:N}),d=pr(y,{isLazy:!1,delay:E,isSilent:!0,oriChainId:b,chainId_depth_:N}),f=function(e){return Ge[e]}(w)||{};r={module:m,callerModule:v,committedStateMap:f,committedState:f[m]||{},invoke:s,lazyInvoke:u,silentInvoke:d,invokeLazy:u,invokeSilent:d,dispatch:a,lazyDispatch:c,silentDispatch:i,dispatchLazy:c,dispatchSilent:i,rootState:Qt(),globalState:Qt(ee),moduleState:t,moduleComputed:rr[m]||{},setState:function(e){return a("setState",e,{silent:O,renderKey:S,delay:E})},refCtx:y.ctx}}!1===O&&et(I,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:l}),new Promise(function(e){return e(l(p,t,r))}).then(function(e){N[w]=N[w]-1;var t=1===N[w];!function(e,t,r){We(e,t,r,Ge)}(w,m,e);var r=[];!1===O&&(et(D,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:l}),!function(e){return!0===Be[e]}(w)?r=[{module:m,state:e}]:t?function(e){return!0===Ve[e]}(w)||(r=Xe(w,m,e),Je(w)):Ye(w,m,e)),r.forEach(function(e){e.state&&qt(e.state,{renderKey:S,module:e.module,reactCallback:n,type:C,calledBy:g,fnName:K,delay:E,payload:p},y)}),o&&(Je(w),function(e){delete Ge[e]}(w)),_&&_(null,e)}).catch(function(e){et(A,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:l}),sr(e,_)})})}function vr(N,O,I,U,D,A,x,T,R){return void 0===D&&(D=""),void 0===A&&(A=-1),void 0===R&&(R={}),function(e,r,t,n){void 0===e&&(e={});var o=O,a=I,i="",c=n||A;if(Jt(t)){i=D;var s=t.lazy,u=t.silent,d=t.renderKey,f=t.delay;void 0!==s&&(o=s),void 0!==u&&(a=u),void 0!==d&&(i=d),void 0!==f&&(c=f)}else i=t||D;function l(){return pr(N,{chainId:m,oriChainId:h,isLazy:o,chainId_depth_:R})(e,r,i,c)}var p,y,v=cr(o,x,T,R),m=v._chainId,h=v._oriChainId,_=typeof e,C=U;if(_&&"object"==_){if(Array.isArray(_))return l();var g=e.module;g&&(C=g),p=e.type,y=e.cb}else{if("string"!=_&&"function"!=_)return Promise.reject(nr(ie.CC_DISPATCH_PARAM_INVALID));var K=e;if("function"==_){var E=e.__fnName;if(!E)return l();K=E,1==R[h]&&(C=e.__stateModule)}var S=K.split("").filter(function(e){return"/"===e}).length;if(0===S)p=K;else{if(1!==S)return Promise.reject(nr(ie.CC_DISPATCH_STRING_INVALID,or(K)));var w=K.split("/"),b=w[0];b&&(C=b),p=w[1]}}return"*"===C?Promise.reject("cc instance api dispatch do not support multi dispatch, please use top api[cc.dispatch] instead!"):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,r=t.callerRef,n=t.module,o=t.renderKey,a=t.isSilent,i=t.type,c=t.payload,s=t.cb,u=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,v=tr[n];if(!v)return u(Error("no reducerMap found for module:["+n+"]"));var m=v[i];if(!m)return u(Error("no reducer fn found for ["+n+"/"+i+"], is these fn you want:"+Object.keys(v)));yr(m,{callerRef:r,module:n,type:i,cb:s,context:!0,__innerCb:u,calledBy:k,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},c)}({callerRef:N,module:C,type:p,payload:r,cb:y,__innerCb:ir(e,t),delay:c,renderKey:i,isSilent:a,chainId:m,oriChainId:h,chainId_depth_:R})}).catch(Pe)}}function mr(o){return function(t){try{Gt(o,t)}catch(e){if(o===ee)!function(e,t,r){void 0===t&&(t=""),void 0===r&&(r="");var n=ge(e,Wt),o=n.partialState,a=n.isStateEmpty,i=j(o),c=j(e);if(i.length<c.length){var s=c.filter(function(e){return!i.includes(e)});F(Yt+",invalid keys: "+s.join(",")+", make sure the keys is invalid and their values are not undefined"),console.log(e),t&&F("module is "+t),r&&F("ccClassKey is "+r)}zt(ee,o)}(t,o);else{var r=Qt(o);if(!r)return F("invalid module "+o);var n=ge(t,j(r));n.isStateEmpty||er(o,n.partialState)}x("no ccInstance found for module["+o+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var hr=j,_r=ce,Cr=Re.store._state;var gr=u,Kr=d,Er=Re.featureStr_classKey_,Sr=Re.userClassKey_featureStr_,wr=Re.ccClassKey_ccClassContext_,br=0;var Nr=Re.moduleName_stateKeys_,Or=Re.moduleName_ccClassKeys_,Ir=Re.moduleSingleClass,Ur=Re.ccClassKey_ccClassContext_,Dr=Re.connectedModuleName_ccClassKeys_,Ar=Re.computed._computedValue,xr=function(e,t){var r=!1,n=!1;if(!Array.isArray(e))return{duplicate:r,notArray:!0,keyElementNotString:n};if(!Array.isArray(t))return{duplicate:r,notArray:!0,keyElementNotString:n};var o=e.length,a=t.length;e:for(var i=0;i<o;i++){var c=e[i];if("string"!=typeof c){n=!0;break e}for(var s=0;s<a;s++){var u=t[s];if("string"!=typeof u){n=!0;break e}if(u===c){r=!0;break e}}}return{duplicate:r,notArray:!1,keyElementNotString:n}},Tr=l;function Rr(e,t,r,n,o,a,i,c,s){void 0===e&&(e=q),void 0===a&&(a=[]),!0===c&&function(){if(!0!==Re.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var u="cc"===s;ut(e,!1,"module["+e+"] is not configured in store"),dt(Nr[e],a);var d=i;Array.isArray(i)&&(d={},i.forEach(function(e){return d[e]="*"}));var f,l=function(e,t,r){if(!r)return[];if("*"===r)return Nr[e];var n=xr(r,[]);if(n.notArray||n.keyElementNotString)throw Error("watchedKeys "+nt+" "+Tr("ccClassKey:"+t));return r}(e,t,o),p=function(o,e,t,a){if(!_r(o))throw Error("CcFragment or CcClass's prop connect type error, it "+rt);function i(e){return c+" module["+e+"]'s value must be * or array of string"}var c="CcFragment or CcClass's prop connect is invalid,",r=hr(o);r.sort();var s=[],u={};if(r.forEach(function(t){var r=Cr[t],n=a+"_"+t+"/";if(void 0===r)throw Error(c+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e)throw Error(i(t));s.push(n+"*"),hr(r).forEach(function(e){return u[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(i(t));e.forEach(function(e){if(!r.hasOwnProperty(e))throw Error(c+" module["+t+"]'s key["+e+"] not declared in cc store ");n+=e+",",u[t+"/"+e]=e}),s.push(n)}}),s.push("|"),"*"===e)s.push(a+"_$"+t+"/*");else{e.sort();var n=t+"/"+e.join(",");s.push(n)}return{featureStr:s.join("@"),connectedModuleKeyMapping:u,connectedModuleNames:r}}(d,l),y=p.connectedModuleKeyMapping,v=p.connectedModuleNames,m=function(e,t,r,n,o,a,i){if(void 0===i&&(i=""),!i){if(t===q&&gr(r)&&0===n.length)return o+"0";var c=o+":"+a,s=Er[c];return s||(Er[c]=s=""+o+ ++br)}if(i.startsWith(h))throw Error("user can not specify a classKey["+i+"] starts with $$Cc");if(!e&&i.toLowerCase()==G.toLowerCase())throw Error(G+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(wr[i]){if(Sr[i]!==a)throw Kr(ie.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+i+"] duplicate")}else Sr[i]=a;return i}(u,e,d,l,n,p.featureStr,t);if(r){if(!Array.isArray(r)&&"*"!==r)throw Error("renderKeyClasses type err, it is must be an array or string *");f=r}else f=[m];return function(r,e,t,n,o,a,i){var c=Ur[r];c||(c=function(e,t,r,n,o){return{module:e,ccClassKey:t,renderKeyClasses:r,originalWatchedKeys:o,watchedKeys:n,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(t,r,e,o,n),Ur[r]=c);var s={},u={};if(a){var d=Re.store._state,f=c.connectedState;i.forEach(function(e){f[e]=d[e],u[e]=Ar[e],s[e]=1;var t=se(Dr,e);t.includes(r)||t.push(r)}),c.connectedModuleKeyMapping=a,c.connectedModule=s,c.connectedComputed=u}}(m,f,e,o,l,y,v),function(e,t){var r=se(Or,e);if(!0===Ir[e]&&1<=r.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+r[0]+"] has been registered!");r.includes(t)||r.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:m}}var kr=F,Mr=d,$r=l,Fr=y,jr=p,Lr=Re.runtimeVar,Pr=Re.ccClassKey_ccClassContext_,Hr=Re.ccUkey_ref_,qr={};function Vr(e,t,r,n){function o(){Hr[e]=t,r.push(e)}!function(e){void 0===qr[e]?qr[e]=1:qr[e]+=1}(e),n?setTimeout(o,n):o()}function Br(e,t,r,n,o){var a=Pr[r],i=a.ccKeys;Lr.isDebug&&console.log(Fr("register ccKey "+o+" to CC_CONTEXT"),jr());var c=Re.isHotReloadMode();if(i.includes(o)){var s=function(){throw Mr(ie.CC_CLASS_INSTANCE_KEY_DUPLICATE,$r("ccClass:"+r+",ccKey:"+o))};if(c){var u=function(e){return void 0===qr[e]?0:qr[e]}(o);if(t&&0<u)throw Mr(ie.CC_CLASS_INSTANCE_MORE_THAN_ONE,$r("ccClass:"+r));1<u&&s(),kr("\n        found ccKey["+n+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+$r("ccClassKey:"+r+" ccKey:"+n+" ccUniqueKey:"+o)+"\n      "),Vr(o,e,i,600)}else s()}else Vr(o,e,i);return a}var Gr=Re.event_handlers_,zr=Re.handlerKey_handler_,Wr=Re.ccUKey_handlerKeys_,Yr=Re.ccUkey_ref_,Xr=function(e,t,r){return e+"$"+t+"$"+r},Jr=se,Zr=F;function Qr(e,t,r,n,o){void 0===o&&(o=null);var a=Gr[e];if(a){var i=a;return n?i=a.filter(function(e){return e.ccUniqueKey===n}):r?i=a.filter(function(e){return e.ccClassKey===r}):t&&(i=a.filter(function(e){return e.module===t})),void 0!==o&&(i=i.filter(function(e){return e.identity===o})),i}return[]}function en(e){var o={},n=[];e.forEach(function(e){var t=e.ccUniqueKey,r=e.event;delete zr[e.handlerKey],o[t]=1,n.includes(r)||n.push(r)}),n.forEach(function(e){var n=Gr[e];n&&(n.forEach(function(e,t){var r=e.ccUniqueKey;1===o[r]&&(n[t]=null,delete Wr[r])}),Gr[e]=n.filter(function(e){return null!==e}))})}function tn(e,t,r,n,o,a){var i=Jr(Gr,n);if("function"!=typeof a)return Zr("event "+n+"'s handler is not a function!");var c=Xr(r,n,o),s=Jr(Wr,r),u=i.findIndex(function(e){return e.handlerKey===c}),d={event:n,module:e,ccClassKey:t,ccUniqueKey:r,identity:o,handlerKey:c,fn:a};-1<u?i[u]=d:(i.push(d),s.push(c)),zr[c]=d}function rn(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,i,c,s=null;"string"==typeof e?o=e:(o=e.name,s=e.identity,a=e.module,i=e.ccClassKey,c=e.ccUniqueKey),Qr(o,a,i,c,s).forEach(function(e){var t=e.handlerKey;if(Yr[e.ccUniqueKey]&&t){var r=zr[t];r&&r.fn.apply(r,n)}})}function nn(e,t){en(Qr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function on(e){var t=Wr[e];if(t){var r=[];t.forEach(function(e){return r.push(zr[e])}),en(r)}}function an(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var cn=Object.freeze({bindEventHandlerToCcContext:tn,findEventHandlersToPerform:rn,findEventHandlersToOff:nn,offEventHandlersByCcUniqueKey:on,getEventItem:an}),sn=0,un=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function dn(e){return sn++,(e||function(e){void 0===e&&(e=6);for(var t="",r=0;r<e;r++)t+=un[m()];return t}())+"_"+sn}var fn=Re.moduleName_stateKeys_,ln=Re.refRetKey_fnUid_,pn=Re.runtimeVar;function yn(e,t,r,n,o,a,i){if(r){var c,s,u,d=typeof r;if("string"==d)c=ce(n)?((s={})[r]=n,s):((u={})[r]={fn:n,depKeys:o,compare:a,immediate:i},u);else if(ce(r))c=r;else if("function"==d&&!ce(c=r(t.refCtx)))throw Error("type of "+t.type+" callback result must be an object");c?function(N,O,I){var e=pn.computedCompare,t=pn.watchCompare,U=pn.watchImmediate,D="computed"===O.type?e:t,A=O.module;j(I).forEach(function(i){var e=I[i],t=typeof e,r=e;if("function"==t&&(r={fn:e}),ce(r)){var n=r,o=n.fn,a=n.depKeys,c=n.immediate,s=void 0===c?U:c,u=n.compare,d=void 0===u?D:u,f=dn("mark");if("*"===a){var l=hn(O,A,i),p=l.isStateKey,y=l.stateKey;if(!p)throw Error("retKey["+i+"] is not a state key of module["+A+"]");vn(N,O,f,y),mn(N,O,A,y,o,a,s,d)}else{if(a&&!Array.isArray(a))throw Error("depKeys must an string array or *");if(a&&0!==a.length){var v="",m=i;if(i.includes("/")){var h=i.split("/"),_=h[0],C=h[1];v=_,m=C}vn(N,O,f,m);var g={};a.forEach(function(e){var t=hn(O,A,e),r=t.isStateKey,n=t.stateKey,o=t.module;if(v&&o!==v)throw Error("including slash both in retKey["+i+"] and depKey["+e+"] founded, but their module is different");var a=se(g,o);if(!r)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+n+"]");a.push(n)}),j(g).forEach(function(e){mn(N,O,e,m,o,g[e],s,d)})}else{var K=hn(O,A,i),E=K.isStateKey,S=K.stateKey,w=K.module,b=[];!a&&E&&(b=[S]),vn(N,O,f,S),mn(N,O,w,S,o,b,s,d)}}}else F("retKey["+i+"] item type error")})}(e,t,c):F(e+" "+t.type+" param type error")}}function vn(e,t,r,n){if(e===ae){var o=t.refCtx.ccUniqueKey,a=t.type,i=o+"_"+a+"_"+n;if(ln[i])throw Error("ccUKey["+o+"], retKey["+n+"] duplicate in ref "+a);ln[i]=r}}function mn(e,t,r,n,o,a,i,c){var s=S(t.dep,r,{retKey_fn_:{},stateKey_retKeys_:{},fnCount:0}),u=s.retKey_fn_,d=s.stateKey_retKeys_,f={fn:o,immediate:i,compare:c,depKeys:a};u[n]?e!==ae&&(u[n]=f):(u[n]=f,s.fnCount++);var l=a;"*"===a&&(l=["*"]),e===ae&&(t.retKeyFns[n]=u[n]);var p=t.refCtx;p&&("computed"===t.type?p.hasComputedFn=!0:p.hasWatchFn=!0),l.forEach(function(e){var t=se(d,e);t.includes(n)||t.push(n)})}function hn(e,t,r){var n,o=t,a=r;if(r.includes("/")){var i=r.split("/"),c=i[0];c&&(o=c),a=i[1]}if(o===e.module)n=e.stateKeys;else{if(!(n=fn[o]))throw d(ie.CC_MODULE_NOT_FOUND,l("module["+o+"]"));if(!e.connect[o])throw d(ie.CC_MODULE_NOT_CONNECTED,l("module["+o+"], stateKey["+a+"]"))}return{isStateKey:n.includes(a),stateKey:a,module:o}}var _n=F,Cn=f;function gn(e){return e?e.props||e:{}}var Kn=Re.store.getState;function En(e){var t=L(e);return t?t.currentTarget.value:e}var Sn=function(e,t,r){var n,o=r.module,a=r.state,i=!1,c="",s="",u="",d=void 0,f=-1,l=!1,p=e[te],y=e.type,v=!1;if(void 0!==p)if(c=p,f=e.delay,s=e.rkey,"val"===y||"int"===y){i="int"===y;var m=e.val;if(void 0===m)u=En(t);else if("function"==typeof m){var h,_,C;if(c.includes("/")){var g=c.split("/");h=g[1],_=c,C=g[0]}else _=o+"/"+(h=c),C=o;v=!0,d=m(En(t),h,{moduleState:Kn(C),fullKeyPath:_,state:a,refCtx:r})}else u=m}else{if("bool"!==y)return null;l=!0}else{var K=L(t);if(!K)return null;var E=K.currentTarget;u=E.value;var S=E.dataset;if(i="int"===y||void 0!==S.ccint,!(c=S.ccsync))return null;s=S.ccrkey;var w=S.ccdelay;if(w)try{f=parseInt(w)}catch(e){}}return(n={})[b]=1,n.currentTarget={value:u,extraState:d,hasSyncCb:v,dataset:{ccsync:c,ccint:i,ccdelay:f,ccrkey:s}},n.isToggleBool=l,n};var wn=function(e,t,r,n,o){var a=t;!0!==r||Number.isNaN(a=parseInt(t))&&(F(t+" can not convert to int but you set ccint as true!！"),a=t);var i=null,c=[];if(e.includes("/")){var s=e.split("/"),u=s[1];i=s[0],c=u.includes(".")?u.split("."):[u]}else c=e.includes(".")?e.split("."):[e];if(1===c.length){var d,f,l=c[0];return!0!==o?{module:i,state:(d={},d[l]=a,d)}:{module:i,state:(f={},f[l]=!n[l],f)}}var p,y=c[0],v=c.slice(1),m=n[y];return function e(t,r,n,o,a,i){void 0===i&&(i=!1);var c=r[o];if(n===o)if(!0===i){var s=t[c];"boolean"!=typeof s?F("key["+c+"]'s value type is not boolean"):t[c]=!s}else t[c]=a;else e(t[c],r,n,++o,a,i)}(m,v,v.length-1,0,a,o),{module:i,state:(p={},p[y]=m,p)}},bn=Re.store.getState;function Nn(e,t,r){var n=t.ctx,o=n.module,a=null;if(a=e[b]?e:Sn(e,r,n)){var i=a.currentTarget,c=i.dataset,s=i.value,u=i.extraState,d=i.hasSyncCb;r&&r.stopPropagation&&r.stopPropagation();var f=c.ccsync,l=c.ccint,p=c.ccdelay,y=c.ccrkey;if(f.startsWith("/")&&(c.ccsync=""+o+f),f.includes("/")){var v=f.split("/")[0];ut(v,!1);var m=n.ccKey,h=n.ccUniqueKey;if(d)return void(u&&qt(u,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t));var _=v!==o?bn(v):t.state;qt(wn(f,s,l,_,a.isToggleBool).state,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t)}else{if(d)return void(u&&t.setState(u,null,y,p));var C=wn(f,s,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var On=Re.refStore,In=Re.ccClassKey_ccClassContext_,Un=Re.moduleName_stateKeys_,Dn=Re.store.getState,An=Re.moduleName_ccClassKeys_,xn=Re.computed._computedValue,Tn=Re.renderKey_ccUkeys_,Rn=j,kn=d,Mn=l,$n=se,Fn=0;function jn(a,e,t){var r;void 0===t&&(t=5);var n=a.setState.bind(a),o=a.forceUpdate.bind(a),i=e.isSingle,c=e.ccClassKey,s=e.ccKey,u=void 0===s?"":s,d=e.module,f=e.type,l=e.state,p=e.storedKeys,y=void 0===p?[]:p,v=e.persistStoredKeys,m=e.watchedKeys,h=e.connect,_=void 0===h?{}:h,C=e.tag,g=void 0===C?"":C,K=e.ccOption,E=void 0===K?{}:K,S=d,w={};w.persistStoredKeys=void 0===E.persistStoredKeys?void 0!==v&&v:E.persistStoredKeys,w.tag=E.tag||g;var b=function(e,t,r,n){var o;if(e)r&&_n("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+r+"]"),o=t;else if(r)o=Cn(t,r);else{var a=dn(n);o=Cn(t,a)}return o}(i,c,u,w.tag);if(w.renderKey=E.renderKey||b,$n(Tn,w.renderKey).push(b),w.storedKeys=function(e,t,r,n){var o=r||n;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(dt(t,o),o):[]}(l,Un[S],E.storedKeys,y),u&&!c)throw Error("missing ccClassKey while init a cc ins with ccKey["+u+"]");if(0<w.storedKeys.length&&!u)throw kn(ie.CC_STORED_KEYS_NEED_CCKEY,Mn("ccClassKey["+c+"]"));var N=In[c],O=N.connectedComputed||{},I=N.connectedState||{},U=Dn(d),D=xn[d]||{},A=xn[ee]||{},x=Dn(ee),T=ue(Rn(l),Un[S]),R=On._state[b]||{},k=Object.assign({},l,R,U),M=Rn(a.state=k);Br(a,i,c,u,b);var $=se(An,d);$.includes(c)||$.push(c);function F(e,t){qt(e,t,a)}function j(e,t,r,n,o,a){F(t,{calledBy:r,module:e,renderKey:o,delay:a,reactCallback:n})}function L(e,t,r,n,o){j(e,t,ne,r,n,o)}function P(e,t,r,n,o){"string"==typeof e?L(e,t,r,n,o):j(S,e,re,t,r,n)}function H(e,t,r){j(S,a.state,oe,e,t,r)}var q=[],V=[],B=[],G={effectItems:V,eid_effectReturnCb_:{},effectPropsItems:B,eid_effectPropsReturnCb_:{}},z={},W={},Y=gn(a.props),X=((r={type:f,isSingle:i,module:d,ccClassKey:c,ccKey:u,ccUniqueKey:b,renderCount:1,initTime:Date.now(),watchedKeys:m,privStateKeys:T,connect:_,persistStoredKeys:w.persistStoredKeys,storedKeys:w.storedKeys,renderKey:w.renderKey,tag:w.tag,prevProps:Y,props:Y,mapped:{},prevState:k,state:k,moduleState:U,globalState:x,connectedState:I,extra:{},refComputed:{},moduleComputed:D,globalComputed:A,connectedComputed:O,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},r.prevModuleStateVer={},r.stateKeys=M,r.onEvents=q,r.computedDep={},r.computedRetKeyFns={},r.watchDep={},r.watchRetKeyFns={},r.execute=null,r.auxMap=z,r.effectMeta=G,r.reactSetState=n,r.reactForceUpdate=o,r.setState=P,r.setModuleState=L,r.forceUpdate=H,r.changeState=F,r.refs=W,r.useRef=function(t){return function(e){return W[t]={current:e}}},r.__$$ccForceUpdate=lr(a),r.__$$ccSetState=fr(a),r);a.ctx=X,a.setState=P,a.forceUpdate=H,X.initState=function(e){if(!a.__$$isBeforeFirstRender)throw Error("ctx.initState can only been called before first render period!");if(!ce(l))throw Error("state must be a plain json object!");a.state=Object.assign({},l,e,R,U),X.prevState=X.state=a.state};var J=vr(a,!1,!1,S);if(X.dispatch=J,1<t&&(X.lazyDispatch=vr(a,!0,!1,S),X.silentDispatch=vr(a,!1,!0,S),X.dispatchLazy=X.lazyDispatch,X.dispatchSilent=X.silentDispatch,X.invoke=pr(a),X.lazyInvoke=pr(a,{isLazy:!0}),X.silentInvoke=pr(a,{isLazy:!1,isSilent:!0}),X.invokeLazy=X.lazyInvoke,X.invokeSilent=X.silentInvoke,X.setGlobalState=function(e,t,r,n){j(ee,e,re,t,r,n)}),2<t&&(X.syncBool=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return Nn.bind(null,((n={})[te]=e,n.type="bool",n.delay=r,n.rkey=t,n),a);Nn({type:"bool"},e,a)},X.sync=function(e,t,r,n){var o;if(void 0===r&&(r=""),void 0===n&&(n=-1),"string"==typeof e)return Nn.bind(null,((o={})[te]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a);Nn({type:"val"},a,e)},X.set=function(e,t,r,n){var o;void 0===r&&(r=""),void 0===n&&(n=-1),Nn(((o={})[te]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a)},X.setBool=function(e,t,r){var n;void 0===t&&(t=""),void 0===r&&(r=-1),Nn(((n={})[te]=e,n.type="bool",n.delay=r,n.rkey=t,n),a)},X.syncInt=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return Nn.bind(null,((n={})[te]=e,n.type="int",n.delay=r,n.rkey=t,n),a);Nn({type:"int"},a,e)}),3<t){X.emit=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];rn.apply(cn,[an(e)].concat(r))},X.off=function(e,t){var r=void 0===t?{}:t,n=r.module,o=r.ccClassKey,a=r.ccUniqueKey,i=void 0===a?b:a,c=an(e);nn(c.name,{module:n,ccClassKey:o,ccUniqueKey:i,identity:c.identity})};var Z=function(e,t,r){void 0===r&&(r=!0);var n=an(e),o=n.name,a=n.identity,i=void 0===a?null:a;r?q.push({event:o,handler:t,identity:i}):tn(S,c,b,o,i,t)};X.on=Z,X.onDirectly=function(e,t){Z(e,t,!1)}}if(4<t){X.execute=function(e){return X.execute=e},X.aux=function(e,t){if(z[e])throw Error("auxMethod["+e+"] already defined!");z[e]=t},X.watch=function(a){return function(e,t,r,n,o){yn(ae,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,r,n,o)}}(X),X.computed=function(o){return function(e,t,r,n){yn(ae,{type:"computed",refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep},e,t,r,n)}}(X);var Q=function(i){return function(e,t,r,n){var o;if(void 0===r&&(r=!0),"function"!=typeof e)throw Error("type of defineEffect first param must be function");if(null!=t&&!Array.isArray(t))throw Error("type of defineEffect second param must be one of them(array, null, undefined)");var a=((o={fn:e,depKeys:t,eId:n||Symbol("__autoGen_"+ ++Fn+"__")}).depKeys=t,o.immediate=r,o);i.push(a)}};X.effect=Q(V),X.effectProps=Q(B)}}var Ln=Re.store.getState;var Pn=S,Hn=j,qn=F,Vn=Re.reducer,Bn=Vn._module_fnNames_,Gn=Vn._caller,zn=Re.runtimeVar;function Wn(r,e,t){r.__$$isUnmounted=!1,r.__$$isBeforeFirstRender=!0;var n=r.ctx,a=n.connectedReducer,i=n.moduleReducer,c=n.dispatch,s=n.module,o=Hn(n.connect).slice();if(o.includes(s)?qn("module["+s+"] is in belongTo and connect both, it will cause redundant render."):o.push(s),o.forEach(function(o){var e;e=o===s?i:Pn(a,o),(Bn[o]||[]).forEach(function(n){e[n]=function(e,t,r){return c(o+"/"+n,e,t,r)}})}),n.reducer=Gn,e){if("function"!=typeof e)throw Error("type of setup must be function");var u=e(n)||{};if(!ce(u))throw Error("type of setup return result must be an plain json object");(!0===t||!0===zn.bindCtxToMethod&&!1!==t)&&Hn(u).forEach(function(e){var t=u[e];"function"==typeof t&&(u[e]=t.bind(r,n))}),n.settings=u}!function(e){var n=e.ctx,t=n.hasComputedFn,r=n.hasWatchFn,o=n.connect,a=n.module,i=X(a),c=j(o),s=n.state;t&&(yt(n,a,s,s,i,!0,!0),c.forEach(function(e){var t=Ln(e),r=X(e);yt(n,e,t,t,r,!0,!0)})),r&&(pt(n,a,s,s,i,!0,!0),c.forEach(function(e){var t=Ln(e),r=X(e);pt(n,e,t,t,r,!0,!0)}))}(r)}var Yn=Re.moduleName_stateKeys_,Xn=Re.store,Jn=Xn.getPrevState,Zn=Xn.getState,Qn=Xn.getStateVer,eo=function(e,t){return F("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function to(e,t){function r(o,a,i){return function(e){var t=e.eId;if(!i||!1!==e.immediate){var r=o[t],n=(0,e.fn)(m,a);n&&(o[t]=n),r&&r(m)}}}var m=e.ctx,n=m.effectMeta,o=n.effectItems,a=n.eid_effectReturnCb_,i=n.effectPropsItems,c=n.eid_effectPropsReturnCb_,h=m.prevModuleStateVer;if(t)o.forEach(r(a,!0,!0)),i.forEach(r(c,!0,!0));else{var _=m.prevState,C=e.state,g=[];o.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i],s=void 0,u=void 0,d=void 0;if(c.includes("/")){var f=c.split("/"),l=f[0],p=f[1],y=Jn(l),v=Qn(l);if(h[p]===v[p])continue;if(m.prevModuleStateVer[p]=v[p],!y){eo(c,"module["+l+"]");continue}if(!Yn[l].includes(p)){eo(c,"unmoduledKey["+p+"]");continue}s=Zn(l),u=y,d=p}else s=C,u=_,d=c;if(u[d]!==s[d]){a=!0;break}}a&&g.push({fn:r,eId:n})}else g.push({fn:r,eId:n})}),g.forEach(r(a,!1,!1));var s=m.prevProps,u=m.props,d=[];i.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i];if(s[c]!==u[c]){a=!0;break}}a&&d.push({fn:r,eId:n})}else d.push({fn:r,eId:n})}),d.forEach(r(c,!1,!1))}}function ro(e){e.__$$isBeforeFirstRender=!1;var t=e.ctx,r=t.module,n=t.ccClassKey,o=t.ccUniqueKey;t.onEvents.forEach(function(e){tn(r,n,o,e.event,e.identity,e.handler)}),to(e,!0)}function no(e){to(e),e.ctx.prevState=e.state}var oo=Re.ccUkey_ref_,ao=Re.ccUKey_handlerKeys_,io=Re.runtimeVar,co=Re.ccClassKey_ccClassContext_,so=Re.handlerKey_handler_,uo=Re.renderKey_ccUkeys_;function fo(e,t,r){io.isDebug&&console.log(y(t+" unset ref"),p("purple")),delete oo[t];var n=uo[r];r===t?delete uo[r]:n.splice(n.indexOf(t),1);var o=co[e].ccKeys,a=o.indexOf(t);a<0||o.splice(a,1),function(e){void 0===qr[e]?qr[e]=0:qr[e]-=1}(t);var i=ao[t];i&&i.forEach(function(e){delete so[e]})}var lo=j;function po(r,n){function e(e){var t=r[e];"function"==typeof t&&t(n)}Object.getOwnPropertySymbols(r).forEach(e),lo(r).forEach(e)}function yo(e){e.__$$isUnmounted=!0;var t=e.ctx,r=t.effectMeta,n=r.eid_effectPropsReturnCb_;po(r.eid_effectReturnCb_,t),po(n,t);var o=t.ccUniqueKey,a=t.ccClassKey,i=t.renderKey;on(o),fo(a,o,i)}var vo=function(e){return"CC("+e+")"},mo=j,ho=E,_o=Re.runtimeVar,Co=p,go=y,Ko=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function Eo(e,t){var r=void 0===e?{}:e,n=r.module,o=void 0===n?q:n,a=r.state,s=void 0===a?{}:a,i=r.watchedKeys,c=void 0===i?"*":i,u=r.storedKeys,d=void 0===u?[]:u,f=r.setup,l=void 0===f?null:f,p=r.persistStoredKeys,y=r.connect,v=void 0===y?{}:y,m=r.tag,h=r.lite,_=r.isPropsProxy,C=void 0!==_&&_,g=r.isSingle,K=void 0!==g&&g,E=r.renderKeyClasses,S=r.__checkStartUp,w=void 0===S||S,b=r.compareProps,N=void 0===b||b,O=r.__calledBy;void 0===t&&(t="");try{var I=Rr(o,t,E,R,c,d,v,w,O),U=I._module,D=I._watchedKeys,A=I._ccClassKey,x=I._connect;return function(r){if(r.prototype&&r.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?r:T.Component,c=e.$$setup,t=function(i){function e(e,t){var r;try{r=i.call(this,e,t)||this;var n="function"==typeof s?s():s,o=Object.assign(r.state||{},n);r.$$attach=r.$$attach.bind(Le(r));var a=Object.assign({},e,{isSingle:K,module:U,tag:m,state:o,type:R,watchedKeys:D,ccClassKey:A,connect:x,storedKeys:d,persistStoredKeys:p});if(jn(Le(r),a,h),l&&(r.$$setup||c))throw Ko("ccUniqueKey "+r.ctx.ccUniqueKey);r.$$setup&&(r.$$setup=r.$$setup.bind(Le(r))),Wn(Le(r),l||r.$$setup||c,!1)}catch(e){Pe(e)}return r}je(e,i);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var r=this.ctx.childRef;if(r&&r.shouldComponentUpdate)return r.shouldComponentUpdate(e,t);if(i.prototype.shouldComponentUpdate)return i.prototype.shouldComponentUpdate.call(this,e,t);var n=!!N&&ho(this.props,e);return this.state!==t||n},t.$$attach=function(e){var t=this.ctx;((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=fr(e,this),t.__$$ccForceUpdate=lr(e);var r=e.state,n=this.state;r||(r=e.state={});var o=Object.assign({},r,n);if(mo(t.state=e.state=o).forEach(function(e){return n[e]=o[e]}),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||c))throw Ko("ccUniqueKey "+t.ccUniqueKey);Wn(e,l||e.$$setup||c,!1)},t.componentDidMount=function(){i.prototype.componentDidMount&&i.prototype.componentDidMount.call(this),ro(this)},t.componentDidUpdate=function(){i.prototype.componentDidUpdate&&i.prototype.componentDidUpdate.call(this),no(this)},t.componentWillUnmount=function(){i.prototype.componentWillUnmount&&i.prototype.componentWillUnmount.call(this),yo(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,_o.isDebug&&console.log(go("@@@ render "+vo(A)),Co()),!1===C?i.prototype.render.call(this):T.createElement(r,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=A===G?"CcDispatcher":vo(A),t}}catch(e){Pe(e)}}function So(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return je(t,e),t.prototype.render=function(){return this.props.children||T.createElement("span",{style:{display:"none"}})},t}(T.Component);if(Re.refs[G]){if(!Re.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");x("hot reload mode, CC_DISPATCHER existed")}var r=e||t;return Eo({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},G)(r)}var wo={},bo=function(e,t,r){if(e.code!==ie.CC_MODULE_NAME_DUPLICATE||!Re.isHotReloadMode())throw e;var n=function(e){e||(e="");for(var t=e.split("\n"),r=t.length,o="",a=0;a<r;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),r=e.length-1,n=[];e.forEach(function(e,t){t!==r&&n.push(e)}),o=n.join(":")}();break}return o}(e.stack),o=r+"|--link--|"+t,a=wo[o];if(a){if(n!==a)throw e}else wo[o]=n};function No(t,e,r){void 0===r&&(r=!0);var n=t===B?{}:e;try{!function(e,t,r){if(ut(e,r),!ce(t))throw Error("module["+e+"]'s state "+rt)}(t,n,r)}catch(e){bo(e,t,"state")}var o=Re.store,a=o.getState(),i=o.getStateVer();o.getPrevState()[t]=Object.assign({},a[t]=n),i[t]=j(n).reduce(function(e,t){return e[t]=1,e},{});var c=Object.keys(n);if(Re.moduleName_stateKeys_[t]=c,t===ee){var s=Re.globalStateKeys;c.forEach(function(e){s.includes(e)||s.push(e)})}}var Oo=f,Io=F;function Uo(e,t,r,n,o){return function(e,t,r,n,o){void 0===r&&(r="");var a,i=void 0===o?{}:o,c=i.ccClassKey,s=i.ccKey,u=i.throwError;if(void 0===e&&void 0===t)throw Error("api doc: cc.dispatch(action:Action|String, payload?:any, delay?:number, idt?:string), when action is String, second param means payload");try{if(c&&s){var d=Oo(c,s),f=Re.refs[d];if(!f)throw Error("no ref found for uniqueCcKey:"+d+"!");a=f.ctx.dispatch}else{var l,p="";"string"==typeof e&&e.includes("/")&&(p=e.split("/")[0]),l="*"!==p?Bt(p):Bt(),a=l.ctx.dispatch}if("string"==typeof e&&e.startsWith("*")){var y=e.split("/").pop(),v=Re.reducer._fnName_fullFnNames_[y];if(!v)return;var m=[];return v.forEach(function(e){m.push(a(e,t,r,n))}),Promise.all(m)}return a(e,t,r,n)}catch(e){if(u)throw e;Io(e.message)}}(e,t,r,n,o)}function Do(a,e){if(e){var t="module["+a+"] reducer";if(!ce(e))throw Error(t+" "+rt);ut(a,!1,t+" is invalid");var r=Re.reducer,n=r._reducer,o=r._caller,i=r._fnName_fullFnNames_,c=r._module_fnNames_,s=Object.assign({},e);n[a]=s;var u=S(o,a),d=se(c,a);s.setState||(s.setState=function(e){return e}),j(s).forEach(function(e){d.includes(e)||d.push(e);var n=a+"/"+e;u[e]=function(e,t,r){return Uo(n,e,t,r)};var o=s[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var t=o;o.__fnName&&(s[e]=t=function(e,t,r){return o(e,t,r)}),t.__fnName=e,t.__stateModule=a,t.__ctName=o.__ctName||o.constructor.name;var r=se(i,e);r.includes(n)||r.push(n)})}}var Ao=ce,xo=S,To=j;function Ro(r,e,t){if(void 0===t&&(t=!1),e){var n="module["+r+"] watch";if(!Ao(e))throw Error(n+" "+rt);ut(r,!1,n+" is invalid");var o=Re.watch.getRootWatchDep(),a=Re.watch.getRootWatchRaw(),i=Re.computed.getRootComputedValue();if(t){var c=a[r];c?Object.assign(c,e):a[r]=e}else a[r]=e;var s=(0,Re.store.getState)(r);yn(_,{module:r,stateKeys:To(s),dep:o},e);var u=Re.getDispatcher(),d=Object.assign({},s),f=xo(i,r);Ee(u&&u.ctx,r,u&&u.ctx.module,s,function(e,t){return _e(t,_,"watch",o,r,s,e)},s,s,d,X(r),!0,"watch",_,f)}}var ko=S,Mo=ce;function $o(r,e){if(e){var t="module["+r+"] computed";if(!Mo(e))throw Error(t+" "+rt);ut(r,!1,t+" is invalid");var n=Re.computed,o=Re.store.getState(),a=n.getRootComputedValue(),i=n.getRootComputedDep();n.getRootComputedRaw()[r]=e;var c=o[r];yn(_,{module:r,stateKeys:j(c),dep:i},e);var s=Re.getDispatcher(),u=Object.assign({},c),d=ko(a,r);Ee(s&&s.ctx,r,s&&s.ctx.module,c,function(e,t){return _e(t,_,"computed",i,r,c,e)},c,c,u,X(r),!0,"computed",_,d)}}var Fo=ce,jo=j;function Lo(e,t){if(!Fo(e))throw Error(t+" "+rt)}function Po(e){if(!Fo(e))throw Error("StartupOption.moduleSingleClass "+rt);!function(t,r){Object.keys(r).forEach(function(e){t[e]=r[e]})}(Re.moduleSingleClass,e)}function Ho(e){if(0<e.length){var o=Re.plugins;o.length=0,Ze.forEach(function(e){return Qe[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(tt),r=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw r;var n=t.name;if(!n)throw r;if(a[n])throw Error("pluginName["+n+"] duplicate");a[n]=1})}}var qo=function(e){var t=document.querySelector("#"+o);if(!t){(t=document.createElement("div")).id=o;var r=t.style;r.position="fixed",r.left=0,r.top=0,r.display="none",r.zIndex=-888666,document.body.appendChild(t)}n.render(T.createElement(e),t)},Vo=!1;function Bo(e){void 0===e&&(e=!1),C(Re.refRetKey_fnUid_),C(Re.event_handlers_),C(Re.ccUKey_handlerKeys_),C(Re.renderKey_ccUkeys_);var t=Re.ccClassKey_ccClassContext_;if(Object.keys(t).forEach(function(e){C(t[e].ccKeys)}),C(Re.handlerKey_handler_),C(Re.ccUkey_ref_,[G]),C(Re.refs,[G]),e){var r=Re.computed,n=Re.watch,o=r._computedValue,a=n._watchDep;j(Re.store._state).forEach(function(e){e!==V&&(o[e]&&(Re.computed._computedDep[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},$o(e,r._computedRaw[e])),a[e]&&(a[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},Ro(e,n._watchRaw[e])))})}}function Go(){C(Re.globalStateKeys);var e=j(Re.moduleName_isConfigured_).concat([q,V,ee,r]);C(Re.reducer._reducer,e),C(Re.store._state,e,{}),C(Re.computed._computedDep,e),C(Re.computed._computedValue,e),C(Re.watch._watchDep,e),C(Re.middlewares),me={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}},Bo()}function zo(e){void 0===e&&(e=!1),Re.info.latestStartupTime=Date.now(),function(e){Re.isStartup?Re.isHotReloadMode()?e():console.warn("clear failed because of not running under hot reload mode!"):Vo=!0}(function(){if(e)console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Vo=!0,Go();else{if(Vo)return void(Vo=!1);!function(){if(!Re.refs[G]){var e=So();qo(e)}}(),Bo(Re.reComputed)}})}var Wo=x,Yo=K,Xo="";function Jo(e,t){var r=void 0===e?{}:e,n=r.store,o=void 0===n?{}:n,a=r.reducer,i=void 0===a?{}:a,c=r.init,s=void 0===c?null:c,u=r.computed,d=void 0===u?{}:u,f=r.watch,l=void 0===f?{}:f,p=r.moduleSingleClass,y=void 0===p?{}:p,v=void 0===t?{}:t,m=v.plugins,h=void 0===m?[]:m,_=v.middlewares,C=void 0===_?[]:_,g=v.isStrict,K=void 0!==g&&g,E=v.isDebug,S=void 0!==E&&E,w=v.errorHandler,b=void 0===w?null:w,N=v.isHot,O=v.bindCtxToMethod,I=void 0!==O&&O,U=v.computedCompare,D=void 0===U||U,A=v.watchCompare,x=void 0===A||A,T=v.watchImmediate,R=void 0!==T&&T,k=v.alwaysGiveState,M=void 0===k||k,$=v.reComputed,F=void 0===$||$,j=!0;try{throw Error()}catch(e){j=function(e){function t(e,t){for(var r=0;r<o;r++)if(n[r].includes(e)){a=n[r+t];break}}var r=Re.info,n=e.stack.split("\n"),o=n.length,a="";function i(){zo(Re.isHot=!0)}t("startup",2),a||t("runConcent",0);var c=Date.now();if(Xo)if(Xo!==a){var s="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(c-r.latestStartupTime<1e3)throw Error(s);if(!Y())return z(s),!1;i(),Xo=a}else i();else Xo=a,r.firstStartupTime=c,r.latestStartupTime=c;return!0}(e)}if(j)try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Wo("cc version "+Re.info.version),void 0!==N&&(Re.isHot=N),Re.reComputed=F,Re.errorHandler=b;var L=Re.runtimeVar;if(L.alwaysGiveState=M,L.isStrict=K,L.isDebug=S,L.computedCompare=D,L.watchCompare=x,L.watchImmediate=R,L.bindCtxToMethod=I,Po(y),function(e){Lo(e,"state"),delete e[B],delete e[V],void 0===e[ee]&&(e[ee]={}),void 0===e[q]&&(e[q]={});for(var t=jo(e),r=t.length,n=0;n<r;n++){var o=t[n];No(o,e[o])}}(o),function(t){Lo(t,"reducer"),void 0===t[q]&&(t[q]={}),void 0===t[ee]&&(t[ee]={}),jo(t).forEach(function(e){return Do(e,t[e])})}(i),function(t){Lo(t,"computed"),jo(t).forEach(function(e){return $o(e,t[e])})}(d),function(t){Lo(t,"watch"),Object.keys(t).forEach(function(e){return Ro(e,t[e])})}(l),function(r){if(r){if(!Fo(r))throw Error("init "+rt);jo(r).forEach(function(t){ut(t,!1);var e=r[t];e&&Promise.resolve().then(e).then(function(e){mr(t)(e)})}),Re.init._init=r}}(s),function(e){if(0<e.length){var t=Re.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C),!Re.refs[G]){var P=So();qo(P)}var H=function(e){Yo("CC_CONTEXT",Re,e),Yo("ccc",Re,e),Yo("cccc",Re.computed._computedValue,e),Yo("sss",Re.store._state,e)};window.mcc?setTimeout(function(){H(window.mcc[W()])},1200):H(),Re.isStartup=!0,Ho(h)}catch(e){if(!b)throw e;b(e)}}var Zo=ce;function Qo(t,e){if(!Re.isStartup)throw Error("configure must be called after run!");if(!Zo(e))throw Error("param config "+rt);if(t===ee)throw Error("configuring global module is not allowed");var r=e.state,n=e.reducer,o=e.computed,a=e.watch,i=e.init,c=e.isClassSingle;if(n&&!Zo(n))throw Error("config.reducer "+rt);if(No(t,r,!0),Do(t,n),o&&$o(t,o),a&&Ro(t,a),Re.moduleSingleClass[t]=!0===c,i){if("function"!=typeof i)throw Error("init value must be a function!");Promise.resolve().then(i).then(function(e){mr(t)(e)})}Re.moduleName_isConfigured_[t]=!0,et(14,t)}function ea(n,o){var a={};return j(n).forEach(function(e){function t(){return r.apply(void 0,arguments)}var r=n[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function ta(e){throw Error("[[run]]: param error, "+e+" "+rt)}var ra=ce,na=j,oa=u;function aa(e,t){var r=P(e);return delete r.__checkStartUp,delete r.__calledBy,Eo(r,t)}var ia=E,ca=P,sa=T.createElement("span",{style:{display:"none"}}),ua=function(I){function e(e,t){var r;r=I.call(this,e,t)||this;var n=ca(e.register),o=n.module,a=n.renderKeyClasses,i=n.tag,c=n.lite,s=n.compareProps,u=void 0===s||s,d=n.setup,f=n.bindCtxToMethod,l=n.watchedKeys,p=void 0===l?"*":l,y=n.connect,v=void 0===y?{}:y,m=n.isSingle,h=n.storedKeys,_=void 0===h?[]:h,C=n.state||{};"function"==typeof C&&(C=C());var g=e.ccClassKey,K=e.ccKey,E=e.ccOption,S=void 0===E?{}:E,w=p,b=g,N=v;if(!0!==e.__$$regDumb){var O=Rr(o,g,a,U,p,_,v,!0);w=O._watchedKeys,b=O._ccClassKey,N=O._connect}return jn(Le(r),{isSingle:m,ccKey:K,connect:N,state:C,module:o,storedKeys:_,watchedKeys:w,tag:i,ccClassKey:b,ccOption:S,type:U},c),r.__$$compareProps=u,Wn(Le(r),d,f),r}je(e,I);var t=e.prototype;return t.componentDidMount=function(){ro(this)},t.shouldComponentUpdate=function(e,t){var r=!!this.__$$compareProps&&ia(gn(e),gn(this.props));return this.state!==t||r},t.componentDidUpdate=function(){no(this)},t.componentWillUnmount=function(){I.prototype.componentWillUnmount&&I.prototype.componentWillUnmount.call(this),yo(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=gn(e);var t=e.render,r=t||e.children;if("function"==typeof r){var n=e.register,o=void 0===n?{}:n,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},r(a.mapped)||sa):r(a)||sa}if(T.isValidElement(r))throw Error("CcFragment's children can not b a react dom ");return r},e}(T.Component);function da(e,t){var r=P(e),n=r.watchedKeys,o=r.render,a=r.connect,i=Rr(r.module,t,r.renderKeyClasses,U,void 0===n?"*":n,r.storedKeys,void 0===a?{}:a,!0),c=i._watchedKeys,s=i._ccClassKey,u=i._connect;function d(t){return function(e){return r.props=e,function(t,e){var r=e.mapProps,n=e.props,o=void 0===n?{}:n,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return r?(e.mapped=r(e),T.createElement(t,e.mapped)):T.createElement(t,e)},ccKey:o.ccKey,register:e};return T.createElement(ua,a)}(t,r)}}return r.module=i._module,r.watchedKeys=c,r.ccClassKey=s,r.connect=u,o?d(o):function(e){return d(e)}}var fa=Re.ccUkey_ref_,la=1,pa={};var ya=function(n,o){return function(e,t){n.state=Object.assign({},n.state,e);var r=Object.assign({},n);o(r),t&&t(r.state)}},va=function(r,n){return function(e){var t=Object.assign({},r);n(t),e&&e(t.state)}};function ma(e,t,r){this.setState=ya(e,t),this.forceUpdate=va(e,t),this.state=e.state,this.isFirstRendered=!0,this.props=r}function ha(e,l){var p=P(e),t=p.state,r=void 0===t?{}:t,n=p.props,y=void 0===n?{}:n,o=p.mapProps,a=p.layoutEffect,i=void 0!==a&&a,c=p.extra,s=void 0===c?{}:c,v=r;"function"==typeof r&&(v=r(),p.state=v);var u=T.useState;if(!u)throw Error("make sure your react version is LTE 16.8");function d(){var e=p.watchedKeys,t=p.storedKeys,r=p.connect,n=p.setup,o=p.lite;la+=1;var a=Rr(p.module,l,p.renderKeyClasses,N,void 0===e?"*":e,void 0===t?[]:t,void 0===r?{}:r,!0),i=a._module,c=a._watchedKeys,s=a._ccClassKey,u=a._connect;m=new ma(_,C,y);var d=Object.assign({},p,{module:i,watchedKeys:c,state:v,type:N,ccClassKey:s,connect:u,ccOption:y.ccOption});jn(m,d,o),Wn(m,n,K),pa[g]=m.ctx.ccUniqueKey;var f=m.ctx;f.useRef=function(e){var t=T.useRef(null);return f.refs[e]=t}}var m,f=la,h=u({cursor:f,state:r}),_=h[0],C=h[1],g=_.cursor,K=p.bindCtxToMethod;if(g===f)d();else if(!(m=fa[pa[g]])&&Date.now()-Re.info.latestStartupTime<1e3)d();else{var E=m.ctx;E.reactSetState=ya(_,C),E.reactForceUpdate=va(_,C)}var S=m.ctx;S.prevProps=S.props,S.props=y,S.extra=s,m.props=y;var w=i?T.useLayoutEffect:T.useEffect;if(w(function(){m.isFirstRendered||no(m)}),w(function(){if(!1===m.isFirstRendered){var e=m.ctx;Br(m,e.isSingle,e.ccClassKey,e.ccKey,e.ccUniqueKey)}else m.isFirstRendered=!1,ro(m);return function(){yo(m)}},[]),o){var b=o(S);if(!ce(b))throw Error("mapProps must return an plain json object");S.mapped=b}return S}function _a(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function Ca(e){return Re.store.getState(e)}var ga=Re.computed._computedValue;var Ka=Re.ccUkey_ref_,Ea=Re.ccClassKey_ccClassContext_;function Sa(){var r=[],n=Re.ccUkey_ref_;return j(n).forEach(function(e){var t=n[e];t&&!t.__$$isUnmounted&&r.push(t)}),r}function wa(e,t,r){var n=void 0===r?{}:r,o=n.state,a=n.reducer,i=n.computed,c=n.watch,s=n.init;if(!Re.isStartup)throw Error("cc is not startup yet");st(e),ut(t,!1);var u=function(e){return JSON.parse(JSON.stringify(e))}(Re.store.getState(t));o&&Object.assign(u,o);var d=ea(Re.reducer._reducer[t]||{},e);a&&Object.assign(d,ea(a,e));var f=Re.computed._computedRaw[t]||{};i&&Object.assign(f,i);var l=Re.watch._watchRaw[t]||{};c&&Object.assign(l,c);var p=Re.init._init[t];s&&(p=s);var y={state:u,reducer:d,computed:f,watch:l};p&&(y.init=p),Qo(e,y)}function ba(s,e){void 0===s&&(s={}),void 0===e&&(e={}),ra(s)||ta("store"),ra(e)||ta("option");var u={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};na(s).forEach(function(e){var t=s[e],r=t.state,n=t.reducer,o=t.watch,a=t.computed,i=t.init,c=t.isClassSingle;r&&(u.store[e]=r),n&&(u.reducer[e]=n),o&&(u.watch[e]=o),a&&(u.computed[e]=a),i&&(u.init[e]=i),u.moduleSingleClass[e]=!0===c}),oa(u.init)&&(u.init=null),Jo(u,e)}function Na(e,t){return aa({connect:e},t)}function Oa(e,t){return da({connect:e},t)}function Ia(e,o){var a=P(e);function t(r){var e=a.memo,t=void 0===e||e;function n(){return function(e){a.props=e;var t=ha(a,o);return T.createElement(r,a.mapProps?t.mapped:t)}}return delete a.memo,t&&T.memo?T.memo(n()):n()}"function"==typeof a.state&&(a.state=a.state());var r=a.render;return r?t(r):function(e){return t(e)}}function Ua(e,t,r,n,o){void 0===o&&(o=!1);try{Bt().ctx.setGlobalState(e,t,r,n)}catch(e){if(o)throw e;F(e.message)}}function Da(e,t,r,n,o,a){void 0===n&&(n=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&_a(),"string"!=typeof e&&_a(),Gt(e,t,r,n,o)}function Aa(e,t,r,n){Bt().ctx.set(e,t,r,n)}function xa(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var r=e.split("/"),n=Ca(r[0]);return wn(e,t,!1,n,!1).state}function Ta(e){return qa[e].connectedState||{}}function Ra(e){return e?ga[e]:ga}function ka(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,r=Bt(),n=arguments.length,o=Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=r.ctx).emit.apply(t,[e].concat(o))}catch(e){F(e)}}function Ma(e,t){try{Bt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;F(e.message)}}function $a(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(function(e){var r=[],t=Ea[e];return t&&t.ccKeys.forEach(function(e){var t=Ka[e];t&&r.push(t)}),r})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function Fa(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];Sa().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function ja(e,t,r){return{fn:e,depKeys:t,compare:r}}function La(e,t){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t}}function Pa(e,t,r,n){return{fn:e,depKeys:t,compare:r,immediate:n}}function Ha(e,t,r){return{fn:e,depKeys:t,compare:r,immediate:!0}}var qa=Re.ccClassKey_ccClassContext_,Va=Jo,Ba=aa,Ga=da,za=Qo,Wa=Ca,Ya=Re.store.getGlobalState,Xa=Uo,Ja=Re,Za=So,Qa=Sa,ei=Re.reducer._caller,ti=zo,ri=ua,ni=c,oi=Re.store.appendState,ai=ha,ii={cloneModule:wa,emit:ka,off:Ma,connect:Na,connectDumb:Oa,register:Ba,registerDumb:Ga,registerHookComp:Ia,configure:za,dispatch:Xa,startup:Va,run:ba,setGlobalState:Ua,setState:Da,set:Aa,setValue:xa,getGlobalState:Ya,getState:Wa,getComputed:Ra,getConnectedState:Ta,ccContext:Ja,createDispatcher:Za,execute:$a,executeAll:Fa,getRefs:Qa,reducer:ei,clearContextIfHot:ti,CcFragment:ri,cst:ni,appendState:oi,useConcent:ai,bindCcToMcc:ci,defComputed:ja,defComputedVal:La,defWatch:Pa,defWatchImmediate:Ha};function ci(e){if(!ui)throw Error("current env is not multi concent ins mode");if(ui[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){w=e}(e),K(e,ii,ui)}function si(){var e=w?window.mcc[w]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,r=Ja.info.version;if(t!==r)throw Error("a existed version concent "+t+" is different with current about to import concent "+r+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var ui=window.mcc;ui?setTimeout(function(){if(!W())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");si()},1e3):(si(),K("cc",ii)),e.startup=Va,e.cloneModule=wa,e.run=ba,e.connect=Na,e.connectDumb=Oa,e.register=Ba,e.registerDumb=Ga,e.registerHookComp=Ia,e.configure=za,e.setGlobalState=Ua,e.setState=Da,e.set=Aa,e.setValue=xa,e.getState=Wa,e.getGlobalState=Ya,e.getConnectedState=Ta,e.getComputed=Ra,e.emit=ka,e.off=Ma,e.dispatch=Xa,e.ccContext=Ja,e.createDispatcher=Za,e.execute=$a,e.executeAll=Fa,e.getRefs=Qa,e.reducer=ei,e.clearContextIfHot=ti,e.CcFragment=ri,e.cst=ni,e.appendState=oi,e.useConcent=ai,e.defComputed=ja,e.defComputedVal=La,e.defWatch=Pa,e.defWatchImmediate=Ha,e.bindCcToMcc=ci,e.default=ii,Object.defineProperty(e,"__esModule",{value:!0})});
