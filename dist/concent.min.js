!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,I,r){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,W={$$default:[]},ye="$$global",H="$$default",B="$$cc",G="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",x="$$CcFrag",_e="$$CcHook",m="$$Cc",Y="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",ve=Symbol("__for_sync_param_ccsync__"),O=10,U=11,D=13,M="dispatch",me="setState",he="setModuleState",Ce="forceUpdate",w="invoke",K="sync",k="module",Ke="ref",L="computed",F="watch",ge={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[ge.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[ge.CC_MODULE_NOT_FOUND]="module not found!",t[ge.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[ge.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[ge.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[ge.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[ge.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[ge.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[ge.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[ge.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:ye,MODULE_DEFAULT:H,MODULE_CC:B,MODULE_VOID:G,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_FRAGMENT:x,CC_HOOK:_e,CC_PREFIX:m,CC_DISPATCHER:Y,CC_DISPATCHER_BOX:c,CCSYNC_KEY:ve,SIG_FN_START:O,SIG_FN_END:U,SIG_FN_QUIT:12,SIG_FN_ERR:D,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:M,SET_STATE:me,SET_MODULE_STATE:he,FORCE_UPDATE:Ce,INVOKE:w,SYNC:K,CATE_MODULE:k,CATE_REF:Ke,FN_CU:L,FN_WATCH:F,ERR:ge,ERR_MESSAGE:i}),s=((n={})[ye]={},n[H]={},n[B]={},n),d=((o={})[ye]={},o[H]={},o[B]={},o),f={},l={},j={_computedValueOri:d,_computedValue:s,_computedRaw:l,_computedDep:f,getRootComputedValue:function(){return s},getRootComputedDep:function(){return f},getRootComputedRaw:function(){return l}},p={},y={},C={_watchRaw:y,_watchDep:p,getRootWatchDep:function(){return p},getRootWatchRaw:function(){return y}},_={isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1,computedRetKeyDep:!0,watchRetKeyDep:!0},v=Symbol("cuk"),h="1",Se="2",Ee="is not a plain json object!",g="should be an string array or *!",S=console.error;function E(e){return null!=e&&0<re(e).length}function $(e){return!E(e)}function $e(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function b(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function P(e,t,n,r,o,a,c){var i;return(i={})[v]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function N(e,t){return e+"$"+t}function R(e){return e?" --verbose-info: "+e:""}function T(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function z(e){return"%c"+e}var V=function(e){return"------------ CC "+e+" ------------"};function q(e){S(V("WARNING")),e instanceof Error?(S(e.message),S(e.stack)):S(e)}function X(e){console.log(V("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function J(e){if(S(V("WARNING")),S(e),_.isStrict)throw e}function Q(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function Z(e,t){return Q(e,t,[])}function ee(e,t,n){!function(e,t){e.includes(t)||e.push(t)}(Z(e,t),n)}function te(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function ne(t,n,r){if(void 0===n&&(n=[]),Array.isArray(t)){var o=[];n.forEach(function(e){t.includes(e)&&o.push(e)}),t.length=0,o.forEach(function(e){return t.push(e)})}else Object.keys(t).forEach(function(e){n.includes(e)||(r?t[e]=r:delete t[e])})}function re(e){return Object.keys(e)}function oe(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function ae(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function ce(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function we(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function ie(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:H},e)}var ue="";function se(){return ue}function de(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function fe(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function le(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function pe(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!$e(t))throw Error("state "+Ee);return t}function be(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function xe(e){return"-"===e?"*":e}var Oe={},Ue={};function De(t,n,r){try{t[n][r]=1}catch(e){var o={};o[r]=1,t[n]=o}}function Ne(e,t){return e+"/"+t}function Ie(e,t){De(Oe,e,t)}function Ae(e,t,n){!function(e,t){try{delete Oe[e][t]}catch(e){}}(Ne(e,t),n)}var Re={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Me(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var Te=function(e,t){return e.sort-t.sort};function We(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=re(d),_=re(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return Me(e,d,f[e])}).sort(Te),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(Te),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return re(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Re[t][n],S=i?Q(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return Me(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(Te)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function ke(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Le(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!$e(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=re(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?ke(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){ke(o,t,e)&&(c=!1)}),r&&(a=we(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Fe(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(e,t){return e[t]=e[t],!0}})}function je(e,t,n,r){var o=e.ctx;if(!0===o.__$$inBM||o.__$$renderStatus===h){var a=o.ccUniqueKey;if(r){var c=o.module;if(!W[c].includes(n))return;var i=Ne(c,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[i]=1);if("-"!==o.watchedKeys)return;var u=o.__$$curWaKeys,s=o.__$$compareWaKeys,d=o.__$$nextCompareWaKeys;Ie(i,a),s[n]=u[n]=1,d[n]||(d[n]=2,o.__$$nextCompareWaKeyCount++)}else{var f=Ne(t,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[f]=1);if("-"!==o.connect[t])return;var l=o.__$$curConnWaKeys,p=o.__$$compareConnWaKeys,y=o.__$$nextCompareConnWaKeys,_=o.__$$nextCompareConnWaKeyCount;Ie(f,a),p[t][n]=l[t][n]=1;var v=y[t];v[n]||(v[n]=2,_[t]++)}}}var Pe=j._computedValueOri,ze=j._computedValue,Ve=j._computedDep;function qe(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){je(t,n,e,o)})}function He(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var i=c?r.ctx.refComputedOri:Pe[o],u=c?r.ctx.refComputedValue:ze[o];return i?new Proxy(i,{get:function(e,t){if(i.hasOwnProperty(t))if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){qe(n[e],r,e,t,a)})}else qe(Ve[o],r,o,t,a);return u[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var Be={},Ge={};function Ye(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===Ke){var s=e.computedDep,d=n===L?s:e.watchDep;u=Q(s,r),i=Q(d,r)}else{var f=j._computedDep,l=n===L?f:C._watchDep;u=Q(f,r),i=Q(l,r)}var p=Q(i,"stateKey_retKeys_"),y=Q(i,"retKey_stateKeys_"),_=function(e){var n=Z(y,o);e.forEach(function(e){var t=Z(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=Q(u,"retKey_stateKeys_");_(t[e]||[])})}}for(var Xe,Je=function(e,$,w,b,p,t,x,y,O,U,D,N,I){void 0===e&&(e={});for(var A=e.ctx,R=A?A.ccUniqueKey:"",_=0,M=t,T=!0,v=!1,n=function(){var m=1===++_&&U,e=p(M,m),t=e.pickedFns,h=e.setted,C=e.changed;if(!t.length)return"break";var n=de(),K=n.commit,r=n.getFnCommittedState,o=de(),g=o.commit,S=o.getFnCommittedState,E=o.clear;if(t.forEach(function(e){var n=e.retKey,t=e.fn,r=e.depKeys,o=e.isLazy,a=function(e,t,n){return e==k?Q(Be,t):Q(Ge,n)}(N,$,R),c={retKey:n,callInfo:O,isFirstCall:U,commit:K,commitCu:g,setted:h,changed:C,cuVal:I,stateModule:$,refModule:w,oldState:b,committedState:M,refCtx:A},i=m&&"-"===r,u=[],s=[];if(i&&(c.cuVal=function(e,t,n,r){var o,a;return a=k===e?(o=Pe[t],ze[t]):(o=n.refComputedOri,n.refComputedValue),new Proxy(o,{get:function(e,t){return o.hasOwnProperty(t)?r.push(t):q("get cuVal invalid retKey["+t+"]"),a[t]},set:function(){return!0}})}(N,$,A,u)),"computed"===D)if(o&&(delete c.commit,delete c.commitCu),i){var d=Fe(x,s),f=t(d,d,c);I[n]=P(!1,f),Ye(A,N,L,$,n,s),Ye(A,N,L,$,n,u,!1),u.forEach(function(e){var t=Z(a,e);t.includes(n)||t.push(n)})}else if(o)I[n]=P(o,null,!0,t,x,b,c);else{var l=t(x,b,c);I[n]=P(!1,l)}else{var p=x,y=b;i&&(y=p=Fe(x,s)),!1===t(p,y,c)&&(T=!1),i&&(Ye(A,N,F,$,n,s),Ye(A,N,F,$,n,u,!1),N===Ke&&s.forEach(function(e){return A.__$$staticWaKeys[Ne($,e)]=1}));var _=S();if(_){var v;if("ref"===N)v=A.computedRetKeyFns;else v=(j._computedDep[$]||{}).retKey_fn_||{};re(_).forEach(function(e){v[e]?(I[e]=P(!1,_[e]),i&&(u.includes(e)||u.push(e))):q("fnCtx.commitCu commit an invalid retKey["+e+"] for "+N+"Computed")}),E()}i&&u.forEach(function(t){Ye(A,N,L,$,t,s),Ye(A,N,L,$,t,u,!1),(a[t]||[]).forEach(function(e){Ye(A,N,L,$,e,[t],!1)})})}}),M=r()){var a=function(e,t){void 0===t&&(t=!1),M=e,t&&0===re(e).length?M=null:(Object.assign(x,M),Object.assign(y,M),v=!0)},c=Le(M,"ref"===N?A.privStateKeys:W[$],!0,!0),i=c.partialState,u=c.ignoredStateKeys;if(i)if(D===F){var s=function(e,t,n){return(t===Ke?e.computedDep[e.module]||{}:j._computedDep[n]||{}).stateKey_retKeys_}(A,N,$);if(s){var d=[],f={};re(i).forEach(function(e){s[e]?d.push(e):f[e]=i[e]}),0<d.length&&q("these state keys["+d.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),a(f,!0)}else a(i)}else a(i);if(u.length){var l="they are not "+(N===Ke?"private":"module")+", fn is "+N+" "+D;q("these state keys["+u.join(",")+"] are invalid, "+l)}}10<_&&(q("fnCtx.commit may goes endless loop, please check your code"),M=null)};M;){if("break"===n())break}return{shouldCurrentRefUpdate:T,hasDelta:v}},Qe=j._computedValue,Ze=re,et={},tt=function(){return et[Y]},nt=function(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=ot(n),f=Qe[n],l=j.getRootComputedDep(),p=C.getRootWatchDep(),y=a||tt(),_=y.module,v=Object.assign({},d,e),m=Object.assign({},e),h=m;return Je(y,n,_,d,function(e,t){return We(t,k,"computed",l,n,d,e)},h,v,m,i,!1,"computed",k,f),Je(y,n,_,d,function(e,t){return We(t,k,"watch",p,n,d,e)},h,v,m,i,!1,"watch",k,f),s||rt(n,m),m},rt=function(t,e,n){void 0===n&&(n=!1);var r=e;if(n){var o=Le(e,W[t],!0);r=o.partialState}if(r){var a=ot(t),c=at(t);Ze(r).forEach(function(e){c[e]=a[e],ct(t,e),a[e]=r[e]})}return r},ot=function(e){return ut[e]},at=function(e){return st[e]},ct=function(e,t){dt[e][t]++},it=function(){var e;return(e={})[B]={},e[G]={},e[ye]={},e[H]={},e},ut=it(),st=it(),dt={},ft={getDispatcher:tt,isHotReloadMode:function(){return!!ft.isHot||window&&(window.webpackHotUpdate||fe())},runtimeVar:_,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:W,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=Z(W,e);re(t).forEach(function(e){n.includes(e)||n.push(e)}),ft.store.setState(e,t)},_state:ut,_prevState:st,_stateVer:dt,getState:function(e){return e?ot(e):ut},getPrevState:function(e){return e?at(e):st},getStateVer:function(e){return e?dt[e]:dt},setState:function(e,t,n){return nt(e,t,n)},setGlobalState:function(e){return nt(ye,e)},saveSharedState:rt,getGlobalState:function(){return ut[ye]}},reducer:{_reducer:(Xe={},Xe[ye]={},Xe[B]={},Xe),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:j,watch:C,refStore:{_state:{},setState:function(e,t){var n=ft.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:et,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:Oe,waKey_staticUKeyMap_:Ue,refs:et,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.3.18",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},lt=localStorage.length,pt=ft.refStore._state,yt=0;yt<lt;yt++){var _t=localStorage.key(yt);if(_t.startsWith("CCSS_"))try{pt[_t.substr(5)]=JSON.parse(localStorage.getItem(_t))}catch(e){console.error(e)}}var vt=[],mt=function(e){return e.toLowerCase()===B},ht=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},Ct=R,Kt=b;function gt(e){if(!ht(e))throw Error("module["+e+"] writing is invalid!");if(mt(e))throw Error("'$$cc' is a built-in module name for concent")}function St(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=ft.store._state;if(gt(e),e!==ye)if(t){if(E(o[e]))throw Kt(ge.CC_MODULE_NAME_DUPLICATE,Ct(r))}else if(!o[e])throw Kt(ge.CC_MODULE_NOT_FOUND,Ct(r))}function Et(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+g);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var $t={},wt=function(e,t,n){if(e.code!==ge.CC_MODULE_NAME_DUPLICATE||!ft.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=$t[o];if(a){if(r!==a)throw e}else $t[o]=r},bt={};function xt(e){bt[e]={}}function Ot(t,e,n){void 0===n&&(n=!0),xt(t);var r=t===G?{}:e;try{!function(e,t,n){if(St(e,n),!$e(t))throw Error("module["+e+"]'s state "+Ee)}(t,r,n)}catch(e){wt(e,t,"state")}var o=ft.store,a=o.getState(),c=o.getStateVer();o.getPrevState()[t]=Object.assign({},a[t]=r),c[t]=re(r).reduce(function(e,t){return e[t]=1,e},{});var i=Object.keys(r);if(ft.moduleName_stateKeys_[t]=i,t===ye){var u=ft.globalStateKeys;i.forEach(function(e){u.includes(e)||u.push(e)})}}function Ut(e,t){void 0===t&&(t=!1);var n=ft.ccUKey_ref_,r=ft.moduleName_ccClassKeys_,o=ft.ccClassKey_ccClassContext_,a=[];if(e){if(!ft.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===H&&(a=a.filter(function(e){return!e.startsWith(x)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[Y]}}else a=[Y];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var Dt=N,Nt=q,It=function(){return Promise.resolve()};function At(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=Dt(c,i),_=ft.refs[y];if(!_)return Nt("no ref found for ccUniqueKey:"+y+"!"),It();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?Ut(l):d?Ut(d):Ut()))return Nt("no ref found"),It();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=ft.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return Nt(e.message),It()}}function Rt(e,t,n,r,o){return At(e,t,n,r,o)}function Mt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!$e(e))throw Error(t+" "+Ee);St(a,!1,t+" is invalid");var n=ft.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=Q(o,a),d=Z(i,a);u.setState||(u.setState=function(e){return e}),re(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=Z(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Rt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var Tt=0,Wt=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function kt(e){return Tt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Wt[te()];return t}())+"_"+Tt}var Lt=ft.moduleName_stateKeys_,Ft=ft.runtimeVar;function jt(e,t,n,r,o,a,c){var i=t.refCtx,u=t.type;if(e!==Ke||i.__$$inBM){if(n){var s,d,f,l=typeof n;if("string"==l)s=$e(r)?((d={})[n]=r,d):((f={})[n]={fn:r,depKeys:o,compare:a,immediate:c},f);else if($e(n))s=n;else if("function"==l&&!$e(s=n(i)))throw Error("type of "+u+" callback result must be an object");s?function(U,D,N){var e=Ft.computedCompare,t=Ft.watchCompare,I=Ft.watchImmediate,A="computed"===D.type?e:t,R=D.module;re(N).forEach(function(c,e){var t=N[c],n=typeof t,r=t;if("function"==n&&(r={fn:t}),$e(r)){var o=r,a=o.fn,i=o.depKeys,u=void 0===i?"-":i,s=o.immediate,d=void 0===s?I:s,f=o.compare,l=void 0===f?A:f,p=o.lazy,y=r.sort||D.sort||e,_=kt("mark");if("*"===u||"-"===u){var v=qt(D,R,c),m=v.pureKey,h=v.module;Pt(U,D,_,m),Vt(U,D,h,m,a,u,d,l,p,y)}else{if(u&&!Array.isArray(u))throw Error("depKeys must an string array or *");if(u&&0!==u.length){var C=qt(D,R,c),K=C.pureKey,g=C.moduleOfKey,S=g;Pt(U,D,_,K);var E={};u.forEach(function(e){var t=qt(D,R,e,!1),n=t.isStateKey,r=t.pureKey,o=t.module;if(S&&o!==S)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=Z(E,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");zt(D,o,r),a.push(r)}),re(E).forEach(function(e){Vt(U,D,e,K,a,E[e],d,l,p,y)})}else{var $=qt(D,R,c),w=$.isStateKey,b=$.pureKey,x=$.module,O=[];!u&&w&&(O=[b]),Pt(U,D,_,b),Vt(U,D,x,b,a,O,d,l,p,y)}}}else q("retKey["+c+"] item type error")})}(e,t,s):q(e+" "+u+" param type error")}}else q(e+" "+u+" must be been called in setup block")}function Pt(e,t,n,r){if(e===Ke){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function zt(e,t,n){var r=e.refCtx;r&&(r.__$$staticWaKeys[Ne(t,n)]=1)}function Vt(e,t,n,r,o,a,c,i,u,s){var d=Q(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_={fn:o,immediate:c,compare:i,depKeys:a,sort:s};f[r]?e!==Ke&&(f[r]=_,p[r]=t.isLazyComputed||u):(f[r]=_,p[r]=t.isLazyComputed||u,d.fnCount++),e===Ke&&(t.retKeyFns[r]=f[r]);var v=t.refCtx;if(v&&("computed"===t.type?v.hasComputedFn=!0:v.hasWatchFn=!0),"-"!==a){var m="*"===a?["*"]:a;"*"===a&&(y[r]=Lt[n]),m.forEach(function(e){ee(l,e,r)})}}function qt(e,t,n,r){void 0===r&&(r=!0);var o,a=t,c=n,i="";if(n.includes("/")){var u=n.split("/"),s=u[0];s&&(a=i=s),c=u[1]}var d=Lt[a];if(a===e.module)o=e.stateKeys;else{if(!(o=d))throw b(ge.CC_MODULE_NOT_FOUND,R("module["+a+"]"));if(!e.connect[a])throw b(ge.CC_MODULE_NOT_CONNECTED,R("module["+a+"], retKey["+c+"]"))}var f=o.includes(c);return r&&f&&function(e,t,n,r){var o=Q(e.dep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),a=o.retKey_stateKeys_;(e.type===L&&Ft.computedRetKeyDep||Ft.watchRetKeyDep)&&(ee(o.stateKey_retKeys_,n,n),ee(a,n,n)),r&&zt(e,t,n)}(e,a,c,d.includes(c)),{isStateKey:f,pureKey:c,module:a,moduleOfKey:i}}function Ht(e,o){var t={};return re(e).forEach(function(r){o[r]=P(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[v]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):q("computed value can not been changed manually")}})}),t}var Bt=Q,Gt=$e;function Yt(n,e){if(e){var t="module["+n+"] computed";if(!Gt(e))throw Error(t+" "+Ee);St(n,!1,t+" is invalid");var r=ft.computed,o=ft.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];jt(k,{type:L,module:n,stateKeys:re(i),dep:c},e);var u=ft.getDispatcher(),s=Object.assign({},i),d=Bt(r._computedValueOri,n);a[n]=Ht(e,d);var f=a[n];Je(u,n,u&&u.ctx.module,i,function(e,t){return We(t,k,"computed",c,n,i,e)},i,i,s,le(n),!0,"computed",k,f)}}var Xt=$e,Jt=Q,Qt=re;function Zt(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!Xt(e))throw Error(r+" "+Ee);St(n,!1,r+" is invalid");var o=ft.watch.getRootWatchDep(),a=ft.watch.getRootWatchRaw(),c=ft.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,ft.store.getState)(n);jt(k,{module:n,stateKeys:Qt(u),dep:o},e);var s=ft.getDispatcher(),d=Object.assign({},u),f=Jt(c,n);Je(s,n,s&&s.ctx.module,u,function(e,t){return We(t,k,"watch",o,n,u,e)},u,u,d,le(n),!0,"watch",k,f)}}var en=[O,U,12,D,14,15],tn={};function nn(t,n){tn[t].forEach(function(e){e({sig:t,payload:n})})}function rn(e,t){function n(e,t){var n=tn[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}en.forEach(function(e){return tn[e]=[]});var on=function(e){if(!ft.errorHandler)throw e;ft.errorHandler(e)},an=0,cn={},un={},sn={},dn={};function fn(){return++an}function ln(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function pn(e,t,n){ln(e,t,n,cn)}function yn(e,t,n){return pn(e,t,n),function(e){var t=function(e){return cn[e]}(e),n=[];return re(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function _n(e){delete cn[e]}var vn={},mn=function(e,t,n){void 0===n&&(n=1e3);var r=vn[t];r&&clearTimeout(r),vn[t]=setTimeout(function(){delete vn[t],e()},n)};function hn(e,n,r,t,o,a,c){void 0===c&&(c=!1);var i=e.ctx;if(!i.hasWatchFn)return!0;var u=Object.assign({},t),s=i.watchDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed,p=Object.assign({},r,t),y=Je(e,n,d,r,function(e,t){return We(t,"ref","watch",s,n,r,e,f)},t,p,u,o,a,"watch",Ke,l),_=y.shouldCurrentRefUpdate;return c&&y.hasDelta&&Object.assign(t,u),_}function Cn(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=e.ctx,u=Object.assign({},t);if(!i.hasComputedFn)return u;var s=i.computedDep,d=i.module,f=i.refComputed,l=i.ccUniqueKey,p=Object.assign({},r,t);return Je(e,n,d,r,function(e,t){return We(t,Ke,"computed",s,n,r,e,l)},t,p,u,o,a,"computed",Ke,f),c&&Object.assign(t,u),u}var Kn=re,gn=ft.ccUKey_ref_,Sn=ft.waKey_uKeyMap_,En=ft.waKey_staticUKeyMap_;function $n(o,e,c,i){var t=Kn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return bt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,Sn[t],En[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=Kn(a),p=!1;l.forEach(function(e){var t=gn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){bt[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var wn=$e,bn=q,xn=E,On=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Un=re,Dn=1,Nn=2,In=Ce,An=me,Rn=he,Mn=w,Tn=K,Wn=15,kn=1,Ln=2,Fn=3,jn=ft.store,Pn=jn.setState,zn=jn.getPrevState,Vn=jn.saveSharedState,qn=ft.middlewares,Hn=ft.ccClassKey_ccClassContext_,Bn=ft.refStore,Gn=ft.moduleName_stateKeys_;function Yn(e,t,c){var n=void 0===t?{}:t,i=n.module,r=n.skipMiddleware,u=void 0!==r&&r,s=n.payload,o=n.reactCallback,d=n.type,a=n.calledBy,f=void 0===a?An:a,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(wn(e)){var h=c.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?Dn:Nn}(i,C),E={payload:s,renderKey:_,ccKey:g,module:i,fnName:p},$=function(e,t,n){var r=Le(t,Gn[e],!0).partialState;if(r)return Pn(e,r,n);return r}(i,e,{ref:c,callInfo:E,noSave:!0});Object.assign(e,$),Xn(c,E,_,f,e,S,o,function(n,r,o){var a={calledBy:f,type:d,payload:s,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:r,refModule:C,module:i,fnName:p,sharedState:$||{},modState:function(e,t){a.committedState[e]=t,a.sharedState[e]=t}};!function(e,n,r){var o=!1;if(!0!==e){var a=qn.length;if(0<a){o=!0;var c=0;!function e(){if(c===a)r(o);else{var t=qn[c];c++,"function"==typeof t?t(n,e):(bn("found one middleware is not a function"),e())}}()}else r()}else r(o)}(u,a,function(e){var t=$;e?t=Vn(i,a.sharedState,!0):$&&Vn(i,$),o&&o(),n===kn&&!t||nn(Wn,{committedState:r,sharedState:t,module:i,type:function(e,t){return[In,An,Rn,Mn,Tn].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,d),ccUniqueKey:K,renderKey:_}),t&&function(e,t,n,r,o,a,c){var i=function(){!function(o,e,a,t,c,n){if(!a)return;var i=ft.ccUKey_ref_,r=e.ctx,u=r.ccUniqueKey,s=t===Dn,d=$n(c,a,n,Hn[r.ccClassKey].renderKeyClasses),f=d.sharedStateKeys,l=d.result,p=l.connect;l.belong.forEach(function(e){var t=i[e];if(t){var n=t.ctx.ccUniqueKey;s&&n===u||Xn(t,o,null,"broadcastState",a,Dn)}});var y=zn(c);p.forEach(function(e){var t=i[e];if(t&&!0!==t.__$$isUnmounted){var n=t.ctx;Cn(t,c,y,a,o);var r=hn(t,c,y,a,o);n.__$$settedList.push({module:c,keys:f}),r&&n.__$$ccForceUpdate()}})}(e,t,n,r,o,a)};if(0<c){var u=On(t.ctx.ccUniqueKey,n);mn(i,u,c)}else i()}(E,c,t,S,i,_,m)})})}else bn("your committed state "+Ee)}function Xn(e,t,n,r,o,a,c,i){var u=e.state,s=e.ctx;if(!0===e.__$$isUnmounted||a!==Dn||r!==In&&!xn(o))return c&&c(u),i&&i(kn,o);var d=s.module,f=s.storedKeys,l=s.ccUniqueKey,p=Fn;if(n&&(p=Ln,s.renderKey!==n))return i&&i(kn,o);if(0<f.length){var y=Le(o,f),_=y.partialState;if(!y.isStateEmpty){if(!0===s.persistStoredKeys){var v=Le(u,f),m=Object.assign({},v.partialState,_);localStorage.setItem("CCSS_"+l,JSON.stringify(m))}Bn.setState(l,_)}}function h(){s.__$$settedList.push({module:d,keys:Un(C)}),s.__$$ccSetState(C,c,K)}var C=Cn(e,d,u,o,t),K=hn(e,d,u,C,t,!1,!0);i?i(p,C,h):h()}function Jn(e,t,n,r,o){void 0===r&&(r=-1);try{Ut(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){J(e)}}var Qn=q,Zn=$e,er=re,tr=ft.store,nr=tr.getState,rr=tr.setState,or=ft.reducer._reducer,ar=ft.computed._computedValue,cr=b,ir=R;function ur(e,t){void 0===t&&(t=!0);try{return St(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;fr(e)}(e,t),!1}}function sr(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function dr(e,t,n,r){var o;return!0===e?(function(e){sn[e]=!0}(o=fn()),r[o]=1):r[o=t||fn()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function fr(e,t){e&&(t?t(e):(Qn(e),ft.errorHandler&&ft.errorHandler(e)))}function lr(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:sr(e,t)});r(o,n,c)}).catch(on)}(mr,e,t,n)}function pr(e,t,n){return lr(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function yr(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function _r(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function vr(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(Zn(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=dr(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),pr(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),pr(l,v,t)}}function mr(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;ur(e,!1)?(e!==t&&n&&(Qn(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return fr(e,h);var o,t=nr(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=hr(y,!1,x,v,E,S,$,w,b),c=hr(y,!1,!0,v,E,S,$,w,b),i=hr(y,!0,x,v,E,S,$,w,b),u=vr(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=vr(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=vr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return dn[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:nr(),globalState:nr(ye),moduleState:t,moduleComputed:ar[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&nn(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){ln(e,t,n,dn)}($,v,e);var n=[];!1===x&&(nn(U,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===sn[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===un[e]}($)||(n=yn($,v,e),_n($)):pn($,v,e)),n.forEach(function(e){e.state&&Yn(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(_n($),function(e){delete dn[e]}($)),h&&h(null,e)}).catch(function(e){nn(D,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),fr(e,h)})})}function hr(b,x,O,U,D,N,I,A,R){return void 0===D&&(D=""),void 0===N&&(N=-1),void 0===R&&(R={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=O,c="",i=r||N;if(Zn(t)){c=D;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||D;function l(){return vr(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:R})(e,n,c,i)}var p,y,_=dr(o,I,A,R),v=_._chainId,m=_._oriChainId,h=typeof e,C=U;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(cr(ge.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==R[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(cr(ge.CC_DISPATCH_STRING_INVALID,ir(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?At("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=or[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));mr(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:M,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:sr(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:R})}).catch(on)}}function Cr(a){return function(t){try{Jn(a,t)}catch(e){var n=nr(a);if(!n)return Qn("invalid module "+a);var r=Le(t,er(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||rr(a,r.partialState),0<o.length&&Qn("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),X("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var Kr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===_e?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},gr=function(r){return function(e){var t=r.ctx;if(t.type===_e){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},Sr=$e,Er=pe;function $r(t,e){if(ft.isStartup){if(!Sr(e))throw Error("param config "+Ee);if(t===ye)throw Error("configuring global module is not allowed");var n=e.reducer,r=e.computed,o=e.watch,a=e.init,c=e.isClassSingle,i=Er(e.state);if(n&&!Sr(n))throw Error("config.reducer "+Ee);if(Ot(t,i,!0),Mt(t,n),r&&Yt(t,r),o&&Zt(t,o),ft.moduleSingleClass[t]=!0===c,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){Cr(t)(e)})}ft.moduleName_isConfigured_[t]=!0,nn(14,t)}else vt.push({module:t,config:e})}function wr(r,o){var a={};return re(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function br(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function xr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Or=re,Ur=$e,Dr=ft.store._state;var Nr=$,Ir=b,Ar=ft.featureStr_classKey_,Rr=ft.userClassKey_featureStr_,Mr=ft.ccClassKey_ccClassContext_,Tr=0;var Wr=ft.moduleName_stateKeys_,kr=ft.moduleName_ccClassKeys_,Lr=ft.moduleSingleClass,Fr=ft.ccClassKey_ccClassContext_,jr=ft.computed._computedValue,Pr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},zr=R;function Vr(e,t,n,r,o,a,c,i,u){void 0===e&&(e=H),void 0===a&&(a=[]),!0===i&&function(){if(!0!==ft.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;St(e,!1,"module["+e+"] is not configured in store"),Et(Wr[e],a);var d=c;Array.isArray(c)&&(d={},c.forEach(function(e){return d[e]="-"})),e===ye||d[ye]||(d[ye]="-");var f,l=function(e,t,n){if(t===Y)return[];if(!n)return[];if("*"===n)return Wr[e];var r=Pr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+g+" "+zr("ccClassKey:"+t));return n}(e,t,o),p=function(o,e,t,a){if(!Ur(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Ee);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=Or(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=Dr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),Or(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,l),y=p.connectedModuleKeyMapping,_=p.connectedModuleNames,v=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===H&&Nr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=Ar[i];return u||(Ar[i]=u=""+o+ ++Tr)}if(c.startsWith(m))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==Y.toLowerCase())throw Error(Y+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(Mr[c]){if(Rr[c]!==a)throw Ir(ge.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else Rr[c]=a;return c}(s,e,d,l,r,p.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");f=n}else f=[v];return function(e,t,n,r,o,a,c){var i=Fr[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Fr[e]=i);var u={},s={};if(a){var d=ft.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=jr[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(v,f,e,o,l,y,_),function(e,t){var n=Z(kr,e);if(!0===Lr[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,v),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:v}}var qr=ft.event_handlers_,Hr=ft.handlerKey_handler_,Br=ft.ccUKey_handlerKeys_,Gr=ft.ccUKey_ref_,Yr=function(e,t,n){return e+"$"+t+"$"+n},Xr=Z,Jr=q;function Qr(e,t,n,r,o){void 0===o&&(o=null);var a=qr[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function Zr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete Hr[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=qr[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete Br[n])}),qr[e]=r.filter(function(e){return null!==e}))})}function eo(e,t,n,r,o,a){var c=Xr(qr,r);if("function"!=typeof a)return Jr("event "+r+"'s handler is not a function!");var i=Yr(n,r,o),u=Xr(Br,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),Hr[i]=d}function to(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),Qr(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=Gr[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=Hr[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function no(e,t){Zr(Qr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function ro(e){var t=Br[e];if(t){var n=[];t.forEach(function(e){return n.push(Hr[e])}),Zr(n)}}function oo(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var ao=Object.freeze({bindEventHandlerToCcContext:eo,findEventHandlersToPerform:to,findEventHandlersToOff:no,offEventHandlersByCcUniqueKey:ro,getEventItem:oo});function co(n,e,r,o){return new Proxy(e,{get:function(e,t){return je(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var io=1;function uo(c,i){return void 0===i&&(i=!1),function(e,t,n,r,o){var a=o||io++;jt(Ke,{type:"computed",isLazyComputed:i,refCtx:c,sort:a,stateKeys:c.stateKeys,retKeyFns:c.computedRetKeyFns,module:c.module,connect:c.connect,dep:c.computedDep},e,t,n,r)}}var so=q,fo=N;function lo(e){return e?e.props||e:{}}var po=ft.store.getState;var yo=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[ve],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=po(m);u="bool"===p?!be(m!==r?C:o,_):function(e){var t=oe(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):q("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=oe(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var _o=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(q(t+" can not convert to int but you set ccint as true!！"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?q("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},vo=ft.store.getState;function mo(e,t,n){var r=t.ctx,o=r.module,a=yo(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];St(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&Yn(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?vo(_):t.state;Yn(_o(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=_o(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var ho=ft.reducer,Co=ho._module_fnNames_,Ko=ho._caller,go=ft.refStore,So=ft.ccClassKey_ccClassContext_,Eo=ft.moduleName_stateKeys_,$o=ft.store.getState,wo=ft.moduleName_ccClassKeys_,bo=re,xo=b,Oo=R,Uo=Z,Do=Q,No=q,Io=$,Ao=0;var Ro=function(){},Mo=function(e){return"type of defineEffect "+e+" param must be"},To=function(e){return"-"===e.watchedKeys?bo(e.__$$renderStatus===h?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Wo=function(t,e){function n(e){return bo(t.__$$renderStatus===h?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?Eo[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function ko(t,n,e){("*"===e?Eo[n]:e).forEach(function(e){return function(e,t,n){De(Oe,Ne(e,t),n)}(n,e,t)})}function Lo(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=u,E=c.ctx,$=Io(E),w=Eo[S],b=c.setState,x=c.forceUpdate;!$&&E.ccUniqueKey?(b=E.__boundSetState,x=E.__boundForceUpdate):s!==_e&&(b=c.setState.bind(c),x=c.forceUpdate.bind(c));var O={};O.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,O.tag=g.tag||C;var U=function(e,t,n,r){var o;if(e)n&&so("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=fo(t,n);else{var a=kt(r);o=fo(t,a)}return o}(r,o,i,O.tag);if(O.renderKey=g.renderKey||U,O.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(Et(t,o),o):[]}(d,w,g.storedKeys,l),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<O.storedKeys.length&&!i)throw xo(ge.CC_STORED_KEYS_NEED_CCKEY,Oo("ccClassKey["+o+"]"));var D=$o(u),N=go._state[U]||{},I=Object.assign({},d,N,D),A=bo(c.state=I),R=So[o].connectedState,M=bo(m),T={},W={};M.forEach(function(e){return W[e]=He(c,e,!1)});var k,L=He(c,u),F=He(c,ye),j=co(c,$o(ye),ye,!1),P=we(bo(d),w);k=S===ye?j:co(c,D,u,!0);var z=Uo(wo,u);z.includes(o)||z.push(o);function V(e,t){Yn(e,t,c)}function q(e,t,n,r,o,a){V(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function H(e,t,n,r,o){q(e,t,he,n,r,o)}function B(e,t,n,r,o){"string"==typeof e?H(e,t,n,r,o):q(S,e,me,t,n,r)}function G(e,t,n){q(S,c.state,Ce,e,t,n)}var Y=[],X=[],J={effectItems:Y,eid_effectReturnCb_:{},effectPropsItems:X,eid_effectPropsReturnCb_:{}},Q={},Z=lo(c.props),ee=((n={type:s,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:U,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:P,connect:m,connectedModules:M,__$$onEvents:[],__$$hasModuleState:0<w.length,__$$renderStatus:Se,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},__$$staticWaKeys:{},__$$staticWaKeyList:[],persistStoredKeys:O.persistStoredKeys,storedKeys:O.storedKeys,renderKey:O.renderKey,tag:O.tag,prevProps:Z,props:Z,mapped:{},prevState:I,state:I,moduleState:k,mstate:D,globalState:j,connectedState:T,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:L,globalComputed:F,connectedComputed:W,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=A,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.effectMeta=J,n.retKey_fnUid_={},n.reactSetState=Ro,n.__boundSetState=b,n.reactForceUpdate=Ro,n.__boundForceUpdate=x,n.setState=B,n.setModuleState=H,n.forceUpdate=G,n.changeState=V,n.refs=Q,n.useRef=function(t){return function(e){return Q[t]={current:e}}},n.__$$ccSetState=yr(c),n.__$$ccForceUpdate=_r(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=B,c.forceUpdate=G,ee.initState=function(e){return c.__$$isMounted?No("ctx.initState can only been called before first render period!"):$e(d)?(c.state=Object.assign({},d,e,N,k),void(ee.prevState=ee.state=c.state)):No("state "+Ee)};var te=hr(c,!1,!1,S);if(ee.dispatch=te,1<t&&(ee.lazyDispatch=hr(c,!0,!1,S),ee.silentDispatch=hr(c,!1,!0,S),ee.dispatchLazy=ee.lazyDispatch,ee.dispatchSilent=ee.silentDispatch,ee.invoke=vr(c),ee.lazyInvoke=vr(c,{isLazy:!0}),ee.silentInvoke=vr(c,{isLazy:!1,isSilent:!0}),ee.invokeLazy=ee.lazyInvoke,ee.invokeSilent=ee.silentInvoke,ee.setGlobalState=function(e,t,n,r){q(ye,e,me,t,n,r)}),2<t){var ne=function(e,t,n,r,o){var a;if("string"==typeof e)return mo.bind(null,((a={})[ve]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);mo({type:"val"},c,e)};ee.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"val")},ee.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"bool")},ee.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"int")},ee.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"as")},ee.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),mo(((o={})[ve]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},ee.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),mo(((r={})[ve]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(ee.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];to.apply(ao,[oo(e)].concat(n))},ee.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?U:a,i=oo(e);no(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},ee.on=function(e,t){var n=oo(e),r=n.identity;eo(S,o,U,n.name,void 0===r?null:r,t)}),4<t){ee.execute=function(e){return ee.execute=e},ee.watch=function(a){return function(e,t,n,r,o){jt(Ke,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,n,r,o)}}(ee),ee.computed=uo(ee),ee.lazyComputed=uo(ee,!0);var re=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(Mo("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(Mo("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;if(e.includes("/")){var n=(t=e).split("/");if(!ee.connect[n[0]])throw xo(ge.CC_MODULE_NOT_CONNECTED,Oo("depKey["+e+"]"))}else t=S+"/"+e;c.push(t),ee.__$$staticWaKeys[t]=1}));var i={fn:e,isProp:s,depKeys:o,moDepKeys:c,eId:Symbol("__autoGen_"+ ++Ao+"__"),compare:n,immediate:a};u.push(i)}};ee.effect=re(Y,!1),ee.effectProps=re(X,!0)}var oe=ee.moduleReducer,ae=ee.connectedReducer,ce=ee.__$$curConnWaKeys,ie=ee.__$$compareConnWaKeys,ue=ee.__$$compareConnWaKeyCount,se=ee.__$$nextCompareConnWaKeys,de=ee.__$$nextCompareConnWaKeyCount,fe=M.slice();fe.includes(u)?No("["+U+"]'s module["+u+"] is in belongTo and connect both, it will cause redundant render."):fe.push(u);var le=!1;if(fe.forEach(function(o){var e;e=o===u?oe:Do(ae,o);var t=m[o];if(t){var n=R[o];"-"===t?(le=!0,ce[o]={},ie[o]={},ue[o]=0,se[o]={},de[o]=0,n=o===ye?ee.globalState:co(c,n,o)):ko(U,o,t),T[o]=n}(Co[o]||[]).forEach(function(r){e[r]=function(e,t,n){return te(o+"/"+r,e,t,n)}})}),ee.reducer=Ko,"-"===_?le=!0:ko(U,u,_),ee.__$$autoWatch=le,ee.getWatchedKeys=function(){return To(c.ctx||ee)},ee.getConnectWatchedKeys=function(e){return Wo(c.ctx||ee,e)},$)c.ctx=ee;else{var pe=c.ctx;Object.assign(c.ctx,ee,{__$$curWaKeys:pe.__$$curWaKeys,__$$compareWaKeys:pe.__$$compareWaKeys,__$$compareWaKeyCount:pe.__$$compareWaKeyCount,__$$nextCompareWaKeys:pe.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:pe.__$$nextCompareWaKeyCount,__$$curConnWaKeys:pe.__$$curConnWaKeys,__$$compareConnWaKeys:pe.__$$compareConnWaKeys,__$$compareConnWaKeyCount:pe.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:pe.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:pe.__$$nextCompareConnWaKeyCount})}}var Fo=ft.store.getState;var jo=re,Po=ft.runtimeVar;function zo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$inBM=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!$e(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Po.bindCtxToMethod&&!1!==t)&&jo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.refComputedValue=Ht(r.computedRetKeyFns,r.refComputedOri),r.refComputed=He(n,null,!0,!0),function(o){function e(r){r(o,c,i,i,u,!0,!0),a.forEach(function(e){var t=Fo(e),n=le(e);r(o,e,t,t,n,!0,!0)})}var t=o.ctx,n=t.hasComputedFn,r=t.hasWatchFn,a=t.connectedModules,c=t.module,i=t.state,u=le(c);n&&e(Cn),r&&e(hn)}(n),r.__$$inBM=!1}var Vo=ft.moduleName_stateKeys_,qo=ft.store,Ho=qo.getPrevState,Bo=qo.getState,Go=qo.getStateVer,Yo=function(e,t){return q("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function Xo(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.moDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=Ho(p),v=Go(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){Yo(s,"module["+p+"]");continue}if(!Vo[p].includes(y)){Yo(s,"unmoduledKey["+y+"]");continue}d=Bo(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var Jo=q,Qo=b,Zo=R,ea=z,ta=T,na=ft.runtimeVar,ra=ft.ccClassKey_ccClassContext_,oa=ft.ccUKey_ref_,aa={};function ca(e,t,n,r){function o(){oa[e]=t,n.push(e)}!function(e){void 0===aa[e]?aa[e]=1:aa[e]+=1}(e),r?setTimeout(o,r):o()}function ia(e,t,n,r,o){var a=ra[n],c=a.ccKeys;na.isDebug&&console.log(ea("register ccKey "+o+" to CC_CONTEXT"),ta());var i=ft.isHotReloadMode();if(c.includes(o)){var u=function(){throw Qo(ge.CC_CLASS_INSTANCE_KEY_DUPLICATE,Zo("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===aa[e]?0:aa[e]}(o);if(t&&0<s)throw Qo(ge.CC_CLASS_INSTANCE_MORE_THAN_ONE,Zo("ccClass:"+n));1<s&&u(),Jo("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+Zo("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),ca(o,e,c,600)}else u()}else ca(o,e,c);return a}function ua(t,e,n,r){var o=!1,a=re(t);a.forEach(function(e){2===t[e]&&(o=!0,Ae(n,e,r))}),e<a.length&&(o=!0),o&&xt(n)}function sa(e){var t=e.ctx;if(t.__$$renderStatus=Se,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;ua(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&ua(a[e],c[e],e,o)})}}function da(e){sa(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.ccUniqueKey,r=t.__$$onEvents,o=t.__$$staticWaKeys;ia(e,t.isSingle,t.ccClassKey,t.ccKey,n);var a=re(o);(e.ctx.__$$staticWaKeyList=a).forEach(function(e){return function(e,t){De(Ue,e,t)}(e,n)}),0<r.length&&(r.forEach(function(e){return e.fn.apply(void 0,e.args)}),r.length=0),Xo(e,!0)}function fa(e){sa(e),Xo(e),e.ctx.prevState=e.state}var la=ft.ccUKey_ref_,pa=ft.ccUKey_handlerKeys_,ya=ft.runtimeVar,_a=ft.ccClassKey_ccClassContext_,va=ft.handlerKey_handler_;function ma(e,t){ya.isDebug&&console.log(z(t+" unset ref"),T("purple")),delete la[t];var n=_a[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===aa[e]?aa[e]=0:aa[e]-=1}(t);var o=pa[t];o&&o.forEach(function(e){delete va[e]})}var ha=re;function Ca(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),ha(n).forEach(e)}function Ka(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey,o=t.module,a=t.__$$staticWaKeyList;if(e.__$$isMounted){var c=t.effectMeta,i=c.eid_effectPropsReturnCb_;Ca(c.eid_effectReturnCb_,t),Ca(i,t),ro(n)}t.getWatchedKeys().forEach(function(e){return Ae(o,e,n)});var u=t.getConnectWatchedKeys();re(u).map(function(t){u[t].forEach(function(e){return Ae(t,e,n)})}),a.forEach(function(e){return function(e,t){try{delete Ue[e][t]}catch(e){}}(e,n)}),ma(r,n)}function ga(e){var t=e.ctx;if(t.__$$renderStatus=h,t.__$$autoWatch){t.__$$hasModuleState&&(Object.assign(e.state,t.mstate),e.state=co(e,e.state,t.module,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var Sa=function(e){return"CC("+e+")"},Ea=xe,$a=ce,wa=pe,ba=ft.runtimeVar,xa=T,Oa=z,Ua=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function Da(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?H:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var O=Vr(o,t,S,A,Ea(s),d,_,$,x),U=O._module,D=O._ccClassKey,N=O._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=wa(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(xr(n));var a=Object.assign({},e,{isSingle:g,module:U,tag:v,state:o,type:A,watchedKeys:s,ccClassKey:D,connect:N,storedKeys:d,persistStoredKeys:p});if(Lo(xr(n),a,m),n.ctx.reactSetState=Kr(xr(n)),n.ctx.reactForceUpdate=gr(xr(n)),l&&(n.$$setup||i))throw Ua("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(xr(n))),zo(xr(n),l||n.$$setup||i,!1))}catch(e){on(e)}return n}br(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&$a(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=yr(e,this),t.__$$ccForceUpdate=_r(e),e.state||(e.state={}),Object.assign(e.state,this.state),ga(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw Ua("ccUniqueKey "+t.ccUniqueKey);zo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),da(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),fa(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),Ka(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,ba.isDebug&&console.log(Oa("@@@ render "+Sa(D)),xa()),!1===C?(ga(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=D===Y?"CcDispatcher":Sa(D),t}}catch(e){on(e)}}function Na(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return br(t,e),t.prototype.render=function(){return this.props.children||I.createElement("span",{style:{display:"none"}})},t}(I.Component);if(ft.refs[Y]){if(!ft.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");X("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return Da({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},Y)(n)}var Ia=$e,Aa=re;function Ra(e,t){if(!Ia(e))throw Error(t+" "+Ee)}function Ma(e){if(!Ia(e))throw Error("StartupOption.moduleSingleClass "+Ee);!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(ft.moduleSingleClass,e)}function Ta(e){if(0<e.length){var o=ft.plugins;o.length=0,en.forEach(function(e){return tn[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(rn),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),ft.pluginNameMap=a}}var Wa=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(I.createElement(e),t)},ka=!1;function La(e,r){void 0===e&&(e=!1),Be={},Ge={},ne(ft.event_handlers_),ne(ft.ccUKey_handlerKeys_);var o=ft.ccClassKey_ccClassContext_,t=ft.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),ne(t.ccKeys,n)}),ne(ft.handlerKey_handler_),ne(t,[Y].concat(r)),e){var n=ft.computed,a=ft.watch,c=n._computedValue,i=a._watchDep;re(ft.store._state).forEach(function(e){e!==B&&(c[e]&&(ft.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Yt(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},Zt(e,a._watchRaw[e])))})}}function Fa(){var n=ft.ccUKey_ref_,r=[];return re(n).forEach(function(e){var t=n[e];t&&t.ctx.type===x&&!0!==t.props.__$$regDumb&&!0===t.__$$isMounted&&0==t.__$$isUnmounted&&r.push(e)}),r}function ja(){ne(ft.globalStateKeys);var e=re(ft.moduleName_isConfigured_).concat([H,B,ye,a]);ne(ft.reducer._reducer,e),ne(ft.store._state,e,{}),ne(ft.computed._computedDep,e),ne(ft.computed._computedValue,e),ne(ft.watch._watchDep,e),ne(ft.middlewares),ne(ft.waKey_uKeyMap_),Re={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Fa();return La(!1,t),t}function Pa(e){void 0===e&&(e=!1),ft.info.latestStartupTime=Date.now();var t=[];return ft.isStartup?ft.isHotReloadMode()?e?(console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),ka=!0,t=ja()):(ka?ka=!1:(function(){if(!ft.refs[Y]){var e=Na();Wa(e)}}(),t=Fa(),La(ft.reComputed,t)),t):(console.warn("clear failed because of not running under hot reload mode!"),t):(ka=!0,t)}var za=ie,Va=pe;function qa(e){var t=e.props,n=za(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=Va(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y;if(!0!==t.__$$regDumb){var b=Vr(r,C,o,x,xe(l),m,y,!0);E=l,$=b._ccClassKey,w=b._connect}Lo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S,type:x},c),e.ctx.reactSetState=Kr(e),e.ctx.reactForceUpdate=gr(e),e.__$$compareProps=u,zo(e,s,d)}var Ha=X,Ba=ae,Ga="";function Ya(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,O=void 0!==x&&x,U=_.computedCompare,D=void 0===U||U,N=_.watchCompare,I=void 0===N||N,A=_.watchImmediate,R=void 0!==A&&A,M=_.reComputed,T=void 0===M||M,W=_.computedRetKeyDep,k=void 0===W||W,L=_.watchRetKeyDep,F=void 0===L||L;try{throw Error()}catch(e){var j=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=ft.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return Pa(ft.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(Ga)if(Ga!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);fe()?(u=c(),Ga=a):(J(d),s=!1)}else u=c();else Ga=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),P=j.ccFragKeys;if(!j.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Ha("cc version "+ft.info.version),void 0!==b&&(ft.isHot=b),ft.reComputed=T,ft.errorHandler=w;var z=ft.runtimeVar;if(z.isStrict=g,z.isDebug=E,z.computedCompare=D,z.watchCompare=I,z.watchImmediate=R,z.bindCtxToMethod=O,z.computedRetKeyDep=k,z.watchRetKeyDep=F,!ft.refs[Y]){var V=Na();Wa(V)}Ma(y),function(e){Ra(e,"state"),delete e[G],delete e[B],void 0===e[ye]&&(e[ye]={}),void 0===e[H]&&(e[H]={});for(var t=Aa(e),n=t.length,r=0;r<n;r++){var o=t[r];Ot(o,e[o])}}(o),function(t){Ra(t,"reducer"),void 0===t[H]&&(t[H]={}),void 0===t[ye]&&(t[ye]={}),Aa(t).forEach(function(e){return Mt(e,t[e])})}(c),function(t){Ra(t,"computed"),Aa(t).forEach(function(e){return Yt(e,t[e])})}(d),function(t){Ra(t,"watch"),Object.keys(t).forEach(function(e){return Zt(e,t[e])})}(l),function(n){if(n){if(!Ia(n))throw Error("init "+Ee);Aa(n).forEach(function(t){St(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){Cr(t)(e)})}),ft.init._init=n}}(u),function(e){if(0<e.length){var t=ft.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C);var q=function(e){Ba("CC_CONTEXT",ft,e),Ba("ccc",ft,e),Ba("cccc",ft.computed._computedValue,e),Ba("sss",ft.store._state,e)};window.mcc?setTimeout(function(){q(window.mcc[se()])},1200):q(),ft.isStartup=!0,Ta(m),P.forEach(function(e){var t=ft.ccUKey_ref_[e];Ka(t),qa(t),da(t)})}catch(e){if(!w)throw e;w(e)}}}function Xa(e){throw Error("[[run]]: param error, "+e+" "+Ee)}var Ja=$e,Qa=re,Za=$,ec=pe;function tc(e,t){var n=ie(e);return delete n.__checkStartUp,delete n.__calledBy,Da(n,t)}var nc=ce,rc=I.createElement("span",{style:{display:"none"}}),oc=function(r){function e(e,t){var n;return qa(xr(n=r.call(this,e,t)||this)),n}br(e,r);var t=e.prototype;return t.componentDidMount=function(){da(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&nc(lo(e),lo(this.props));return this.state!==t||n},t.componentDidUpdate=function(){fa(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),Ka(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=lo(e);var t=e.render,n=t||e.children;if("function"==typeof n){ga(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||rc):n(a)||rc}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function ac(e,t){var n=ie(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=xe(c),l=Vr(o,t,r,x,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(oc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var cc=ft.ccUKey_ref_,ic=1;function uc(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function sc(e,t,n,r,o,a,c,i,u,s){var d=n||pe(r),f=o.bindCtxToMethod,l=o.watchedKeys,p=void 0===l?"-":l,y=o.storedKeys,_=void 0===y?[]:y,v=o.connect,m=void 0===v?{}:v,h=o.setup,C=o.lite;ic+=1;var K=Vr(o.module,s,o.renderKeyClasses,_e,xe(p),_,m,!0),g=K._module,S=K._ccClassKey,E=K._connect,$=e||new uc(a,c,i),w=Object.assign({},o,{module:g,watchedKeys:p,state:d,type:_e,ccClassKey:S,connect:E,ccOption:i.ccOption});$.props=i,Lo($,w,C),$.ctx.reactSetState=Kr($),$.ctx.reactForceUpdate=gr($);var b=$.ctx;return b.props=i,b.extra=u,zo($,h,f),t.current=$.ctx.ccUniqueKey,b.useRef=function(e){var t=I.useRef(null);return b.refs[e]=t},$}function dc(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}var fc="react version is LTE 16.8";function lc(e,t){var n=ie(e),r=n.state,o=void 0===r?{}:r,a=n.props,c=void 0===a?{}:a,i=n.mapProps,u=n.layoutEffect,s=void 0!==u&&u,d=n.extra,f=void 0===d?{}:d,l=I.useState;if(!l)throw Error(fc);function p(e){return sc(e,g,m,o,n,C,K,c,f,t)}var y,_=ic,v=l(_)[0]===_,m=v?pe(o):0,h=l(m),C=h[0],K=h[1],g=I.useRef(null);if(v)y=p();else if(y=cc[g.current]){var S=y.ctx;S.prevProps=S.props,y.props=S.props=c,S.extra=f}else y=p();var E=y.ctx,$=s?I.useLayoutEffect:I.useEffect;if($(function(){y.isFirstRendered||fa(y),dc(E,K)}),$(function(){return!1===y.isFirstRendered?p(y):y.isFirstRendered=!1,dc(E,K),da(y),function(){Ka(y)}},[]),i){var w=i(E);if(!$e(w))throw Error("mapProps ret "+Ee);E.mapped=w}return ga(y),E}function pc(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function yc(e){return ft.store.getState(e)}var _c=ft.computed._computedValue;var vc=ft.ccUKey_ref_,mc=ft.ccClassKey_ccClassContext_;function hc(){var n=[],r=ft.ccUKey_ref_;return re(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function Cc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!ft.isStartup)throw Error("cc is not startup yet");gt(e),St(t,!1);var s=ft.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,pe(o));var f=wr(ft.reducer._reducer[t]||{},e);a&&Object.assign(f,wr(a,e));var l=ft.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=ft.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=ft.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),$r(e,_)}function Kc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=ec(n),"function"==typeof n&&(ft.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),Ja(t)||Xa("store"),Ja(e)||Xa("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};Qa(t).forEach(function(e){return r(e,t[e])}),vt.forEach(function(e){var t=e.module,n=e.config;X("configure pending module["+t+"]"),r(t,n)}),vt.length=0,Za(s.init)&&(s.init=null),Ya(s,e)}function gc(e,t){return tc({connect:e},t)}function Sc(e,t){return ac({connect:e},t)}function Ec(e,o){var a=ie(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=lc(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function $c(e,t,n,r,o){void 0===o&&(o=!1);try{Ut().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;q(e.message)}}function wc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&pc(),"string"!=typeof e&&pc(),Jn(e,t,n,r,o)}function bc(e,t,n,r){Ut().ctx.set(e,t,n,r)}function xc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=yc(n[0]);return _o(e,t,!1,r,!1).state}function Oc(e){return Lc[e].connectedState||{}}function Uc(e){return e?_c[e]:_c}function Dc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=Ut(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){q(e)}}function Nc(e,t){try{Ut().ctx.off(e,t)}catch(e){if(t.throwError)throw e;q(e.message)}}function Ic(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=mc[e];return t&&t.ccKeys.forEach(function(e){var t=vc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Ac(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];hc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Rc(e,t,n,r){return{fn:e,depKeys:t,compare:n,sort:r||ti++}}function Mc(e,t,n,r){return{fn:e,depKeys:t,compare:n,lazy:!0,sort:r||ti++}}function Tc(e,t,n){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t,sort:n||ti++}}function Wc(e,t,n,r,o){return{fn:e,depKeys:t,compare:n,immediate:r,sort:o||ti++}}function kc(e,t,n,r){return{fn:e,depKeys:t,compare:n,immediate:!0,sort:r||ti++}}var Lc=ft.ccClassKey_ccClassContext_,Fc=tc,jc=ac,Pc=$r,zc=yc,Vc=ft.store.getGlobalState,qc=Rt,Hc=ft,Bc=Na,Gc=hc,Yc=ft.reducer._caller,Xc=Pa,Jc=oc,Qc=u,Zc=ft.store.appendState,ei=lc,ti=1e3,ni={cloneModule:Cc,emit:Dc,off:Nc,connect:gc,connectDumb:Sc,register:Fc,registerDumb:jc,registerHookComp:Ec,configure:Pc,dispatch:qc,run:Kc,setGlobalState:$c,setState:wc,set:bc,setValue:xc,getGlobalState:Vc,getState:zc,getComputed:Uc,getConnectedState:Oc,ccContext:Hc,createDispatcher:Bc,execute:Ic,executeAll:Ac,getRefs:Gc,reducer:Yc,clearContextIfHot:Xc,CcFragment:Jc,cst:Qc,appendState:Zc,useConcent:ei,bindCcToMcc:ri,defComputed:Rc,defLazyComputed:Mc,defComputedVal:Tc,defWatch:Wc,defWatchImmediate:kc};function ri(e){if(!ai)throw Error("current env is not multi concent ins mode");if(ai[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ue=e}(e),ae(e,ni,ai)}function oi(){var e=ue?window.mcc[ue]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=Hc.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var ai=window.mcc;ai?setTimeout(function(){if(!se())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");oi()},1e3):(oi(),ae("cc",ni)),e.cloneModule=Cc,e.run=Kc,e.connect=gc,e.connectDumb=Sc,e.register=Fc,e.registerDumb=jc,e.registerHookComp=Ec,e.configure=Pc,e.setGlobalState=$c,e.setState=wc,e.set=bc,e.setValue=xc,e.getState=zc,e.getGlobalState=Vc,e.getConnectedState=Oc,e.getComputed=Uc,e.emit=Dc,e.off=Nc,e.dispatch=qc,e.ccContext=Hc,e.createDispatcher=Bc,e.execute=Ic,e.executeAll=Ac,e.getRefs=Gc,e.reducer=Yc,e.clearContextIfHot=Xc,e.CcFragment=Jc,e.cst=Qc,e.appendState=Zc,e.useConcent=ei,e.defComputed=Rc,e.defLazyComputed=Mc,e.defComputedVal=Tc,e.defWatch=Wc,e.defWatchImmediate=kc,e.bindCcToMcc=ri,e.default=ni,Object.defineProperty(e,"__esModule",{value:!0})});
