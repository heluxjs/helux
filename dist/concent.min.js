!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,I,r){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,R={$$default:[]},ye="$$global",H="$$default",B="$$cc",G="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",_e="$$CcHook",U="$$CcFrag",f="$$CcOb",T="$$CcCust",h="$$Cc",Y="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",ve=Symbol("__for_sync_param_ccsync__"),O=10,N=11,D=13,i=15,M="dispatch",me="setState",he="setModuleState",Ce="forceUpdate",w="invoke",K="sync",W="module",Ke="ref",ge="computed",Se="watch",Ee={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},u=((t={})[Ee.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[Ee.CC_MODULE_NOT_FOUND]="module not found!",t[Ee.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[Ee.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[Ee.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[Ee.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[Ee.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[Ee.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[Ee.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[Ee.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),s=Object.freeze({MODULE_GLOBAL:ye,MODULE_DEFAULT:H,MODULE_CC:B,MODULE_VOID:G,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_HOOK:_e,CC_FRAGMENT:U,CC_OB:f,CC_CUSTOMIZE:T,CC_PREFIX:h,CC_DISPATCHER:Y,CC_DISPATCHER_BOX:c,CCSYNC_KEY:ve,SIG_FN_START:O,SIG_FN_END:N,SIG_FN_QUIT:12,SIG_FN_ERR:D,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:i,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,DISPATCH:M,SET_STATE:me,SET_MODULE_STATE:he,FORCE_UPDATE:Ce,INVOKE:w,SYNC:K,CATE_MODULE:W,CATE_REF:Ke,FN_CU:ge,FN_WATCH:Se,ERR:Ee,ERR_MESSAGE:u}),d=((n={})[ye]={},n[H]={},n[B]={},n),l=((o={})[ye]={},o[H]={},o[B]={},o),p={},y={},k={_computedValueOri:l,_computedValue:d,_computedRaw:y,_computedDep:p,getRootComputedValue:function(){return d},getRootComputedDep:function(){return p},getRootComputedRaw:function(){return y}},_={},v={},C={_watchRaw:v,_watchDep:_,getRootWatchDep:function(){return _},getRootWatchRaw:function(){return v}},m={isStrict:!1,isDebug:!1,objectValueCompare:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},g={},S={};function E(t,n,r){try{t[n][r]=1}catch(e){var o={};o[r]=1,t[n]=o}}function j(e,t){return e+"/"+t}function $(e,t){E(g,e,t)}function b(e,t,n){!function(e,t){try{delete g[e][t]}catch(e){}}(j(e,t),n)}var x=Symbol("cuk"),L="1",$e="2",P="function",we="is not a plain json object!",F="should be an string array or *!",V=console.error;function z(e){return null!=e&&0<xe(e).length}function q(e){return!z(e)}function be(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function X(e,t){var n="";n="string"==typeof e?e:u[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function J(e,t,n,r,o,a,c){var i;return(i={})[x]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function Z(e,t){return e+"$"+t}function Q(e){return e?" --verbose-info: "+e:""}function ee(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function te(e){return"%c"+e}var ne=function(e){return"------------ CC "+e+" ------------"};function re(e){V(ne("WARNING")),e instanceof Error?(V(e.message),V(e.stack)):V(e)}function oe(e){console.log(ne("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function ae(e){if(V(ne("WARNING")),V(e),m.isStrict)throw e}function ce(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function ie(e,t){return ce(e,t,[])}function ue(e,t){e.includes(t)||e.push(t)}function se(e,t,n){ue(ie(e,t),n)}function de(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}function fe(e,t,n){var r=e[t];r||(r=e[t]={}),de(r,n)}function le(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function pe(n,r,o,a){if(void 0===r&&(r=[]),void 0===a&&(a=!1),Array.isArray(n)){var t=[];r.forEach(function(e){n.includes(e)&&t.push(e)}),n.length=0,t.forEach(function(e){return n.push(e)})}else Object.keys(n).forEach(function(e){if(r.includes(e));else{var t=n[e];a&&t?xe(t).forEach(function(e){return delete t[e]}):o?n[e]=o:delete n[e]}})}function xe(e){return Object.keys(e)}function Ue(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function Oe(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function Ne(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function De(o,a,c){var i={},u=!1;if(a){var s=m.objectValueCompare;xe(a).forEach(function(e){var t=o[e],n=a[e],r=!0;"object"!=typeof n?r=t!==n:s&&(r=t!==n),r&&(c&&(c.prevStateContainer[e]=t,c.incStateVer(e),o[e]=n),i[e]=n,u=!0)})}return u?i:null}function Ie(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function Ae(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:H},e)}var Te="";function Me(){return Te}function Re(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function We(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function ke(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function je(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!be(t))throw Error("state "+we);return t}function Le(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function Pe(e){return"-"===e?"*":e}function Fe(e){return Array.isArray(e)||"-"===e||"*"===e}function Ve(e,t,n){void 0===n&&(n=!0);var r=t||{},o={fn:e},a=Fe(r)?{depKeys:r}:r;return n&&function(e){if(e&&!Fe(e))throw Error("depKeys must an array , '*' or '-'")}(a.depKeys),Object.assign(o,a)}var ze={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function qe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var He=function(e,t){return e.sort-t.sort};function Be(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=xe(d),_=xe(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return qe(e,d,f[e])}).sort(He),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(He),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return xe(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=ze[t][n],S=i?ce(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return qe(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(He)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Ge(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ye(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!be(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=xe(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Ge(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Ge(o,t,e)&&(c=!1)}),r&&(a=Ie(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Xe(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(){return!0}})}function Je(e,t,n,r){var o=e.ctx;if(!0===o.__$$inBM||o.__$$renderStatus===L){var a=o.ccUniqueKey;if(r){var c=o.module;if(!R[c].includes(n))return;var i=j(c,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[i]=1);if("-"!==o.watchedKeys)return;var u=o.__$$curWaKeys,s=o.__$$compareWaKeys,d=o.__$$nextCompareWaKeys;$(i,a),s[n]=u[n]=1,d[n]||(d[n]=2,o.__$$nextCompareWaKeyCount++)}else{var f=j(t,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[f]=1);if("-"!==o.connect[t])return;var l=o.__$$curConnWaKeys,p=o.__$$compareConnWaKeys,y=o.__$$nextCompareConnWaKeys,_=o.__$$nextCompareConnWaKeyCount;$(f,a),p[t][n]=l[t][n]=1;var v=y[t];v[n]||(v[n]=2,_[t]++)}}}var Ze=Object.prototype.hasOwnProperty,Qe=k._computedValueOri,et=k._computedValue,tt=k._computedDep;function nt(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Je(t,n,e,o)})}function rt(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var i=c?r.ctx.refComputedOri:Qe[o],u=c?r.ctx.refComputedValue:et[o];return i?new Proxy(i,{get:function(e,t){if(Ze.call(i,t))if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){nt(n[e],r,e,t,a)})}else nt(tt[o],r,o,t,a);return u[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var ot,at=function(e){return re(e+" call commit or commitCu as it is lazy")},ct={},it={};function ut(e,t,n){return e==W?ce(ct,t):ce(it,n)}function st(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===Ke){var s=e.computedDep,d=n===ge?s:e.watchDep;u=ce(s,r),i=ce(d,r)}else{var f=k._computedDep,l=n===ge?f:C._watchDep;u=ce(f,r),i=ce(l,r)}var p=ce(i,"stateKey_retKeys_"),y=ce(i,"retKey_stateKeys_"),_=function(e){var n=ie(y,o);e.forEach(function(e){var t=ie(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=ce(u,"retKey_stateKeys_");_(t[e]||[])})}}function dt(e,t,n){return t===Ke?e.computedRetKeyFns:(k._computedDep[n]||{}).retKey_fn_||{}}function ft(d,E,$,w,f,e,b,l,x,U,O,N,D){void 0===d&&(d={});for(var I=d.ctx,A=I?I.ccUniqueKey:"",p=0,T=e,M=!0,y=!1,t=function(){var v=1===++p&&U,e=f(T,v),t=e.pickedFns,m=e.setted,h=e.changed;if(!t.length)return"break";var n=Re(),C=n.commit,r=n.getFnCommittedState,o=Re(),K=o.commit,g=o.getFnCommittedState,S=o.clear;if(t.forEach(function(e){var n=e.retKey,t=e.fn,r=e.isLazy,o=N+" "+O+" retKey["+n+"] can't",a={retKey:n,callInfo:x,isFirstCall:U,commit:C,commitCu:K,setted:m,changed:h,cuVal:D,stateModule:E,refModule:$,oldState:w,committedState:T,refCtx:I},c=v&&"-"===e.depKeys,i=[],u=[];if(c&&(a.cuVal=function(n,r,o,e,t,a){var c,i;return i=W===r?(c=Qe[e],et[e]):(c=t.refComputedOri,t.refComputedValue),new Proxy(c,{get:function(e,t){return Ze.call(c,t)?a.push(t):re(r+" "+o+" retKey["+n+"] get cuVal invalid retKey["+t+"]"),i[t]},set:function(){return!0}})}(n,N,O,E,I,i)),O===ge)if(r&&(a.commit=function(){return at(o)},a.commitCu=a.commit),c){var s=Xe(b,u),d=t(s,s,a);D[n]=J(!1,d),st(I,N,ge,E,n,u),st(I,N,ge,E,n,i,!1),function(e,t,n,r,o,a){var c=ut(e,o,a),i=dt(n,o,a),u=ie(c,e);t.forEach(function(e){i[e].isStatic?u.push(e):ie(c,e).forEach(function(e){return ue(u,e)})})}(n,i,I,0,N,E)}else if(r)D[n]=J(r,null,!0,t,b,w,a);else{var f=t(b,w,a);D[n]=J(!1,f)}else{var l=b,p=w;c&&(p=l=Xe(b,u)),!1===t(l,p,a)&&(M=!1),c&&(st(I,N,Se,E,n,u),st(I,N,Se,E,n,i,!1))}c&&N===Ke&&u.forEach(function(e){return I.__$$staticWaKeys[j(E,e)]=1});var y=g();if(y){var _=dt(I,N,E);xe(y).forEach(function(e){var t=_[e];t?t.isStatic?function(e,t,n,r){return ie(ut(t,n,r),e)}(e,N,E,A).includes(e)?re("commitCu:"+o+" change ["+e+"], ["+n+"] referred ["+e+"]"):D[e]=J(!1,y[e]):re("commitCu:"+o+" change ["+e+"], it must have zero dep keys"):re("commitCu:"+o+" commit ["+e+"], it is not defined")}),S()}}),T=r()){var a=Ye(T,"ref"===N?I.privStateKeys:R[E],!0),c=a.partialState,i=a.ignoredStateKeys;if(i.length){var u="they are not "+(N===Ke?"private":"module")+", fn is "+N+" "+O;re("these state keys["+i.join(",")+"] are invalid, "+u)}if(c&&((T=c)&&(Object.assign(b,T),Object.assign(l,T),y=!0),O===Se)){var s=function(e,t){return t===Ke?e.computedDep:k._computedDep}(I,N);ft(d,E,$,w,function(e,t){return Be(t,N,ge,s,E,w,e,A)},c,b,l,x,!1,ge,N,D)}}2<p&&(re("fnCtx.commit may goes endless loop, please check your code"),T=null)};T;){if("break"===t())break}return{shouldCurrentRefUpdate:M,hasDelta:y}}for(var lt=k._computedValue,pt=xe,yt=De,_t={},vt=function(){return _t[Y]},mt=function(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=Ct(n),f=lt[n],l=k.getRootComputedDep(),p=C.getRootWatchDep(),y=a||vt(),_=y.module,v=Object.assign({},d,e),m=Object.assign({},e),h=m;return ft(y,n,_,d,function(e,t){return Be(t,W,"computed",l,n,d,e)},h,v,m,i,!1,"computed",W,f),ft(y,n,_,d,function(e,t){return Be(t,W,"watch",p,n,d,e)},h,v,m,i,!1,"watch",W,f),s||ht(n,m),m},ht=function(t,e,n){void 0===n&&(n=!1);var r=e;n&&(r=Ye(e,R[t],!0).partialState);var o=Ct(t),a=Kt(t);return yt(o,r,{prevStateContainer:a,incStateVer:function(e){return gt(t,e)}})},Ct=function(e){return Et[e]},Kt=function(e){return $t[e]},gt=function(e,t){wt[e][t]++},St=function(){var e;return(e={})[B]={},e[G]={},e[ye]={},e[H]={},e},Et=St(),$t=St(),wt={},bt={getDispatcher:vt,isHotReloadMode:function(){return!!bt.isHot||window&&(window.webpackHotUpdate||We())},runtimeVar:m,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:R,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=ie(R,e);pt(t).forEach(function(e){n.includes(e)||n.push(e)}),bt.store.setState(e,t)},_state:Et,_prevState:$t,_stateVer:wt,getState:function(e){return e?Ct(e):Et},getPrevState:function(e){return e?Kt(e):$t},getStateVer:function(e){return e?wt[e]:wt},setState:function(e,t,n){return mt(e,t,n)},setGlobalState:function(e){return mt(ye,e)},saveSharedState:ht,getGlobalState:function(){return Et[ye]}},reducer:{_reducer:(ot={},ot[ye]={},ot[B]={},ot),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:k,watch:C,refStore:{_state:{},setState:function(e,t){var n=bt.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:_t,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:g,waKey_staticUKeyMap_:S,refs:_t,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.4.11",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},xt=localStorage.length,Ut=bt.refStore._state,Ot=0;Ot<xt;Ot++){var Nt=localStorage.key(Ot);if(Nt.startsWith("CCSS_"))try{Ut[Nt.substr(5)]=JSON.parse(localStorage.getItem(Nt))}catch(e){console.error(e)}}var Dt=[],It=function(e){return e.toLowerCase()===B},At=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},Tt=Q,Mt=X;function Rt(e){if(!At(e))throw Error("module["+e+"] writing is invalid!");if(It(e))throw Error("'$$cc' is a built-in module name for concent")}function Wt(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=bt.store._state;if(Rt(e),e!==ye)if(t){if(z(o[e]))throw Mt(Ee.CC_MODULE_NAME_DUPLICATE,Tt(r))}else if(!o[e])throw Mt(Ee.CC_MODULE_NOT_FOUND,Tt(r))}function kt(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+F);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var jt={},Lt=function(e,t,n){if(e.code!==Ee.CC_MODULE_NAME_DUPLICATE||!bt.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=jt[o];if(a){if(r!==a)throw e}else jt[o]=r},Pt={};function Ft(e){Pt[e]={}}function Vt(t,e,n){void 0===n&&(n=!0),Ft(t);var r=t===G?{}:e;try{!function(e,t,n){if(Wt(e,n),!be(t))throw Error("module["+e+"]'s state "+we)}(t,r,n)}catch(e){Lt(e,t,"state")}var o=bt.store,a=o.getState(),c=o.getStateVer(),i=o.getPrevState();fe(a,t,r),fe(i,t,r),c[t]=xe(r).reduce(function(e,t){return e[t]=1,e},{});var u=bt.computed;ce(u._computedDep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),ce(u._computedValue,t),ce(u._computedValueOri,t);var s=Object.keys(r);if(bt.moduleName_stateKeys_[t]=s,t===ye){var d=bt.globalStateKeys;s.forEach(function(e){d.includes(e)||d.push(e)})}}function zt(e,t){void 0===t&&(t=!1);var n=bt.ccUKey_ref_,r=bt.moduleName_ccClassKeys_,o=bt.ccClassKey_ccClassContext_,a=[];if(e){if(!bt.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===H&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[Y]}}else a=[Y];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var qt=Z,Ht=re,Bt=function(){return Promise.resolve()};function Gt(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=qt(c,i),_=bt.refs[y];if(!_)return Ht("no ref found for ccUniqueKey:"+y+"!"),Bt();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?zt(l):d?zt(d):zt()))return Ht("no ref found"),Bt();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=bt.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return Ht(e.message),Bt()}}function Yt(e,t,n,r,o){return Gt(e,t,n,r,o)}function Xt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!be(e))throw Error(t+" "+we);Wt(a,!1,t+" is invalid");var n=bt.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=ce(o,a),d=ie(i,a);u.setState||(u.setState=function(e){return e}),xe(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=ie(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Yt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var Jt=0,Zt=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Qt(e){return Jt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Zt[le()];return t}())+"_"+Jt}var en=bt.moduleName_stateKeys_,tn=bt.runtimeVar,nn=1;function rn(e,t,n,r,o){var a=t.refCtx,c=t.type;if(e!==Ke||a.__$$inBM){if(n){var i,u,s,d=typeof n;if("string"==d)be(r)?((u={})[n]=r,i=u):typeof r===P&&((s={})[n]=Ve(r,o),i=s);else if(be(n))i=n;else if(d===P&&!be(i=n(a)))throw Error("type of "+c+" callback result must be an object");i?function(U,O,N){var e=tn.computedCompare,t=tn.watchCompare,D=tn.watchImmediate,I=O.type===ge?e:t,A=O.module;xe(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if(t===P&&(n={fn:e}),be(n)){var r=n,o=r.fn,a=r.immediate,i=void 0===a?D:a,u=r.compare,s=void 0===u?I:u,d=r.lazy,f=r.retKeyDep,l=void 0===f||f,p=n.depKeys||"-",y=n.sort||nn++,_=Qt("mark");if("*"===p||"-"===p){var v="-"===p&&l,m=un(O,A,c,v),h=m.pureKey,C=m.module;on(U,O,_,h),cn(U,O,C,h,o,p,i,s,d,y)}else if(0===p.length){var K=un(O,A,c),g=K.pureKey,S=K.module;on(U,O,_,g),cn(U,O,S,g,o,p,i,s,d,y)}else{var E=un(O,A,c),$=E.pureKey,w=E.moduleOfKey,b=w;on(U,O,_,$);var x={};p.forEach(function(e){var t=un(O,A,e),n=t.isStateKey,r=t.pureKey,o=t.module;if(b&&o!==b)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=ie(x,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");an(O,o,r),a.push(r)}),xe(x).forEach(function(e){cn(U,O,e,$,o,x[e],i,s,d,y)})}}else re("retKey["+c+"] item type error")})}(e,t,i):re(e+" "+c+" param type error")}}else re(e+" "+c+" must be been called in setup block")}function on(e,t,n,r){if(e===Ke){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function an(e,t,n){var r=e.refCtx;r&&(r.__$$staticWaKeys[j(t,n)]=1)}function cn(e,t,n,r,o,a,c,i,u,s){var d=ce(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_=Array.isArray(a)&&0===a.length,v=s;_?v<0||(v=-1):s<0&&(v=0);var m={fn:o,immediate:c,compare:i,depKeys:a,sort:v,isStatic:_};f[r]?e!==Ke&&(f[r]=m,p[r]=u):(f[r]=m,p[r]=u,d.fnCount++),e===Ke&&(t.retKeyFns[r]=f[r]);var h=t.refCtx;if(h&&("computed"===t.type?h.hasComputedFn=!0:h.hasWatchFn=!0),"-"!==a){var C="*"===a?["*"]:a;"*"===a&&(y[r]=en[n]),C.forEach(function(e){se(l,e,r)})}}function un(e,t,n,r){void 0===r&&(r=!1);var o,a=t,c=n,i="";if(n.includes("/")){var u=n.split("/"),s=u[0];s&&(a=i=s),c=u[1]}var d=en[a];if(a===e.module)o=e.stateKeys;else{if(!(o=d))throw X(Ee.CC_MODULE_NOT_FOUND,Q("module["+a+"]"));if(!e.connect[a])throw X(Ee.CC_MODULE_NOT_CONNECTED,Q("module["+a+"], retKey["+c+"]"))}var f=o.includes(c);return r&&f&&function(e,t,n,r){var o=ce(e.dep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),a=o.retKey_stateKeys_;se(o.stateKey_retKeys_,n,n),se(a,n,n),r&&an(e,t,n)}(e,a,c,d.includes(c)),{isStateKey:f,pureKey:c,module:a,moduleOfKey:i}}function sn(e,o){var t={};return xe(e).forEach(function(r){o[r]=J(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[x]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):re("computed value can not been changed manually")}})}),t}var dn=be;function fn(n,e){if(e){var t="module["+n+"] computed";if(!dn(e))throw Error(t+" "+we);Wt(n,!1,t+" is invalid");var r=bt.computed,o=bt.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];rn(W,{type:ge,module:n,stateKeys:xe(i),dep:c},e);var u=bt.getDispatcher(),s=Object.assign({},i);a[n]=sn(e,r._computedValueOri[n]);var d=a[n];ft(u,n,u&&u.ctx.module,i,function(e,t){return Be(t,W,"computed",c,n,i,e)},i,i,s,ke(n),!0,"computed",W,d)}}var ln=be,pn=ce,yn=xe;function _n(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!ln(e))throw Error(r+" "+we);Wt(n,!1,r+" is invalid");var o=bt.watch.getRootWatchDep(),a=bt.watch.getRootWatchRaw(),c=bt.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,bt.store.getState)(n);rn(W,{module:n,stateKeys:yn(u),dep:o},e);var s=bt.getDispatcher(),d=Object.assign({},u),f=pn(c,n);ft(s,n,s&&s.ctx.module,u,function(e,t){return Be(t,W,"watch",o,n,u,e)},u,u,d,ke(n),!0,"watch",W,f)}}var vn=[O,N,12,D,14,i],mn={},hn={};function Cn(n,e,t){function r(e,t){t?n[e].push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)}function Kn(t,n){mn[t].forEach(function(e){return e({sig:t,payload:n})}),function(e){var t=hn[e];return hn[e].length=0,t}(t).forEach(function(e){return e({sig:t,payload:n})})}function gn(e,t){Cn(mn,e,t)}vn.forEach(function(e){return mn[e]=[]}),vn.forEach(function(e){return hn[e]=[]});var Sn=function(e){if(!bt.errorHandler)throw e;bt.errorHandler(e)},En=0,$n={},wn={},bn={},xn={};function Un(){return++En}function On(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function Nn(e,t,n){On(e,t,n,$n)}function Dn(e,t,n){return Nn(e,t,n),function(e){var t=function(e){return $n[e]}(e),n=[];return xe(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function In(e){delete $n[e]}var An={},Tn=function(e,t,n){void 0===n&&(n=1e3);var r=An[t];r&&clearTimeout(r),An[t]=setTimeout(function(){delete An[t],e()},n)};function Mn(e,n,r,t,o,a){var c=e.ctx;if(!c.hasWatchFn)return{shouldCurrentRefUpdate:!0};var i=Object.assign({},t),u=c.watchDep,s=c.module,d=c.ccUniqueKey,f=c.refComputed;n!==s&&(f=c.connectedComputed[n]);var l=Object.assign({},r,t);return ft(e,n,s,r,function(e,t){return Be(t,Ke,Se,u,n,r,e,d)},t,l,i,o,a,Se,Ke,f)}function Rn(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=e.ctx,u=Object.assign({},t);if(!i.hasComputedFn)return u;var s=i.computedDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed;n!==d&&(l=i.connectedComputed[n]);var p=Object.assign({},r,t);return ft(e,n,d,r,function(e,t){return Be(t,Ke,"computed",s,n,r,e,f)},t,p,u,o,a,"computed",Ke,l),c&&Object.assign(t,u),u}var Wn=xe,kn=bt.ccUKey_ref_,jn=bt.waKey_uKeyMap_,Ln=bt.waKey_staticUKeyMap_;function Pn(o,e,c,i){var t=Wn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return Pt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,jn[t],Ln[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=Wn(a),p=!1;l.forEach(function(e){var t=kn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){Pt[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var Fn=be,Vn=re,zn=z,qn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Hn=xe,Bn=1,Gn=2,Yn=Ce,Xn=me,Jn=i,Zn=1,Qn=2,er=3,tr=bt.store,nr=tr.setState,rr=tr.getPrevState,or=tr.saveSharedState,ar=bt.middlewares,cr=bt.ccClassKey_ccClassContext_,ir=bt.refStore,ur=bt.moduleName_stateKeys_;function sr(e,t,a){var n=void 0===t?{}:t,c=n.module,r=n.skipMiddleware,i=void 0!==r&&r,u=n.payload,o=n.reactCallback,s=n.type,d=n.calledBy,f=void 0===d?Xn:d,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(Fn(e)){var h=a.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?Bn:Gn}(c,C),E={payload:u,renderKey:_,ccKey:g,module:c,fnName:p},$=function(e,t,n){var r=Ye(t,ur[e],!0).partialState;if(r)return nr(e,r,n);return r}(c,e,{ref:a,callInfo:E,noSave:!0});Object.assign(e,$),dr(a,E,_,f,e,S,o,!0,function(t,n,r){var o={calledBy:f,type:s,payload:u,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:n,refModule:C,module:c,fnName:p,sharedState:$||{},modState:function(e,t){o.committedState[e]=t,o.sharedState[e]=t}};!function(e,n,r){if(!0!==e){var o=ar.length;if(0<o){var a=0;!function e(){if(a===o)r();else{var t=ar[a];a++,"function"==typeof t?t(n,e):(Vn("found one middleware is not a function"),e())}}()}else r()}else r()}(i,o,function(){var e=or(c,o.sharedState,!0);r&&r(),t===Zn&&!e||Kn(Jn,{calledBy:f,type:s,committedState:n,sharedState:e,module:c,ccUniqueKey:K,renderKey:_}),e&&function(e,t,n,r,o,a,c){var i=function(){!function(c,e,i,t,u,n){if(!i)return;var s=bt.ccUKey_ref_,r=e.ctx,o=r.ccUniqueKey,a=t===Bn,d=Pn(u,i,n,cr[r.ccClassKey].renderKeyClasses),f=d.sharedStateKeys,l=d.result,p=l.connect;l.belong.forEach(function(e){var t=s[e];if(t){var n=t.ctx.ccUniqueKey;a&&n===o||dr(t,c,null,"broadcastState",i,Bn)}});var y=rr(u);p.forEach(function(e){var t=s[e];if(t&&!0!==t.__$$isUnmounted){var n=t.ctx,r=Rn(t,u,y,i,c),o=Mn(t,u,y,r,c),a=o.shouldCurrentRefUpdate;a&&(n.__$$settedList.push({module:u,keys:f}),n.__$$ccForceUpdate())}})}(e,t,n,r,o,a)};if(0<c){var u=qn(t.ctx.ccUniqueKey,n);Tn(i,u,c)}else i()}(E,a,e,S,c,_,m)})})}else Vn("your committed state "+we)}function dr(e,t,n,r,o,a,c,i,u){void 0===i&&(i=!1);var s=e.state,d=e.ctx;if(!0===e.__$$isUnmounted||a!==Bn||r!==Yn&&!zn(o))return c&&c(s),u&&u(Zn,o);var f=d.module,l=d.storedKeys,p=d.ccUniqueKey,y=er;if(n&&(y=Qn,d.renderKey!==n))return u&&u(Zn,o);if(0<l.length){var _=Ye(o,l),v=_.partialState;if(!_.isStateEmpty){if(!0===d.persistStoredKeys){var m=Ye(s,l),h=Object.assign({},m.partialState,v);localStorage.setItem("CCSS_"+p,JSON.stringify(h))}ir.setState(p,v)}}function C(){var e=i?De(d.state,K):K;e&&(d.__$$settedList.push({module:f,keys:Hn(e)}),d.__$$ccSetState(e,c,g))}var K=Rn(e,f,s,o,t),g=Mn(e,f,s,K,t,!1).shouldCurrentRefUpdate;u?u(y,K,C):C()}function fr(e,t,n,r,o){void 0===r&&(r=-1);try{zt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){ae(e)}}var lr=re,pr=be,yr=xe,_r=bt.store,vr=_r.getState,mr=_r.setState,hr=bt.reducer._reducer,Cr=bt.computed._computedValue,Kr=X,gr=Q;function Sr(e,t){void 0===t&&(t=!0);try{return Wt(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;wr(e)}(e,t),!1}}function Er(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function $r(e,t,n,r){var o;return!0===e?(function(e){bn[e]=!0}(o=Un()),r[o]=1):r[o=t||Un()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function wr(e,t){e&&(t?t(e):(lr(e),bt.errorHandler&&bt.errorHandler(e)))}function br(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Er(e,t)});r(o,n,c)}).catch(Sn)}(Dr,e,t,n)}function xr(e,t,n){return br(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function Ur(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function Or(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function Nr(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(pr(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=$r(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),xr(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),xr(l,v,t)}}function Dr(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;Sr(e,!1)?(e!==t&&n&&(lr(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return wr(e,h);var o,t=vr(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=Ir(y,!1,x,v,E,S,$,w,b),c=Ir(y,!1,!0,v,E,S,$,w,b),i=Ir(y,!0,x,v,E,S,$,w,b),u=Nr(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=Nr(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=Nr(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return xn[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:vr(),globalState:vr(ye),moduleState:t,moduleComputed:Cr[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&Kn(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){On(e,t,n,xn)}($,v,e);var n=[];!1===x&&(Kn(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===bn[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===wn[e]}($)||(n=Dn($,v,e),In($)):Nn($,v,e)),n.forEach(function(e){e.state&&sr(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(In($),function(e){delete xn[e]}($)),h&&h(null,e)}).catch(function(e){Kn(D,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),wr(e,h)})})}function Ir(b,x,U,O,N,D,I,A,T){return void 0===N&&(N=""),void 0===D&&(D=-1),void 0===T&&(T={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||D;if(pr(t)){c=N;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||N;function l(){return Nr(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:T})(e,n,c,i)}var p,y,_=$r(o,I,A,T),v=_._chainId,m=_._oriChainId,h=typeof e,C=O;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(Kr(Ee.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==T[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(Kr(Ee.CC_DISPATCH_STRING_INVALID,gr(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?Gt("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=hr[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));Dr(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:M,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Er(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:T})}).catch(Sn)}}function Ar(c,e){return function(t){function n(){return e&&e()}try{fr(c,t),function(e,t){Cn(hn,e,t)}(i,n)}catch(e){var r=vr(c);if(!r)return lr("invalid module "+c);var o=Ye(t,yr(r),!1,!0),a=o.ignoredStateKeys;o.isStateEmpty||mr(c,o.partialState),0<a.length&&lr("invalid keys:"+a.join(",")+", their value is undefined or they are not declared in module"+c),oe("no ccInstance found for module["+c+"] currently, cc will just store it, lately ccInstance will pick this state to render"),n()}}}var Tr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===_e?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},Mr=function(r){return function(e){var t=r.ctx;if(t.type===_e){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},Rr=be,Wr=je;function kr(t,n){if(bt.isStartup){if(!Rr(n))throw Error("param config "+we);if(t===ye)throw Error("configuring global module is not allowed");var e=n.state,r=n.reducer,o=n.computed,a=n.watch,c=n.init,i=n.isClassSingle,u=Wr(e);if("function"==typeof e&&(bt.moduleName_stateFn_[t]=e),r&&!Rr(r))throw Error("config.reducer "+we);if(Vt(t,u,!0),Xt(t,r),o&&fn(t,o),a&&_n(t,a),bt.moduleSingleClass[t]=!0===i,c){if("function"!=typeof c)throw Error("init value must be a function!");Promise.resolve().then(c).then(function(e){Ar(t)(e,n.initPost)})}bt.moduleName_isConfigured_[t]=!0,Kn(14,t)}else Dt.push({module:t,config:n})}function jr(r,o){var a={};return xe(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function Lr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Fr=xe,Vr=be,zr=bt.store._state,qr=Object.prototype.hasOwnProperty;var Hr=q,Br=X,Gr=bt.featureStr_classKey_,Yr=bt.userClassKey_featureStr_,Xr=bt.ccClassKey_ccClassContext_,Jr=0;var Zr=bt.moduleName_stateKeys_,Qr=bt.moduleName_ccClassKeys_,eo=bt.moduleSingleClass,to=bt.ccClassKey_ccClassContext_,no=bt.computed._computedValue,ro=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},oo=Q;function ao(e,t,n,r,o,a,c,i,u){void 0===e&&(e=H),void 0===a&&(a=[]),!0===i&&function(){if(!0!==bt.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;Wt(e,!1,"module["+e+"] is not configured in store"),kt(Zr[e],a);var d=c,f=Array.isArray(c);!f&&"string"!=typeof c||(d={},(f?c:c.split(",")).forEach(function(e){return d[e]="-"}));e===ye||d[ye]||(d[ye]="-");var l,p=function(e,t,n){if(t===Y)return[];if(!n)return[];if("*"===n)return Zr[e];var r=ro(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+F+" "+oo("ccClassKey:"+t));return n}(e,t,o),y=function(o,e,t,a){if(!Vr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+we);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=Fr(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=zr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),Fr(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!qr.call(n,e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,p),_=y.connectedModuleKeyMapping,v=y.connectedModuleNames,m=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===H&&Hr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=Gr[i];return u||(Gr[i]=u=""+o+ ++Jr)}if(c.startsWith(h))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==Y.toLowerCase())throw Error(Y+" is cc built-in ccClassKey name.");if(Xr[c]){if(Yr[c]!==a)throw Br(Ee.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else Yr[c]=a;return c}(s,e,d,p,r,y.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");l=n}else l=[m];return function(e,t,n,r,o,a,c){var i=to[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),to[e]=i);var u={},s={};if(a){var d=bt.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=no[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(m,l,e,o,p,_,v),function(e,t){var n=ie(Qr,e);if(!0===eo[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:p,_ccClassKey:m}}var co=bt.event_handlers_,io=bt.handlerKey_handler_,uo=bt.ccUKey_handlerKeys_,so=bt.ccUKey_ref_,fo=function(e,t,n){return e+"$"+t+"$"+n},lo=ie,po=re;function yo(e,t,n,r,o){void 0===o&&(o=null);var a=co[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function _o(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete io[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=co[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete uo[n])}),co[e]=r.filter(function(e){return null!==e}))})}function vo(e,t,n,r,o,a){var c=lo(co,r);if("function"!=typeof a)return po("event "+r+"'s handler is not a function!");var i=fo(n,r,o),u=lo(uo,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),io[i]=d}function mo(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),yo(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=so[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=io[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function ho(e,t){_o(yo(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Co(e){var t=uo[e];if(t){var n=[];t.forEach(function(e){return n.push(io[e])}),_o(n)}}function Ko(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var go=Object.freeze({bindEventHandlerToCcContext:vo,findEventHandlersToPerform:mo,findEventHandlersToOff:ho,offEventHandlersByCcUniqueKey:Co,getEventItem:Ko});function So(n,e,r,o){return new Proxy(e,{get:function(e,t){return Je(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var Eo=re,$o=Z;function wo(e){return e?e.props||e:{}}var bo=bt.store.getState;var xo=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[ve],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=bo(m);u="bool"===p?!Le(m!==r?C:o,_):function(e){var t=Ue(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):re("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=Ue(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var Uo=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(re(t+" can not convert to int but you set ccint as true!！"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?re("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},Oo=bt.store.getState;function No(e,t,n){var r=t.ctx,o=r.module,a=xo(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];Wt(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&sr(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?Oo(_):t.state;sr(Uo(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=Uo(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var Do=bt.reducer,Io=Do._module_fnNames_,Ao=Do._caller,To=bt.refStore,Mo=bt.ccClassKey_ccClassContext_,Ro=bt.moduleName_stateKeys_,Wo=bt.store.getState,ko=bt.moduleName_ccClassKeys_,jo=xe,Lo=X,Po=Q,Fo=ie,Vo=ce,zo=re,qo=q,Ho=0;var Bo=function(){},Go=function(e){return"type of defineEffect "+e+" param must be"},Yo=function(e){return"-"===e.watchedKeys?jo(e.__$$renderStatus===L?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Xo=function(t,e){function n(e){return jo(t.__$$renderStatus===L?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?Ro[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function Jo(t,n,e){("*"===e?Ro[n]:e).forEach(function(e){return function(e,t,n){E(g,j(e,t),n)}(n,e,t)})}function Zo(c,e,t){void 0===t&&(t=5);var n=e.isSingle,o=e.ccClassKey,r=e.ccKey,a=void 0===r?"":r,i=e.module,u=e.type,s=e.insType,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=i,E=c.ctx,$=qo(E),w=Ro[S],b=c.setState,x=c.forceUpdate;!$&&E.ccUniqueKey?(b=E.__boundSetState,x=E.__boundForceUpdate):u!==_e&&(b=c.setState.bind(c),x=c.forceUpdate.bind(c));var U={};U.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,U.tag=g.tag||C;var O=function(e,t,n,r){var o;if(e)n&&Eo("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=$o(t,n);else{var a=Qt(r);o=$o(t,a)}return o}(n,o,a,U.tag);if(U.renderKey=g.renderKey||O,U.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(kt(t,o),o):[]}(d,w,g.storedKeys,l),a&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+a+"]");if(0<U.storedKeys.length&&!a)throw Lo(Ee.CC_STORED_KEYS_NEED_CCKEY,Po("ccClassKey["+o+"]"));var N=Wo(i),D=To._state[O]||{},I=Object.assign({},d,D,N),A=jo(c.state=I),T=Mo[o].connectedState,M=jo(m),R={},W={};M.forEach(function(e){return W[e]=rt(c,e,!1)});var k,j=rt(c,i),L=rt(c,ye),P=So(c,Wo(ye),ye,!1),F=Ie(jo(d),w);k=S===ye?P:So(c,N,i,!0);var V=Fo(ko,i);V.includes(o)||V.push(o);function z(e,t){sr(e,t,c)}function q(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function H(e,t,n,r,o){q(e,t,he,n,r,o)}function B(e,t,n,r,o){"string"==typeof e?H(e,t,n,r,o):q(S,e,me,t,n,r)}function G(e,t,n){q(S,c.state,Ce,e,t,n)}var Y=[],X=[],J={effectItems:Y,eid_effectReturnCb_:{},effectPropsItems:X,eid_effectPropsReturnCb_:{}},Z={},Q=wo(c.props),ee={type:u,insType:s,isSingle:n,module:i,ccClassKey:o,ccKey:a,ccUniqueKey:O,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:F,connect:m,connectedModules:M,__$$onEvents:[],__$$hasModuleState:0<w.length,__$$renderStatus:$e,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},__$$staticWaKeys:{},__$$staticWaKeyList:[],persistStoredKeys:U.persistStoredKeys,storedKeys:U.storedKeys,renderKey:U.renderKey,tag:U.tag,prevProps:Q,props:Q,mapped:{},prevState:I,state:I,moduleState:k,mstate:N,globalState:P,connectedState:R,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:j,globalComputed:L,connectedComputed:W,moduleReducer:{},connectedReducer:{},reducer:{},stateKeys:A,computedDep:{},computedRetKeyFns:{},watchDep:{},watchRetKeyFns:{},execute:null,effectMeta:J,retKey_fnUid_:{},reactSetState:Bo,__boundSetState:b,reactForceUpdate:Bo,__boundForceUpdate:x,setState:B,setModuleState:H,forceUpdate:G,changeState:z,refs:Z,useRef:function(t){return function(e){return Z[t]={current:e}}},__$$ccSetState:Ur(c),__$$ccForceUpdate:Or(c),__$$settedList:[],__$$prevMoStateVer:{}};c.setState=B,c.forceUpdate=G,ee.initState=function(e){return c.__$$isMounted?zo("ctx.initState can only been called before first render period!"):be(d)?(c.state=Object.assign({},d,e,D,k),void(ee.prevState=ee.state=c.state)):zo("state "+we)};var te=Ir(c,!1,!1,S);if(ee.dispatch=te,1<t&&(ee.lazyDispatch=Ir(c,!0,!1,S),ee.silentDispatch=Ir(c,!1,!0,S),ee.dispatchLazy=ee.lazyDispatch,ee.dispatchSilent=ee.silentDispatch,ee.invoke=Nr(c),ee.lazyInvoke=Nr(c,{isLazy:!0}),ee.silentInvoke=Nr(c,{isLazy:!1,isSilent:!0}),ee.invokeLazy=ee.lazyInvoke,ee.invokeSilent=ee.silentInvoke,ee.setGlobalState=function(e,t,n,r){q(ye,e,me,t,n,r)}),2<t){var ne=function(e,t,n,r,o){var a;if("string"==typeof e)return No.bind(null,((a={})[ve]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);No({type:"val"},c,e)};ee.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"val")},ee.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"bool")},ee.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"int")},ee.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"as")},ee.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),No(((o={})[ve]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},ee.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),No(((r={})[ve]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(ee.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mo.apply(go,[Ko(e)].concat(n))},ee.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?O:a,i=Ko(e);ho(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},ee.on=function(e,t){var n=Ko(e),r=n.identity;vo(S,o,O,n.name,void 0===r?null:r,t)}),4<t){ee.execute=function(e){return ee.execute=e},ee.watch=function(r){return function(e,t,n){rn(Ke,{type:Se,refCtx:r,stateKeys:r.stateKeys,retKeyFns:r.watchRetKeyFns,module:r.module,connect:r.connect,dep:r.watchDep},e,t,n)}}(ee),ee.computed=function(r){return function(e,t,n){rn(Ke,{type:ge,refCtx:r,stateKeys:r.stateKeys,retKeyFns:r.computedRetKeyFns,module:r.module,connect:r.connect,dep:r.computedDep},e,t,n)}}(ee);var re=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(Go("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(Go("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;if(e.includes("/")){var n=(t=e).split("/");if(!ee.connect[n[0]])throw Lo(Ee.CC_MODULE_NOT_CONNECTED,Po("depKey["+e+"]"))}else t=S+"/"+e;c.push(t),ee.__$$staticWaKeys[t]=1}));var i={fn:e,isProp:s,depKeys:o,modDepKeys:c,eId:Symbol("__autoGen_"+ ++Ho+"__"),compare:n,immediate:a};u.push(i)}};ee.effect=re(Y,!1),ee.effectProps=re(X,!0)}var oe=ee.moduleReducer,ae=ee.connectedReducer,ce=ee.__$$curConnWaKeys,ie=ee.__$$compareConnWaKeys,ue=ee.__$$compareConnWaKeyCount,se=ee.__$$nextCompareConnWaKeys,de=ee.__$$nextCompareConnWaKeyCount,fe=M.slice();fe.includes(i)?zo("["+O+"]'s module["+i+"] is in belongTo and connect both, it will cause redundant render."):fe.push(i);var le=!1;if(fe.forEach(function(o){var e;e=o===i?oe:Vo(ae,o);var t=m[o];if(t){var n=T[o];"-"===t?(le=!0,ce[o]={},ie[o]={},ue[o]=0,se[o]={},de[o]=0,n=o===ye?ee.globalState:So(c,n,o)):Jo(O,o,t),R[o]=n}(Io[o]||[]).forEach(function(r){e[r]=function(e,t,n){return te(o+"/"+r,e,t,n)}})}),ee.reducer=Ao,ee.mr=ee.moduleReducer,ee.cr=ee.connectedReducer,ee.r=ee.reducer,"-"===_?le=!0:Jo(O,i,_),ee.__$$autoWatch=le,ee.getWatchedKeys=function(){return Yo(c.ctx||ee)},ee.getConnectWatchedKeys=function(e){return Xo(c.ctx||ee,e)},$)c.ctx=ee;else{var pe=c.ctx;Object.assign(c.ctx,ee,{__$$curWaKeys:pe.__$$curWaKeys,__$$compareWaKeys:pe.__$$compareWaKeys,__$$compareWaKeyCount:pe.__$$compareWaKeyCount,__$$nextCompareWaKeys:pe.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:pe.__$$nextCompareWaKeyCount,__$$curConnWaKeys:pe.__$$curConnWaKeys,__$$compareConnWaKeys:pe.__$$compareConnWaKeys,__$$compareConnWaKeyCount:pe.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:pe.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:pe.__$$nextCompareConnWaKeyCount})}}var Qo=bt.store.getState;var ea=xe,ta=bt.runtimeVar;function na(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$inBM=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!be(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===ta.bindCtxToMethod&&!1!==t)&&ea(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.refComputedValue=sn(r.computedRetKeyFns,r.refComputedOri),r.refComputed=rt(n,null,!0,!0),function(o){function e(r){r(o,c,i,i,u,!0,!0),a.forEach(function(e){var t=Qo(e),n=ke(e);r(o,e,t,t,n,!0,!0)})}var t=o.ctx,n=t.hasComputedFn,r=t.hasWatchFn,a=t.connectedModules,c=t.module,i=t.state,u=ke(c);n&&e(Rn),r&&e(Mn)}(n),r.__$$inBM=!1}var ra=bt.moduleName_stateKeys_,oa=bt.store,aa=oa.getPrevState,ca=oa.getState,ia=oa.getStateVer,ua=function(e,t){return re("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function sa(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.modDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=aa(p),v=ia(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){ua(s,"module["+p+"]");continue}if(!ra[p].includes(y)){ua(s,"unmoduledKey["+y+"]");continue}d=ca(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var da=re,fa=X,la=Q,pa=te,ya=ee,_a=bt.runtimeVar,va=bt.ccClassKey_ccClassContext_,ma=bt.ccUKey_ref_,ha={};function Ca(e,t,n,r){function o(){ma[e]=t,n.push(e)}!function(e){void 0===ha[e]?ha[e]=1:ha[e]+=1}(e),r?setTimeout(o,r):o()}function Ka(e,t,n,r,o){var a=va[n],c=a.ccKeys;_a.isDebug&&console.log(pa("register ccKey "+o+" to CC_CONTEXT"),ya());var i=bt.isHotReloadMode();if(c.includes(o)){var u=function(){throw fa(Ee.CC_CLASS_INSTANCE_KEY_DUPLICATE,la("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===ha[e]?0:ha[e]}(o);if(t&&0<s)throw fa(Ee.CC_CLASS_INSTANCE_MORE_THAN_ONE,la("ccClass:"+n));1<s&&u(),da("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+la("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),Ca(o,e,c,600)}else u()}else Ca(o,e,c);return a}function ga(t,e,n,r){var o=!1,a=xe(t);a.forEach(function(e){2===t[e]&&(o=!0,b(n,e,r))}),e<a.length&&(o=!0),o&&Ft(n)}function Sa(e){var t=e.ctx;if(t.__$$renderStatus=$e,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;ga(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&ga(a[e],c[e],e,o)})}}function Ea(e){Sa(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.ccUniqueKey,r=t.__$$onEvents,o=t.__$$staticWaKeys;Ka(e,t.isSingle,t.ccClassKey,t.ccKey,n);var a=xe(o);(e.ctx.__$$staticWaKeyList=a).forEach(function(e){return function(e,t){E(S,e,t)}(e,n)}),0<r.length&&(r.forEach(function(e){return e.fn.apply(void 0,e.args)}),r.length=0),sa(e,!0)}function $a(e){Sa(e),sa(e),e.ctx.prevState=e.state}var wa=bt.ccUKey_ref_,ba=bt.ccUKey_handlerKeys_,xa=bt.runtimeVar,Ua=bt.ccClassKey_ccClassContext_,Oa=bt.handlerKey_handler_;function Na(e,t){xa.isDebug&&console.log(te(t+" unset ref"),ee("purple")),delete wa[t];var n=Ua[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===ha[e]?ha[e]=0:ha[e]-=1}(t);var o=ba[t];o&&o.forEach(function(e){delete Oa[e]})}var Da=xe;function Ia(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),Da(n).forEach(e)}function Aa(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey,o=t.module,a=t.__$$staticWaKeyList;if(e.__$$isMounted){var c=t.effectMeta,i=c.eid_effectPropsReturnCb_;Ia(c.eid_effectReturnCb_,t),Ia(i,t),Co(n)}t.getWatchedKeys().forEach(function(e){return b(o,e,n)});var u=t.getConnectWatchedKeys();xe(u).map(function(t){u[t].forEach(function(e){return b(t,e,n)})}),a.forEach(function(e){return function(e,t){try{delete S[e][t]}catch(e){}}(e,n)}),Na(r,n)}function Ta(e){var t=e.ctx;if(t.__$$renderStatus=L,t.__$$autoWatch){t.__$$hasModuleState&&(Object.assign(e.state,t.mstate),e.state=So(e,e.state,t.module,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var Ma=function(e){return"CC("+e+")"},Ra=Pe,Wa=Ne,ka=je,ja=bt.runtimeVar,La=ee,Pa=te,Fa=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function Va(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?H:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=ao(o,t,S,A,Ra(s),d,_,$,x),O=U._module,N=U._ccClassKey,D=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=ka(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(Pr(n));var a=Object.assign({},e,{isSingle:g,module:O,tag:v,state:o,type:A,insType:T,watchedKeys:s,ccClassKey:N,connect:D,storedKeys:d,persistStoredKeys:p});if(Zo(Pr(n),a,m),n.ctx.reactSetState=Tr(Pr(n)),n.ctx.reactForceUpdate=Mr(Pr(n)),l&&(n.$$setup||i))throw Fa("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(Pr(n))),na(Pr(n),l||n.$$setup||i,!1))}catch(e){Sn(e)}return n}Lr(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&Wa(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Ur(e,this),t.__$$ccForceUpdate=Or(e),e.state||(e.state={}),Object.assign(e.state,this.state),Ta(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw Fa("ccUniqueKey "+t.ccUniqueKey);na(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),Ea(this)},t.componentDidUpdate=function(e,t,n){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this,e,t,n),$a(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),Aa(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,ja.isDebug&&console.log(Pa("@@@ render "+Ma(N)),La()),!1===C?(Ta(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=N===Y?"CcDispatcher":Ma(N),t}}catch(e){Sn(e)}}function za(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return Lr(t,e),t.prototype.render=function(){return this.props.children||I.createElement("span",{style:{display:"none"}})},t}(I.Component);if(bt.refs[Y]){if(!bt.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");oe("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return Va({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},Y)(n)}var qa=be,Ha=xe;function Ba(e,t){if(!qa(e))throw Error(t+" "+we)}function Ga(e){if(0<e.length){var o=bt.plugins;o.length=0,vn.forEach(function(e){return mn[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(gn),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),bt.pluginNameMap=a}}var Ya=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(I.createElement(e),t)},Xa=!1;function Ja(e,r){void 0===e&&(e=!1),ct={},it={},pe(bt.event_handlers_),pe(bt.ccUKey_handlerKeys_);var o=bt.ccClassKey_ccClassContext_,t=bt.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),pe(t.ccKeys,n)}),pe(bt.handlerKey_handler_),pe(t,[Y].concat(r)),e){var n=bt.computed,a=bt.watch,c=n._computedValue,i=a._watchDep;xe(bt.store._state).forEach(function(e){e!==B&&(c[e]&&(bt.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},fn(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},_n(e,a._watchRaw[e])))})}}function Za(){var r=bt.ccUKey_ref_,o=[],a=[];return xe(r).forEach(function(e){var t=r[e];if(t&&!0===t.__$$isMounted&&0==t.__$$isUnmounted){var n=t.ctx.insType;n===U?(o.push(e),a.push(e)):n===f&&a.push(e)}}),{ccFragKeys:o,ccNonCusKeys:a}}function Qa(){pe(bt.globalStateKeys);var e=xe(bt.moduleName_isConfigured_).concat([H,B,ye,a]);pe(bt.reducer._reducer,e),pe(bt.store._state,e,{},!0),pe(bt.computed._computedDep,e),pe(bt.computed._computedValue,e),pe(bt.watch._watchDep,e),pe(bt.middlewares),pe(bt.waKey_uKeyMap_),ze={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Za(),n=t.ccFragKeys;return Ja(!1,t.ccNonCusKeys),n}function ec(e){void 0===e&&(e=!1),bt.info.latestStartupTime=Date.now();var t=[];if(bt.isStartup){if(bt.isHotReloadMode()){if(e)return console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Xa=!0,t=Qa();if(Xa)return Xa=!1,t;!function(){if(!bt.refs[Y]){var e=za();Ya(e)}}();var n=Za();return Ja(bt.reComputed,n.ccNonCusKeys),n.ccFragKeys}return console.warn("clear failed because of not running under hot reload mode!"),t}return Xa=!0,t}var tc=Ae,nc=je;function rc(e){var t=e.props,n=tc(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=nc(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y,b=T;if(!0!==t.__$$regDumb){b=U;var x=ao(r,C,o,A,Pe(l),m,y,!0);E=l,$=x._ccClassKey,w=x._connect}Zo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,type:A,insType:b,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S},c),e.ctx.reactSetState=Tr(e),e.ctx.reactForceUpdate=Mr(e),e.__$$compareProps=u,na(e,s,d)}var oc=oe,ac=Oe,cc="";function ic(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.initPost,d=void 0===s?{}:s,f=n.computed,l=void 0===f?{}:f,p=n.watch,y=void 0===p?{}:p,_=n.moduleSingleClass,v=void 0===_?{}:_,m=void 0===t?{}:t,h=m.plugins,C=void 0===h?[]:h,K=m.middlewares,g=void 0===K?[]:K,S=m.isStrict,E=void 0!==S&&S,$=m.isDebug,w=void 0!==$&&$,b=m.errorHandler,x=void 0===b?null:b,U=m.isHot,O=m.bindCtxToMethod,N=void 0!==O&&O,D=m.objectValueCompare,I=void 0!==D&&D,A=m.computedCompare,T=void 0===A||A,M=m.watchCompare,R=void 0===M||M,W=m.watchImmediate,k=void 0!==W&&W,j=m.reComputed,L=void 0===j||j;try{throw Error()}catch(e){var P=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=bt.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return ec(bt.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(cc)if(cc!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);We()?(u=c(),cc=a):(ae(d),s=!1)}else u=c();else cc=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),F=P.ccFragKeys;if(!P.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),oc("cc version "+bt.info.version),void 0!==U&&(bt.isHot=U),bt.reComputed=L,bt.errorHandler=x;var V=bt.runtimeVar;if(V.isStrict=E,V.isDebug=w,V.objectValueCompare=I,V.computedCompare=T,V.watchCompare=R,V.watchImmediate=k,V.bindCtxToMethod=N,!bt.refs[Y]){var z=za();Ya(z)}!function(e){if(!qa(e))throw Error("StartupOption.moduleSingleClass "+we);de(bt.moduleSingleClass,e)}(v),function(e){Ba(e,"state"),delete e[G],delete e[B],void 0===e[ye]&&(e[ye]={}),void 0===e[H]&&(e[H]={});for(var t=Ha(e),n=t.length,r=0;r<n;r++){var o=t[r];Vt(o,e[o])}}(o),function(t){Ba(t,"reducer"),void 0===t[H]&&(t[H]={}),void 0===t[ye]&&(t[ye]={}),Ha(t).forEach(function(e){return Xt(e,t[e])})}(c),function(t){Ba(t,"computed"),Ha(t).forEach(function(e){return fn(e,t[e])})}(l),function(t){Ba(t,"watch"),Object.keys(t).forEach(function(e){return _n(e,t[e])})}(y),function(n,r){if(n){if(!qa(n))throw Error("init "+we);Ha(n).forEach(function(t){Wt(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){Ar(t)(e,r[t])})}),bt.init._init=n}}(u,d),function(e){if(0<e.length){var t=bt.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(g);var q=function(e){ac("CC_CONTEXT",bt,e),ac("ccc",bt,e),ac("cccc",bt.computed._computedValue,e),ac("sss",bt.store._state,e)};window.mcc?setTimeout(function(){q(window.mcc[Me()])},1200):q(),bt.isStartup=!0,Ga(C),F.forEach(function(e){var t=bt.ccUKey_ref_[e];Aa(t),rc(t),Ea(t)})}catch(e){if(!x)throw e;x(e)}}}function uc(e){throw Error("[[run]]: param error, "+e+" "+we)}var sc=be,dc=xe,fc=q,lc=je;function pc(e,t){var n=Ae(e);return delete n.__checkStartUp,delete n.__calledBy,Va(n,t)}var yc=Ne,_c=I.createElement("span",{style:{display:"none"}}),vc=function(r){function e(e,t){var n;return rc(Pr(n=r.call(this,e,t)||this)),n}Lr(e,r);var t=e.prototype;return t.componentDidMount=function(){Ea(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&yc(wo(e),wo(this.props));return this.state!==t||n},t.componentDidUpdate=function(){$a(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),Aa(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=wo(e);var t=e.render,n=t||e.children;if("function"==typeof n){Ta(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||_c):n(a)||_c}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function mc(e,t){var n=Ae(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=Pe(c),l=ao(o,t,r,U,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(vc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var hc=bt.ccUKey_ref_,Cc=1;function Kc(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function gc(e,t,n,r,o,a,c,i,u,s,d){var f=r||je(o),l=a.bindCtxToMethod,p=a.watchedKeys,y=void 0===p?"-":p,_=a.storedKeys,v=void 0===_?[]:_,m=a.connect,h=void 0===m?{}:m,C=a.setup,K=a.lite;Cc+=1;var g=ao(a.module,d,a.renderKeyClasses,_e,Pe(y),v,h,!0),S=g._module,E=g._ccClassKey,$=g._connect,w=e||new Kc(c,i,u),b=Object.assign({},a,{module:S,watchedKeys:y,state:f,type:_e,insType:t,ccClassKey:E,connect:$,ccOption:u.ccOption});w.props=u,Zo(w,b,K),w.ctx.reactSetState=Tr(w),w.ctx.reactForceUpdate=Mr(w);var x=w.ctx;return x.props=u,x.extra=s,na(w,C,l),n.prevCcUKey=n.ccUKey,n.ccUKey=w.ctx.ccUniqueKey,x.useRef=function(e){var t=I.useRef(null);return x.refs[e]=t},w}function Sc(e){return e?Array.isArray(e)?e.join(","):"object"==typeof e?JSON.stringify(e):e:""}var Ec="react version is LTE 16.8",$c=function(e,t){return e.module!==t.module||Sc(e.connect)!==Sc(t.connect)};function wc(e,t,n){var r=I.useRef({prevCcUKey:null,ccUKey:null,regOpt:e}).current,o=Ae(e),a=o.state,c=void 0===a?{}:a,i=o.props,u=void 0===i?{}:i,s=o.mapProps,d=o.layoutEffect,f=void 0!==d&&d,l=o.extra,p=void 0===l?{}:l,y=I.useState;if(!y)throw Error(Ec);function _(e){return gc(e,n,r,C,c,o,g,S,u,p,t)}var v,m=Cc,h=y(m)[0]===m,C=h?je(c):0,K=y(C),g=K[0],S=K[1];if(h||$c(r.regOpt,e))r.regOpt=e,v=_();else if(v=hc[r.ccUKey]){var E=v.ctx;E.prevProps=E.props,v.props=E.props=u,E.extra=p}else v=_();var $=v.ctx,w=f?I.useLayoutEffect:I.useEffect;if(w(function(){return function(){var e=hc[r.prevCcUKey||r.ccUKey];e&&(r.prevCcUKey=null,Aa(e))}},[v]),w(function(){!function(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}($,S),v.isFirstRendered?(v.isFirstRendered=!1,Ea(v)):$a(v)}),Ta(v),s){var b=s($);if(!be(b))throw Error("mapProps ret "+we);$.mapped=b}return $}function bc(e,t){return wc(e,t,T)}function xc(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function Uc(e){return bt.store.getState(e)}var Oc=bt.store.getGlobalState,Nc=bt.computed._computedValue;var Dc=bt.ccUKey_ref_,Ic=bt.ccClassKey_ccClassContext_;function Ac(){var n=[],r=bt.ccUKey_ref_;return xe(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function Tc(){return"Ob view"}function Mc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!bt.isStartup)throw Error("cc is not startup yet");Rt(e),Wt(t,!1);var s=bt.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,je(o));var f=jr(bt.reducer._reducer[t]||{},e);a&&Object.assign(f,jr(a,e));var l=bt.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=bt.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=bt.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),kr(e,_)}function Rc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.initPost,s=t.isClassSingle;if(d.store[e])throw Error("run api error: module"+e+" duplicate");d.store[e]=lc(n),"function"==typeof n&&(bt.moduleName_stateFn_[e]=n),d.reducer[e]=o,a&&(d.watch[e]=a),c&&(d.computed[e]=c),i&&(d.init[e]=i),u&&(d.initPost[e]=u),d.moduleSingleClass[e]=!0===s}void 0===t&&(t={}),void 0===e&&(e={}),sc(t)||uc("store"),sc(e)||uc("options");var d={store:{},reducer:{},watch:{},computed:{},init:{},initPost:{},moduleSingleClass:{}};dc(t).forEach(function(e){return r(e,t[e])}),Dt.forEach(function(e){var t=e.module,n=e.config;oe("configure pending module["+t+"]"),r(t,n)}),Dt.length=0,fc(d.init)&&(d.init=null),ic(d,e)}function Wc(e,t){return pc({connect:e},t)}function kc(e,t){return mc({connect:e},t)}function jc(e,o){var a=Ae(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=bc(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function Lc(e,t,n,r,o){void 0===o&&(o=!1);try{zt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;re(e.message)}}function Pc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&xc(),"string"!=typeof e&&xc(),fr(e,t,n,r,o)}function Fc(e,t,n,r){zt().ctx.set(e,t,n,r)}function Vc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=Uc(n[0]);return Uo(e,t,!1,r,!1).state}function zc(e){return ei[e].connectedState||{}}function qc(e){return e?Nc[e]:Nc}function Hc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=zt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){re(e)}}function Bc(e,t){try{zt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;re(e.message)}}function Gc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=Ic[e];return t&&t.ccKeys.forEach(function(e){var t=Dc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Yc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];Ac().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Xc(e,t){return Ve(e,t)}function Jc(e,t){var n=Ve(e,t);return n.lazy=!0,n}function Zc(e){return{fn:function(){return e},depKeys:[]}}function Qc(e,t){return Ve(e,t)}var ei=bt.ccClassKey_ccClassContext_,ti=bt.store.appendState,ni=bt.reducer._caller,ri=I.memo(function(e){var t=e.module,n=e.connect,r=e.classKey,o=e.render,a=e.children;if(t&&n)throw Error("module, connect can not been supplied both");if(!t&&!n)throw Error("module or connect should been supplied");var c=o||a||Tc,i=t?{module:t}:{connect:n};i.lite=1;var u,s,d=function(e,t){return wc(e,t,f)}(i,r);return s=t?(u=d.moduleState,d.moduleComputed):(u=d.connectedState,d.connectedComputed),c([u,s,{mr:d.mr,cr:d.cr,r:d.r}])}),oi=pc,ai=mc,ci=kr,ii=Uc,ui=Oc,si=Yt,di=bt,fi=za,li=Ac,pi=ni,yi=ec,_i=vc,vi=ri,mi=s,hi=ti,Ci=bc,Ki={cloneModule:Mc,emit:Hc,off:Bc,connect:Wc,connectDumb:kc,register:oi,registerDumb:ai,registerHookComp:jc,configure:ci,dispatch:si,run:Rc,setGlobalState:Lc,setState:Pc,set:Fc,setValue:Vc,getGlobalState:ui,getState:ii,getComputed:qc,getConnectedState:zc,ccContext:di,createDispatcher:fi,execute:Gc,executeAll:Yc,getRefs:li,reducer:pi,clearContextIfHot:yi,CcFragment:_i,Ob:vi,cst:mi,appendState:hi,useConcent:Ci,bindCcToMcc:gi,defComputed:Xc,defLazyComputed:Jc,defComputedVal:Zc,defWatch:Qc};function gi(e){if(!Ei)throw Error("current env is not multi concent ins mode");if(Ei[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){Te=e}(e),Oe(e,Ki,Ei)}function Si(){var e=Te?window.mcc[Te]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=di.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var Ei=window.mcc;Ei?setTimeout(function(){if(!Me())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");Si()},1e3):(Si(),Oe("cc",Ki)),e.cloneModule=Mc,e.run=Rc,e.connect=Wc,e.connectDumb=kc,e.register=oi,e.registerDumb=ai,e.registerHookComp=jc,e.configure=ci,e.setGlobalState=Lc,e.setState=Pc,e.set=Fc,e.setValue=Vc,e.getState=ii,e.getGlobalState=ui,e.getConnectedState=zc,e.getComputed=qc,e.emit=Hc,e.off=Bc,e.dispatch=si,e.ccContext=di,e.createDispatcher=fi,e.execute=Gc,e.executeAll=Yc,e.getRefs=li,e.reducer=pi,e.clearContextIfHot=yi,e.CcFragment=_i,e.Ob=vi,e.cst=mi,e.appendState=hi,e.useConcent=Ci,e.defComputed=Xc,e.defLazyComputed=Jc,e.defComputedVal=Zc,e.defWatch=Qc,e.bindCcToMcc=gi,e.default=Ki,Object.defineProperty(e,"__esModule",{value:!0})});
