!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,D,r){"use strict";D=D&&D.hasOwnProperty("default")?D.default:D,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,k={},pe="$$global",q="$$default",H="$$cc",V="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",x="$$CcFrag",ye="$$CcHook",m="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",ve=Symbol("__for_sync_param_ccsync__"),U=10,N=11,I=13,M="dispatch",_e="setState",me="setModuleState",he="forceUpdate",$="invoke",K="sync",h="module",Ce="ref",L="watch",l=1,p=2,i=3,Ke={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},u=((t={})[Ke.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[Ke.CC_MODULE_NOT_FOUND]="module not found!",t[Ke.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[Ke.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[Ke.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[Ke.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[Ke.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[Ke.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),s=Object.freeze({MODULE_GLOBAL:pe,MODULE_DEFAULT:q,MODULE_CC:H,MODULE_VOID:V,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_FRAGMENT:x,CC_HOOK:ye,CC_PREFIX:m,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:ve,SIG_FN_START:U,SIG_FN_END:N,SIG_FN_QUIT:12,SIG_FN_ERR:I,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:M,SET_STATE:_e,SET_MODULE_STATE:me,FORCE_UPDATE:he,INVOKE:$,SYNC:K,CATE_MODULE:h,CATE_REF:Ce,FN_CU:"computed",FN_WATCH:L,DID_MOUNT:l,DID_UPDATE:p,WILL_UNMOUNT:i,ERR:Ke,ERR_MESSAGE:u}),d=((n={})[pe]={},n[q]={},n[H]={},n),f=((o={})[pe]={},o[q]={},o[H]={},o),y={},v={},F={_computedValueOri:f,_computedValue:d,_computedRaw:v,_computedDep:y,getRootComputedValue:function(){return d},getRootComputedDep:function(){return y},getRootComputedRaw:function(){return v}},_={},C={},g={_watchRaw:C,_watchDep:_,getRootWatchDep:function(){return _},getRootWatchRaw:function(){return C}},S={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},E=Symbol("cuk"),w="1",ge="2",Se="is not a plain json object!",b="should be an string array or *!",O=console.error;function T(e){return null!=e&&0<oe(e).length}function R(e){return!T(e)}function Ee(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function j(e,t){var n="";n="string"==typeof e?e:u[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function P(e,t,n,r,o,a,c){var i;return(i={})[E]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function W(e,t){return e+"$"+t}function z(e){return e?" --verbose-info: "+e:""}function G(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function Y(e){return"%c"+e}var X=function(e){return"------------ CC "+e+" ------------"};function J(e){O(X("WARNING")),e instanceof Error?(O(e.message),O(e.stack)):O(e)}function Q(e){console.log(X("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function Z(e){if(O(X("WARNING")),O(e),S.isStrict)throw e}function ee(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function te(e,t){var n=e[t];return n||(n=e[t]=[]),n}function ne(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function re(t,n,r){if(void 0===n&&(n=[]),Array.isArray(t)){var o=[];n.forEach(function(e){t.includes(e)&&o.push(e)}),t.length=0,o.forEach(function(e){return t.push(e)})}else Object.keys(t).forEach(function(e){n.includes(e)||(r?t[e]=r:delete t[e])})}function oe(e){return Object.keys(e)}function ae(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function ce(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function ie(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function we(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function ue(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:q},e)}var se="";function de(){return se}function fe(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function le(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function $e(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function be(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!Ee(t))throw Error("state "+Se);return t}function xe(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function Ue(e){return"-"===e?"*":e}var Ne={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Ie(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n}}function Oe(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=oe(d),v=oe(c),_=v;return"computed"===n?{pickedFns:y.map(function(e){return Ie(e,d,f[e])}),setted:v,changed:_}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys})}),{pickedFns:s,setted:v,changed:_})}var m=function(n,r){var o=[],a=[];return oe(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Ne[t][n],S=i?ee(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return Ie(e,d,f[e])}),setted:h,changed:C}:(function(u,o,s,d,a,f,l){if(0===o.length)return;var e=a["*"];if(e){var c=0<s.length;e.forEach(function(e){var t=d[e],n=t.fn,r=t.compare,o=t.depKeys,a={retKey:e,fn:n,depKeys:o,isLazy:f[e]};r?c&&u.push(a):u.push(a)})}u.length<l&&function(){var i={},e=o.length,t=function(e){var c=o[e],t=a[c];return t?(t.forEach(function(e){if(!i[e]){var t=d[e],n=t.fn,r=t.compare,o=t.depKeys,a=!0;r&&!s.includes(c)&&(a=!1),a&&(i[e]=!0,u.push({retKey:e,fn:n,depKeys:o,isLazy:f[e]}))}}),u.length===l?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}()}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function De(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ae(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!Ee(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=oe(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?De(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){De(o,t,e)&&(c=!1)}),r&&(a=we(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Te(e,t,n,r){if(S.alwaysGiveState)return[n,r];var o=t[0];return 1===t.length&&"*"!==o&&o===e?[n[o],r[o]]:[n,r]}function Me(e,t,n,r,o,a){var c=Te(e,t,r,o);return n(c[0],c[1],a)}for(var Re,ke=function(g,S,E,w,$,e,b,x,U,N,I,O,D){for(var A=0,T=e,M=!0,R=!1,t=function(){var e=$(T,1===++A&&N),t=e.pickedFns,u=e.setted,s=e.changed;if(!t.length)return"break";var n=fe(),d=n.commit,r=n.getFnCommittedState,o=fe(),f=o.commit,a=o.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,n=e.fn,r=e.depKeys,o=e.isLazy,a={retKey:t,callInfo:U,isFirstCall:N,commit:d,commitCu:f,setted:u,changed:s,stateModule:S,refModule:E,oldState:w,committedState:T,refCtx:g};if("computed"===I)if(o){delete a.commit,delete a.commitCu;var c=Te(t,r,b,w);D[t]=P(o,null,!0,n,c[0],c[1],a)}else{var i=Me(t,r,n,b,w,a);D[t]=P(!1,i)}else!1===Me(t,r,n,b,w,a)&&(M=!1)}),T=r()){var c=function(e,t){void 0===t&&(t=!1),T=e,t&&0===oe(e).length?T=null:(Object.assign(b,T),Object.assign(x,T),R=!0)},i=Ae(T,"ref"===O?g.privStateKeys:k[S],!0,!0),l=i.partialState,p=i.ignoredStateKeys;if(l)if(I===L){var y=(O===Ce?g.computedDep[g.module]||{}:F._computedDep[S]||{}).stateKey_retKeys_;if(y){var v=[],_={};oe(l).forEach(function(e){y[e]?v.push(e):_[e]=l[e]}),0<v.length&&J("these state keys["+v.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),c(_,!0)}else c(l)}else c(l);if(p.length){var m="they are not "+(O===Ce?"private":"module")+", fn is "+O+" "+I;J("these state keys["+p.join(",")+"] are invalid, "+m)}}var h=a();if(h){var C;if("ref"===O)C="computed"===I?g.computedRetKeyFns:g.watchRetKeyFns;else{var K=F.getRootComputedDep()[S]||{};C=K.retKey_fn_||null}C&&oe(h).forEach(function(e){C[e]?D[e]=P(!1,h[e]):J("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}if(10<A)throw Error("fnCtx.commit may goes endless loop, please check your code")};T;){if("break"===t())break}return{shouldCurrentRefUpdate:M,hasDelta:R}},Le=F._computedValue,Fe=oe,je={},Pe=function(n,e,t){var r=void 0===t?{}:t,o=r.refCtx,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=We(n),s=ze(n),d=Le[n],f=F.getRootComputedDep(),l=g.getRootWatchDep(),p=a?a.module:null,y=Object.assign({},u,e),v=Object.assign({},e),_=v;return ke(a,n,p,u,function(e,t){return Oe(t,h,"computed",f,n,u,e)},_,y,v,i,!1,"computed",h,d),ke(a,n,p,u,function(e,t){return Oe(t,h,"watch",l,n,u,e)},_,y,v,i,!1,"watch",h,d),Fe(v).forEach(function(e){s[e]=u[e],qe(n,e),u[e]=v[e]}),v},We=function(e){return Ve[e]},ze=function(e){return Be[e]},qe=function(e,t){Ge[e][t]++},He=function(){var e;return(e={})[H]={},e[V]={},e[pe]={},e[q]={},e},Ve=He(),Be=He(),Ge={},Ye={getDispatcher:function(){return je[B]},isHotReloadMode:function(){return!!Ye.isHot||window&&(window.webpackHotUpdate||le())},runtimeVar:S,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:k,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=te(k,e);oe(t).forEach(function(e){n.includes(e)||n.push(e)}),Ye.store.setState(e,t)},_state:Ve,_prevState:Be,_stateVer:Ge,getState:function(e){return e?We(e):Ve},getPrevState:function(e){return e?ze(e):Be},getStateVer:function(e){return e?Ge[e]:Ge},setState:function(e,t,n){return Pe(e,t,n)},setGlobalState:function(e){return Pe(pe,e)},getGlobalState:function(){return Ve[pe]}},reducer:{_reducer:(Re={},Re[pe]={},Re[H]={},Re),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:F,watch:g,refStore:{_state:{},setState:function(e,t){var n=Ye.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:je,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:{},refs:je,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.2.2",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},Xe=localStorage.length,Je=Ye.refStore._state,Qe=0;Qe<Xe;Qe++){var Ze=localStorage.key(Qe);if(Ze.startsWith("CCSS_"))try{Je[Ze.substr(5)]=JSON.parse(localStorage.getItem(Ze))}catch(e){console.error(e)}}var et=[],tt=function(e){return e.toLowerCase()===H},nt=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},rt=z,ot=j;function at(e){if(!nt(e))throw Error("module["+e+"] writing is invalid!");if(tt(e))throw Error("'$$cc' is a built-in module name for concent")}function ct(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=Ye.store._state;if(at(e),e!==pe)if(t){if(T(o[e]))throw ot(Ke.CC_MODULE_NAME_DUPLICATE,rt(r))}else if(!o[e])throw ot(Ke.CC_MODULE_NOT_FOUND,rt(r))}function it(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+b);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var ut={},st=function(e,t,n){if(e.code!==Ke.CC_MODULE_NAME_DUPLICATE||!Ye.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=ut[o];if(a){if(r!==a)throw e}else ut[o]=r},dt={};function ft(e){dt[e]={}}var lt=Ye.waKey_uKeyMap_;function pt(n,e,t){void 0===t&&(t=!0),ft(n);var r=n===V?{}:e;try{!function(e,t,n){if(ct(e,n),!Ee(t))throw Error("module["+e+"]'s state "+Se)}(n,r,t)}catch(e){st(e,n,"state")}var o=Ye.store,a=o.getState(),c=o.getStateVer();o.getPrevState()[n]=Object.assign({},a[n]=r),c[n]=oe(r).reduce(function(e,t){return lt[n+"/"+t]={},e[t]=1,e},{});var i=Object.keys(r);if(Ye.moduleName_stateKeys_[n]=i,n===pe){var u=Ye.globalStateKeys;i.forEach(function(e){u.includes(e)||u.push(e)})}}function yt(e,t){void 0===t&&(t=!1);var n=Ye.ccUKey_ref_,r=Ye.moduleName_ccClassKeys_,o=Ye.ccClassKey_ccClassContext_,a=[];if(e){if(!Ye.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===q&&(a=a.filter(function(e){return!e.startsWith(x)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var vt=W,_t=J,mt=function(){return Promise.resolve()};function ht(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=vt(c,i),v=Ye.refs[y];if(!v)return _t("no ref found for ccUniqueKey:"+y+"!"),mt();f=v.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var _=e.split("/");l=_[0],p=_[1]}else p=e;var m;if(!(m=l&&"*"!==l?yt(l):d?yt(d):yt()))return _t("no ref found"),mt();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=Ye.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return _t(e.message),mt()}}function Ct(e,t,n,r,o){return ht(e,t,n,r,o)}function Kt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!Ee(e))throw Error(t+" "+Se);ct(a,!1,t+" is invalid");var n=Ye.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=ee(o,a),d=te(i,a);u.setState||(u.setState=function(e){return e}),oe(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=te(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Ct(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var gt=0,St=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Et(e){return gt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=St[ne()];return t}())+"_"+gt}var wt=Ye.moduleName_stateKeys_,$t=Ye.runtimeVar;function bt(e,t,n,r,o,a,c){var i=t.refCtx,u=t.type;if(e!==Ce||i.__$$isBSe){if(n){var s,d,f,l=typeof n;if("string"==l)s=Ee(r)?((d={})[n]=r,d):((f={})[n]={fn:r,depKeys:o,compare:a,immediate:c},f);else if(Ee(n))s=n;else if("function"==l&&!Ee(s=n(i)))throw Error("type of "+u+" callback result must be an object");s?function(x,U,N){var e=$t.computedCompare,t=$t.watchCompare,I=$t.watchImmediate,O="computed"===U.type?e:t,D=U.module;oe(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if("function"==t&&(n={fn:e}),Ee(n)){var r=n,o=r.fn,a=r.depKeys,i=r.immediate,u=void 0===i?I:i,s=r.compare,d=void 0===s?O:s,f=r.lazy,l=Et("mark");if("*"===a){var p=Nt(U,D,c),y=p.isStateKey,v=p.stateKey;if(!y)throw Error("retKey["+c+"] is not a state key of module["+D+"]");xt(x,U,l,v),Ut(x,U,D,v,o,a,u,d,f)}else{if(a&&!Array.isArray(a))throw Error("depKeys must an string array or *");if(a&&0!==a.length){var _="",m=c;if(c.includes("/")){var h=c.split("/"),C=h[0],K=h[1];_=C,m=K}xt(x,U,l,m);var g={};a.forEach(function(e){var t=Nt(U,D,e),n=t.isStateKey,r=t.stateKey,o=t.module;if(_&&o!==_)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=te(g,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");a.push(r)}),oe(g).forEach(function(e){Ut(x,U,e,m,o,g[e],u,d,f)})}else{var S=Nt(U,D,c),E=S.isStateKey,w=S.stateKey,$=S.module,b=[];!a&&E&&(b=[w]),xt(x,U,l,w),Ut(x,U,$,w,o,b,u,d,f)}}}else J("retKey["+c+"] item type error")})}(e,t,s):J(e+" "+u+" param type error")}}else J(e+" "+u+" must be been called in setup block")}function xt(e,t,n,r){if(e===Ce){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function Ut(e,t,n,r,o,a,c,i,u){var s=ee(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0}),d=s.retKey_fn_,f=s.stateKey_retKeys_,l=s.retKey_lazy_,p={fn:o,immediate:c,compare:i,depKeys:a};d[r]?e!==Ce&&(d[r]=p,l[r]=t.isLazyComputed||u):(d[r]=p,l[r]=t.isLazyComputed||u,s.fnCount++);var y=a;"*"===a&&(y=["*"]),e===Ce&&(t.retKeyFns[r]=d[r]);var v=t.refCtx;v&&("computed"===t.type?v.hasComputedFn=!0:v.hasWatchFn=!0),y.forEach(function(e){var t=te(f,e);t.includes(r)||t.push(r)})}function Nt(e,t,n){var r,o=t,a=n;if(n.includes("/")){var c=n.split("/"),i=c[0];i&&(o=i),a=c[1]}if(o===e.module)r=e.stateKeys;else{if(!(r=wt[o]))throw j(Ke.CC_MODULE_NOT_FOUND,z("module["+o+"]"));if(!e.connect[o])throw j(Ke.CC_MODULE_NOT_CONNECTED,z("module["+o+"], stateKey["+a+"]"))}return{isStateKey:r.includes(a),stateKey:a,module:o}}function It(e,o){var t={};return oe(e).forEach(function(r){o[r]=P(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[E]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):J("computed value can not been changed manually")}})}),t}var Ot=ee,Dt=Ee;function At(n,e){if(e){var t="module["+n+"] computed";if(!Dt(e))throw Error(t+" "+Se);ct(n,!1,t+" is invalid");var r=Ye.computed,o=Ye.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];bt(h,{module:n,stateKeys:oe(i),dep:c},e);var u=Ye.getDispatcher(),s=Object.assign({},i),d=Ot(r._computedValueOri,n);a[n]=It(e,d);var f=a[n];ke(u&&u.ctx,n,u&&u.ctx.module,i,function(e,t){return Oe(t,h,"computed",c,n,i,e)},i,i,s,$e(n),!0,"computed",h,f)}}var Tt=Ee,Mt=ee,Rt=oe;function kt(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!Tt(e))throw Error(r+" "+Se);ct(n,!1,r+" is invalid");var o=Ye.watch.getRootWatchDep(),a=Ye.watch.getRootWatchRaw(),c=Ye.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,Ye.store.getState)(n);bt(h,{module:n,stateKeys:Rt(u),dep:o},e);var s=Ye.getDispatcher(),d=Object.assign({},u),f=Mt(c,n);ke(s&&s.ctx,n,s&&s.ctx.module,u,function(e,t){return Oe(t,h,"watch",o,n,u,e)},u,u,d,$e(n),!0,"watch",h,f)}}var Lt=[U,N,12,I,14,15],Ft={};function jt(t,n){Ft[t].forEach(function(e){e({sig:t,payload:n})})}function Pt(e,t){function n(e,t){var n=Ft[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}Lt.forEach(function(e){return Ft[e]=[]});var Wt=function(e){if(!Ye.errorHandler)throw e;Ye.errorHandler(e)},zt=0,qt={},Ht={},Vt={},Bt={};function Gt(){return++zt}function Yt(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function Xt(e,t,n){Yt(e,t,n,qt)}function Jt(e,t,n){return Xt(e,t,n),function(e){var t=function(e){return qt[e]}(e),n=[];return oe(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function Qt(e){delete qt[e]}var Zt={},en=function(e,t,n){void 0===n&&(n=1e3);var r=Zt[t];r&&clearTimeout(r),Zt[t]=setTimeout(function(){delete Zt[t],e()},n)};function tn(e,n,r,t,o,a,c){if(void 0===c&&(c=!1),!e.hasWatchFn)return!0;var i=Object.assign({},t),u=e.watchDep,s=e.module,d=e.ccUniqueKey,f=e.refComputed,l=Object.assign({},r,t),p=ke(e,n,s,r,function(e,t){return Oe(t,"ref","watch",u,n,r,e,d)},t,l,i,o,a,"watch",Ce,f),y=p.shouldCurrentRefUpdate;return c&&p.hasDelta&&Object.assign(t,i),y}function nn(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=Object.assign({},t);if(!e.hasComputedFn)return i;var u=e.computedDep,s=e.module,d=e.refComputed,f=e.ccUniqueKey,l=Object.assign({},r,t);return ke(e,n,s,r,function(e,t){return Oe(t,Ce,"computed",u,n,r,e,f)},t,l,i,o,a,"computed",Ce,d),c&&Object.assign(t,i),i}var rn=oe,on=Ye.ccUKey_ref_,an=Ye.waKey_uKeyMap_;function cn(o,e,a,c){var t=rn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,a,c),r=function(e,t){return dt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var i={};t.forEach(function(e){Object.assign(i,an[o+"/"+e])});function u(e,t){e?f.push(t):l.push(t)}function s(e,t){var n=e.ctx,r=n.ccClassKey;if(a){var o=n.renderKey===a;"*"===c?o&&u(t,e):c.includes(r)?o&&u(t,e):u(t,e)}else u(t,e)}var d=rn(i),f=[],l=[];d.forEach(function(e){var t=on[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&s(t,!0),r&&s(t,!1)}});var p={belong:f,connect:l};return function(e,t,n){dt[e][t]=n}(o,n,p),{sharedStateKeys:t,result:p}}var un=Ee,sn=J,dn=T,fn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},ln=oe,pn=1,yn=2,vn=he,_n=_e,mn=me,hn=$,Cn=K,Kn=15,gn=1,Sn=2,En=3,wn=Ye.store,$n=wn.setState,bn=wn.getPrevState,xn=Ye.middlewares,Un=Ye.ccClassKey_ccClassContext_,Nn=Ye.refStore,In=Ye.moduleName_stateKeys_;function On(e,t,n){var r=void 0===t?{}:t,o=r.module,a=r.skipMiddleware,c=void 0!==a&&a,i=r.payload,u=r.reactCallback,s=r.type,d=r.calledBy,f=void 0===d?_n:d,l=r.fnName,p=void 0===l?"":l,y=r.renderKey,v=void 0===y?"":y,_=r.delay,m=void 0===_?-1:_;if(void 0!==e)if(un(e)){var h=n.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?pn:yn}(o,C),E={payload:i,renderKey:v,ccKey:g,module:o,fnName:p},w=function(e,t,n){var r=Ae(t,In[e],!0).partialState;if(r){var o=$n(e,r,n);return Object.assign(r,o),r}return r}(o,e,{refCtx:S===pn?n.ctx:null,callInfo:E});Object.assign(e,w),Dn(n,E,v,f,e,S,u,function(e,t){e===gn&&!w||jt(Kn,{committedState:t,sharedState:w,module:o,type:function(e,t){return[vn,_n,mn,hn,Cn].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,s),ccUniqueKey:K,renderKey:v}),w&&function(e,t,n,r,o,a,c){var i=function(){!function(r,e,o,t,a,n){if(!o)return;var c=e.ctx,i=c.ccUniqueKey,u=t===pn,s=cn(a,o,n,Un[c.ccClassKey].renderKeyClasses),d=s.sharedStateKeys,f=s.result,l=f.connect;f.belong.forEach(function(e){u&&e.ccUniqueKey===i||Dn(e,r,null,"broadcastState",o,pn)});var p=bn(a);l.forEach(function(e){if(!0!==e.__$$isUnmounted){var t=e.ctx;nn(t,a,p,o,r);var n=tn(t,a,p,o,r);t.__$$settedList.push({module:a,keys:d}),n&&(t.__$$reInjectConnObState(a),t.__$$ccForceUpdate())}})}(e,t,n,r,o,a)};if(0<c){var u=fn(t.ctx.ccUniqueKey,n);en(i,u,c)}else i()}(E,n,w,S,o,v,m)},c,{calledBy:f,type:s,payload:i,renderKey:v,delay:m,ccKey:g,ccUniqueKey:K,committedState:e,refModule:C,module:o,fnName:p,sharedState:w})}else sn("your committed state "+Se)}function Dn(e,t,n,r,o,a,c,i,u,s){var d=e.state,f=e.ctx;if(!0===e.__$$isUnmounted||a!==pn||r!==vn&&!dn(o))return c&&c(d),i&&i(gn,o);var l=f.module,p=f.storedKeys,y=f.ccUniqueKey,v=En;if(n&&(v=Sn,f.renderKey!==n))return i&&i(gn,o);if(0<p.length){var _=Ae(o,p),m=_.partialState;if(!_.isStateEmpty){if(!0===f.persistStoredKeys){var h=Ae(d,p),C=Object.assign({},h.partialState,m);localStorage.setItem("CCSS_"+y,JSON.stringify(C))}Nn.setState(y,m)}}function K(){f.__$$settedList.push({module:l,keys:ln(g)}),f.__$$ccSetState(g,c,S)}var g=nn(f,l,d,o,t),S=tn(f,l,d,g,t,!1,!0);i?(s.state=g,function(e,n,r){if(!0!==e){var o=xn.length;if(0<o){var a=0;!function e(){if(a===o)r();else{var t=xn[a];a++,"function"==typeof t?t(n,e):(sn("found one middleware is not a function"),e())}}()}else r()}else r()}(u,s,function(){K(),i(v,g)})):K()}function An(e,t,n,r,o){void 0===r&&(r=-1);try{yt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){Z(e)}}var Tn=J,Mn=Ee,Rn=oe,kn=Ye.store,Ln=kn.getState,Fn=kn.setState,jn=Ye.reducer._reducer,Pn=Ye.computed._computedValue,Wn=j,zn=z;function qn(e,t){void 0===t&&(t=!0);try{return ct(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;Bn(e)}(e,t),!1}}function Hn(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function Vn(e,t,n,r){var o;return!0===e?(function(e){Vt[e]=!0}(o=Gt()),r[o]=1):r[o=t||Gt()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function Bn(e,t){e&&(t?t(e):(Tn(e),Ye.errorHandler&&Ye.errorHandler(e)))}function Gn(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Hn(e,t)});r(o,n,c)}).catch(Wt)}(Zn,e,t,n)}function Yn(e,t,n){return Gn(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function Xn(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function Jn(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function Qn(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,w=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(Mn(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=Vn(o,C,K,w),v=typeof e,_={callerRef:h,calledBy:$,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:w,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==v)return e.__fnName&&(e.name=e.__fnName),Yn(e,_,t);if("object"!=v)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(_.module=p),Yn(l,_,t)}}function Zn(l,e,p){var y=e.callerRef,v=y.ctx.module,t=e.module,_=void 0===t?v:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,w=e.chainId,$=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;qn(e,!1)?(e!==t&&n&&(Tn(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(_,v,e.cb,function(e,r){if(e)return Bn(e,h);var o,t=Ln(_),n={};if(o=w===$&&1===b[w],m){b[w]=b[w]+1;var a=er(y,!1,x,_,E,S,w,$,b),c=er(y,!1,!0,_,E,S,w,$,b),i=er(y,!0,x,_,E,S,w,$,b),u=Qn(y,{delay:S,chainId:w,oriChainId:$,chainId_depth_:b}),s=Qn(y,{isLazy:!0,delay:S,oriChainId:$,chainId_depth_:b}),d=Qn(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:$,chainId_depth_:b}),f=function(e){return Bt[e]}(w)||{};n={module:_,callerModule:v,committedStateMap:f,committedState:f[_]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:Ln(),globalState:Ln(pe),moduleState:t,moduleComputed:Pn[_]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&jt(U,{isSourceCall:o,calledBy:K,module:_,chainId:w,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[w]=b[w]-1;var t=1===b[w];!function(e,t,n){Yt(e,t,n,Bt)}(w,_,e);var n=[];!1===x&&(jt(N,{isSourceCall:o,calledBy:K,module:_,chainId:w,fn:l}),!function(e){return!0===Vt[e]}(w)?n=[{module:_,state:e}]:t?function(e){return!0===Ht[e]}(w)||(n=Jt(w,_,e),Qt(w)):Xt(w,_,e)),n.forEach(function(e){e.state&&On(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(Qt(w),function(e){delete Bt[e]}(w)),h&&h(null,e)}).catch(function(e){jt(I,{isSourceCall:o,calledBy:K,module:_,chainId:w,fn:l}),Bn(e,h)})})}function er(b,x,U,N,I,O,D,A,T){return void 0===I&&(I=""),void 0===O&&(O=-1),void 0===T&&(T={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||O;if(Mn(t)){c=I;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||I;function l(){return Qn(b,{chainId:_,oriChainId:m,isLazy:o,chainId_depth_:T})(e,n,c,i)}var p,y,v=Vn(o,D,A,T),_=v._chainId,m=v._oriChainId,h=typeof e,C=N;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(Wn(Ke.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==T[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(Wn(Ke.CC_DISPATCH_STRING_INVALID,zn(g)));var w=g.split("/"),$=w[0];$&&(C=$),p=w[1]}}return"*"===C?ht("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,v=jn[r];if(!v)return s(Error("no reducerMap found for module:["+r+"]"));var _=v[c];if(!_)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(v)));Zn(_,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:M,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Hn(e,t),delay:i,renderKey:c,isSilent:a,chainId:_,oriChainId:m,chainId_depth_:T})}).catch(Wt)}}function tr(a){return function(t){try{An(a,t)}catch(e){var n=Ln(a);if(!n)return Tn("invalid module "+a);var r=Ae(t,Rn(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||Fn(a,r.partialState),0<o.length&&Tn("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),Q("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var nr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===ye?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},rr=function(r){return function(e){var t=r.ctx;if(t.type===ye){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},or=Ee,ar=be;function cr(t,e){if(Ye.isStartup){if(!or(e))throw Error("param config "+Se);if(t===pe)throw Error("configuring global module is not allowed");var n=e.reducer,r=e.computed,o=e.watch,a=e.init,c=e.isClassSingle,i=ar(e.state);if(n&&!or(n))throw Error("config.reducer "+Se);if(pt(t,i,!0),Kt(t,n),r&&At(t,r),o&&kt(t,o),Ye.moduleSingleClass[t]=!0===c,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){tr(t)(e)})}Ye.moduleName_isConfigured_[t]=!0,jt(14,t)}else et.push({module:t,config:e})}function ir(r,o){var a={};return oe(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function ur(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function sr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var dr=oe,fr=Ee,lr=Ye.store._state;var pr=R,yr=j,vr=Ye.featureStr_classKey_,_r=Ye.userClassKey_featureStr_,mr=Ye.ccClassKey_ccClassContext_,hr=0;var Cr=Ye.moduleName_stateKeys_,Kr=Ye.moduleName_ccClassKeys_,gr=Ye.moduleSingleClass,Sr=Ye.ccClassKey_ccClassContext_,Er=Ye.computed._computedValue,wr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},$r=z;function br(e,t,n,r,o,a,c,i,u){void 0===e&&(e=q),void 0===a&&(a=[]),!0===i&&function(){if(!0!==Ye.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;ct(e,!1,"module["+e+"] is not configured in store"),it(Cr[e],a);var d=c;Array.isArray(c)?(d={},c.forEach(function(e){return d[e]="-"})):c[pe]||(c[pe]="-");var f,l=function(e,t,n){if(!n)return[];if("*"===n)return Cr[e];var r=wr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+b+" "+$r("ccClassKey:"+t));return n}(e,t,o),p=function(o,e,t,a){if(!fr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Se);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=dr(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=lr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),dr(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,l),y=p.connectedModuleKeyMapping,v=p.connectedModuleNames,_=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===q&&pr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=vr[i];return u||(vr[i]=u=""+o+ ++hr)}if(c.startsWith(m))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(mr[c]){if(_r[c]!==a)throw yr(Ke.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else _r[c]=a;return c}(s,e,d,l,r,p.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");f=n}else f=[_];return function(e,t,n,r,o,a,c){var i=Sr[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Sr[e]=i);var u={},s={};if(a){var d=Ye.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=Er[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(_,f,e,o,l,y,v),function(e,t){var n=te(Kr,e);if(!0===gr[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,_),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:_}}var xr=Ye.event_handlers_,Ur=Ye.handlerKey_handler_,Nr=Ye.ccUKey_handlerKeys_,Ir=Ye.ccUKey_ref_,Or=function(e,t,n){return e+"$"+t+"$"+n},Dr=te,Ar=J;function Tr(e,t,n,r,o){void 0===o&&(o=null);var a=xr[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function Mr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete Ur[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=xr[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete Nr[n])}),xr[e]=r.filter(function(e){return null!==e}))})}function Rr(e,t,n,r,o,a){var c=Dr(xr,r);if("function"!=typeof a)return Ar("event "+r+"'s handler is not a function!");var i=Or(n,r,o),u=Dr(Nr,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),Ur[i]=d}function kr(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey),Tr(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=Ir[e.ccUniqueKey];if(n&&t){var r=Ur[t];if(r){var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function Lr(e,t){Mr(Tr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Fr(e){var t=Nr[e];if(t){var n=[];t.forEach(function(e){return n.push(Ur[e])}),Mr(n)}}function jr(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var Pr=Object.freeze({bindEventHandlerToCcContext:Rr,findEventHandlersToPerform:kr,findEventHandlersToOff:Lr,offEventHandlersByCcUniqueKey:Fr,getEventItem:jr}),Wr=Ye.waKey_uKeyMap_,zr=Ye.moduleName_stateKeys_;function qr(s,e,d){return new Proxy(e,{get:function(e,t){var n=s.ctx;if(n.__$$renderStatus===w){var r=n.ccUniqueKey;if(d){var o=n.__$$nextCompareConnWaKeys,a=n.__$$nextCompareConnWaKeyCount;n.__$$compareConnWaKeys[d][t]=n.__$$curConnWaKeys[d][t]=Wr[d+"/"+t][r]=1;var c=o[d];c[t]||(c[t]=2,a[d]++)}else{var i=n.module;if(zr[i].includes(t)){var u=n.__$$nextCompareWaKeys;n.__$$compareWaKeys[t]=n.__$$curWaKeys[t]=Wr[i+"/"+t][r]=1,u[t]||(u[t]=2,n.__$$nextCompareWaKeyCount++)}}}return e[t]},set:function(e,t){return e[t]=e[t],!0}})}function Hr(o,a){return void 0===a&&(a=!1),function(e,t,n,r){bt(Ce,{type:"computed",isLazyComputed:a,refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep},e,t,n,r)}}var Vr=J,Br=W;function Gr(e){return e?e.props||e:{}}var Yr=Ye.store.getState;var Xr=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[ve],p=e.type,y=!1;if(void 0!==l){var v,_,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");v=h[1],_=c,m=h[0]}else _=r+"/"+(v=c),m=r;var C=Yr(m);u="bool"===p?!xe(m!==r?C:o,v):function(e){var t=ae(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,v,{module:m,moduleState:C,fullKeyPath:_,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):J("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=ae(t);if(!E)return null;var w=E.currentTarget;u=w.value;var $=w.dataset;if(a="int"===p||void 0!==$.ccint,!(c=$.ccsync))return null;i=$.ccrkey;var b=$.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var Jr=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(J(t+" can not convert to int but you set ccint as true!！"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],v=i.slice(1),_=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?J("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(_,v,v.length-1,0,a,o),{module:c,state:(p={},p[y]=_,p)}},Qr=Ye.store.getState;function Zr(e,t,n){var r=t.ctx,o=r.module,a=Xr(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var v=f.split("/")[0];ct(v,!1);var _=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&On(s,{calledBy:K,ccKey:_,ccUniqueKey:m,module:v,renderKey:y,delay:p},t));var h=v!==o?Qr(v):t.state;On(Jr(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:_,ccUniqueKey:m,module:v,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=Jr(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var eo=Ye.reducer,to=eo._module_fnNames_,no=eo._caller,ro=Ye.refStore,oo=Ye.ccClassKey_ccClassContext_,ao=Ye.moduleName_stateKeys_,co=Ye.store.getState,io=Ye.moduleName_ccClassKeys_,uo=Ye.computed._computedValue,so=Ye.waKey_uKeyMap_,fo=oe,lo=j,po=z,yo=te,vo=ee,_o=J,mo=R,ho=0;var Co=function(){},Ko=function(e){return"type of defineEffect "+e+" param must be"},go=function(e){return"-"===e.watchedKeys?fo(e.__$$renderStatus===w?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},So=function(t,e){function n(e){return fo(t.__$$renderStatus===w?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?ao[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function Eo(n,r,e){("*"===e?ao[r]:e).forEach(function(e){var t=so[r+"/"+e];t?t[n]=1:_o("invalid watchedKey["+e+"] of module["+r+"]")})}function wo(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,v=e.watchedKeys,_=e.connect,m=void 0===_?{}:_,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=u,E=c.ctx,w=c.setState,$=c.forceUpdate;!mo(E)&&E.ccUniqueKey?(w=E.__boundSetState,$=E.__boundForceUpdate):s!==ye&&(w=c.setState.bind(c),$=c.forceUpdate.bind(c));var b={};b.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,b.tag=g.tag||C;var x=function(e,t,n,r){var o;if(e)n&&Vr("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=Br(t,n);else{var a=Et(r);o=Br(t,a)}return o}(r,o,i,b.tag);if(b.renderKey=g.renderKey||x,b.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(it(t,o),o):[]}(d,ao[S],g.storedKeys,l),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<b.storedKeys.length&&!i)throw lo(Ke.CC_STORED_KEYS_NEED_CCKEY,po("ccClassKey["+o+"]"));var U=oo[o],N=U.connectedState,I=fo(m),O=U.connectedComputed||{},D={},A={},T=co(u),M=uo[u]||{},R=uo[pe]||{},k=co(pe),L=we(fo(d),ao[S]),F=ro._state[x]||{},j=Object.assign({},d,F,T),P=fo(c.state=j),W=yo(io,u);W.includes(o)||W.push(o);function z(e,t){On(e,t,c)}function q(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function H(e,t,n,r,o){q(e,t,me,n,r,o)}function V(e,t,n,r,o){"string"==typeof e?H(e,t,n,r,o):q(S,e,_e,t,n,r)}function B(e,t,n){q(S,c.state,he,e,t,n)}var G=[],Y=[],X={effectItems:G,eid_effectReturnCb_:{},effectPropsItems:Y,eid_effectPropsReturnCb_:{}},J={},Q={},Z=Gr(c.props),ee=((n={type:s,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:x,renderCount:1,initTime:Date.now(),watchedKeys:v,privStateKeys:L,connect:m,connectedModules:I,__$$onEvents:[],__$$hasModuleState:0<ao[u].length,__$$renderStatus:ge,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},persistStoredKeys:b.persistStoredKeys,storedKeys:b.storedKeys,renderKey:b.renderKey,tag:b.tag,prevProps:Z,props:Z,mapped:{},prevState:j,state:j,moduleState:T,mstate:T,globalState:k,gstate:k,connectedState:D,cstate:A,extra:{},staticExtra:{},refComputed:{},refComputedOri:{},moduleComputed:M,globalComputed:R,connectedComputed:O,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=P,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.auxMap=J,n.effectMeta=X,n.retKey_fnUid_={},n.reactSetState=Co,n.__boundSetState=w,n.reactForceUpdate=Co,n.__boundForceUpdate=$,n.setState=V,n.setModuleState=H,n.forceUpdate=B,n.changeState=z,n.refs=Q,n.useRef=function(t){return function(e){return Q[t]={current:e}}},n.__$$ccSetState=Xn(c),n.__$$ccForceUpdate=Jn(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=V,c.forceUpdate=B,ee.initState=function(e){return c.__$$isMounted?_o("ctx.initState can only been called before first render period!"):Ee(d)?(c.state=Object.assign({},d,e,F,T),void(ee.prevState=ee.state=c.state)):_o("state "+Se)};var te=er(c,!1,!1,S);if(ee.dispatch=te,1<t&&(ee.lazyDispatch=er(c,!0,!1,S),ee.silentDispatch=er(c,!1,!0,S),ee.dispatchLazy=ee.lazyDispatch,ee.dispatchSilent=ee.silentDispatch,ee.invoke=Qn(c),ee.lazyInvoke=Qn(c,{isLazy:!0}),ee.silentInvoke=Qn(c,{isLazy:!1,isSilent:!0}),ee.invokeLazy=ee.lazyInvoke,ee.invokeSilent=ee.silentInvoke,ee.setGlobalState=function(e,t,n,r){q(pe,e,_e,t,n,r)}),2<t){var ne=function(e,t,n,r,o){var a;if("string"==typeof e)return Zr.bind(null,((a={})[ve]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);Zr({type:"val"},c,e)};ee.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"val")},ee.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"bool")},ee.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"int")},ee.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ne(e,t,n,r,"as")},ee.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),Zr(((o={})[ve]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},ee.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),Zr(((r={})[ve]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(ee.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kr.apply(Pr,[jr(e)].concat(n))},ee.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?x:a,i=jr(e);Lr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},ee.on=function(e,t){var n=jr(e),r=n.identity;Rr(S,o,x,n.name,void 0===r?null:r,t)}),4<t){ee.execute=function(e){return ee.execute=e},ee.aux=function(e,t){return function(e,t,n){var r=t,o="";if(Array.isArray(t)){var a=t[0];r=a+"/"+t[1],o=a}else{if("string"!=typeof t)return _o("auxKey["+t+"] invalid");o=t.split("/")[0]}if(!Ye.pluginNameMap[o])return _o("pluginName["+o+"] invalid");e[r]?_o("auxMethod["+r+"] dup!"):e[r]=n}(J,e,t)},ee.watch=function(a){return function(e,t,n,r,o){bt(Ce,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,n,r,o)}}(ee),ee.computed=Hr(ee),ee.lazyComputed=Hr(ee,!0);var re=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(Ko("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(Ko("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){e.includes("/")?c.push(e):c.push(S+"/"+e)}));var i={fn:e,isProp:s,depKeys:o,moDepKeys:c,eId:Symbol("__autoGen_"+ ++ho+"__"),compare:n,immediate:a};u.push(i)}};ee.effect=re(G,!1),ee.effectProps=re(Y,!0)}var oe=ee.moduleReducer,ae=ee.connectedReducer,ce=ee.__$$curConnWaKeys,ie=ee.__$$compareConnWaKeys,ue=ee.__$$compareConnWaKeyCount,se=ee.__$$nextCompareConnWaKeys,de=ee.__$$nextCompareConnWaKeyCount,fe=I.slice();fe.includes(u)?_o("module["+u+"] is in belongTo and connect both, it will cause redundant render."):fe.push(u);var le=!1;fe.forEach(function(o){var e;e=o===u?oe:vo(ae,o);var t=m[o];if(t){var n=N[o];A[o]=n,"-"===t?(le=!0,ce[o]={},ie[o]={},ue[o]=0,se[o]={},de[o]=0,n=qr(c,n,o)):Eo(x,o,t),D[o]=n}(to[o]||[]).forEach(function(r){e[r]=function(e,t,n){return te(o+"/"+r,e,t,n)}})}),ee.reducer=no,"-"===v?(le=!0,c.state=qr(c,j),ee.state=c.state):Eo(x,u,v),ee.__$$autoWatch=le,ee.__$$reInjectConnObState=function(e){var t=ee.connectedState;Array.isArray(m)?t[e]=qr(c,N[e],e):"-"===m[e]&&(t[e]=qr(c,N[e],e));ee.globalState=t[pe]},ee.getWatchedKeys=function(){return go(ee)},ee.getConnectWatchedKeys=function(e){return So(ee,e)},E?Object.assign(c.ctx,ee):c.ctx=ee}var $o=Ye.store.getState;var bo=oe,xo=Ye.runtimeVar;function Uo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$isBSe=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!Ee(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===xo.bindCtxToMethod&&!1!==t)&&bo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.__$$isBSe=!1,r.refComputed=It(r.computedRetKeyFns,r.refComputedOri),function(e){var r=e.ctx,t=r.hasComputedFn,n=r.hasWatchFn,o=r.connect,a=r.module,c=$e(a),i=oe(o),u=r.state;t&&(nn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=$o(e),n=$e(e);nn(r,e,t,t,n,!0,!0)})),n&&(tn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=$o(e),n=$e(e);tn(r,e,t,t,n,!0,!0)}))}(n)}var No=Ye.moduleName_stateKeys_,Io=Ye.store,Oo=Io.getPrevState,Do=Io.getState,Ao=Io.getStateVer,To=function(e,t){return J("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function Mo(e,t){function n(o,a,c){return function(e){var t=e.eId;if(!c||!1!==e.immediate){var n=o[t],r=(0,e.fn)(i,a?l:p);r&&(o[t]=r),n&&n(i)}}}var i=e.ctx,r=i.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,u=r.eid_effectPropsReturnCb_,h=i.__$$prevMoStateVer,C=i.__$$settedList,K=i.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(u,!0,!0));else{var g=i.prevState,S=e.state,E=[];o.forEach(function(e){var t=e.moDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(C),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=void 0,p=s.split("/"),y=p[0],v=p[1];if(y!==K){var _=Oo(y),m=Ao(y);if(h[v]===m[v])continue;if(h[v]=m[v],!_){To(s,"module["+y+"]");continue}if(!No[y].includes(v)){To(s,"unmoduledKey["+v+"]");continue}d=Do(y),f=_,l=v}else d=S,f=g,l=s;if(f[l]!==d[l]){i=!0;break}}else if(c[s]){i=!0;break}}i&&E.push({fn:r,eId:o})}else E.push({fn:r,eId:o})}),E.forEach(n(a,!1,!1));var s=i.prevProps,d=i.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(u,!1,!1)),C.length=0}}var Ro=J,ko=j,Lo=z,Fo=Y,jo=G,Po=Ye.runtimeVar,Wo=Ye.ccClassKey_ccClassContext_,zo=Ye.ccUKey_ref_,qo={};function Ho(e,t,n,r){function o(){zo[e]=t,n.push(e)}!function(e){void 0===qo[e]?qo[e]=1:qo[e]+=1}(e),r?setTimeout(o,r):o()}function Vo(e,t,n,r,o){var a=Wo[n],c=a.ccKeys;Po.isDebug&&console.log(Fo("register ccKey "+o+" to CC_CONTEXT"),jo());var i=Ye.isHotReloadMode();if(c.includes(o)){var u=function(){throw ko(Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE,Lo("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===qo[e]?0:qo[e]}(o);if(t&&0<s)throw ko(Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE,Lo("ccClass:"+n));1<s&&u(),Ro("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+Lo("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),Ho(o,e,c,600)}else u()}else Ho(o,e,c);return a}var Bo=Ye.waKey_uKeyMap_;function Go(t,e,n,r){var o=!1,a=oe(t);a.forEach(function(e){2===t[e]&&(o=!0,delete Bo[n+"/"+e][r])}),e<a.length&&(o=!0),o&&ft(n)}function Yo(e){var t=e.ctx;if(t.__$$renderStatus=ge,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;Go(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&Go(a[e],c[e],e,o)})}}function Xo(e){Yo(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.__$$onEvents;Vo(e,t.isSingle,t.ccClassKey,t.ccKey,t.ccUniqueKey),0<n.length&&(n.forEach(function(e){return e.fn.apply(void 0,e.args)}),n.length=0),Mo(e,!0)}function Jo(e){Yo(e),Mo(e),e.ctx.prevState=e.state}var Qo=Ye.ccUKey_ref_,Zo=Ye.ccUKey_handlerKeys_,ea=Ye.runtimeVar,ta=Ye.ccClassKey_ccClassContext_,na=Ye.handlerKey_handler_;function ra(e,t){ea.isDebug&&console.log(Y(t+" unset ref"),G("purple")),delete Qo[t];var n=ta[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===qo[e]?qo[e]=0:qo[e]-=1}(t);var o=Zo[t];o&&o.forEach(function(e){delete na[e]})}var oa=oe;function aa(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r,i)}Object.getOwnPropertySymbols(n).forEach(e),oa(n).forEach(e)}function ca(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey;if(e.__$$isMounted){var o=t.effectMeta,a=o.eid_effectPropsReturnCb_;aa(o.eid_effectReturnCb_,t),aa(a,t),Fr(n)}ra(r,n)}function ia(e){var t=e.ctx;if(t.__$$renderStatus=w,1!==t.renderCount&&t.__$$autoWatch){t.__$$hasModuleState&&(e.state=qr(e,e.state),t.state=e.state,t.moduleState=qr(e,t.mstate),t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var ua=function(e){return"CC("+e+")"},sa=Ue,da=ie,fa=be,la=Ye.runtimeVar,pa=G,ya=Y,va=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function _a(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?q:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,v=void 0===y?{}:y,_=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,w=void 0===E||E,$=n.compareProps,b=void 0===$||$,x=n.__calledBy;void 0===t&&(t="");try{var U=br(o,t,S,A,sa(s),d,v,w,x),N=U._module,I=U._ccClassKey,O=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:D.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=fa(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(sr(n));var a=Object.assign({},e,{isSingle:g,module:N,tag:_,state:o,type:A,watchedKeys:s,ccClassKey:I,connect:O,storedKeys:d,persistStoredKeys:p});if(wo(sr(n),a,m),n.ctx.reactSetState=nr(sr(n)),n.ctx.reactForceUpdate=rr(sr(n)),l&&(n.$$setup||i))throw va("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(sr(n))),Uo(sr(n),l||n.$$setup||i,!1))}catch(e){Wt(e)}return n}ur(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&da(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Xn(e,this),t.__$$ccForceUpdate=Jn(e),e.state||(e.state={}),Object.assign(e.state,this.state),ia(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw va("ccUniqueKey "+t.ccUniqueKey);Uo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),Xo(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),Jo(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),ca(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,la.isDebug&&console.log(ya("@@@ render "+ua(I)),pa()),!1===C?(ia(this),c.prototype.render.call(this)):D.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=I===B?"CcDispatcher":ua(I),t}}catch(e){Wt(e)}}function ma(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return ur(t,e),t.prototype.render=function(){return this.props.children||D.createElement("span",{style:{display:"none"}})},t}(D.Component);if(Ye.refs[B]){if(!Ye.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");Q("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return _a({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var ha=Ee,Ca=oe;function Ka(e,t){if(!ha(e))throw Error(t+" "+Se)}function ga(e){if(!ha(e))throw Error("StartupOption.moduleSingleClass "+Se);!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(Ye.moduleSingleClass,e)}function Sa(e){if(0<e.length){var o=Ye.plugins;o.length=0,Lt.forEach(function(e){return Ft[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(Pt),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),Ye.pluginNameMap=a}}var Ea=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(D.createElement(e),t)},wa=!1;function $a(e,r){void 0===e&&(e=!1),re(Ye.event_handlers_),re(Ye.ccUKey_handlerKeys_);var o=Ye.ccClassKey_ccClassContext_,t=Ye.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),re(t.ccKeys,n)}),re(Ye.handlerKey_handler_),re(t,[B].concat(r)),e){var n=Ye.computed,a=Ye.watch,c=n._computedValue,i=a._watchDep;oe(Ye.store._state).forEach(function(e){e!==H&&(c[e]&&(Ye.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0},At(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0},kt(e,a._watchRaw[e])))})}}function ba(){var n=Ye.ccUKey_ref_,r=[];return oe(n).forEach(function(e){var t=n[e];t&&t.ctx.type===x&&!0!==t.props.__$$regDumb&&!0===t.__$$isMounted&&0==t.__$$isUnmounted&&r.push(e)}),r}function xa(){re(Ye.globalStateKeys);var e=oe(Ye.moduleName_isConfigured_).concat([q,H,pe,a]);re(Ye.reducer._reducer,e),re(Ye.store._state,e,{}),re(Ye.computed._computedDep,e),re(Ye.computed._computedValue,e),re(Ye.watch._watchDep,e),re(Ye.middlewares),re(Ye.waKey_uKeyMap_),Ne={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=ba();return $a(!1,t),t}function Ua(e){void 0===e&&(e=!1),Ye.info.latestStartupTime=Date.now();var t=[];return Ye.isStartup?Ye.isHotReloadMode()?e?(console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),wa=!0,t=xa()):(wa?wa=!1:(function(){if(!Ye.refs[B]){var e=ma();Ea(e)}}(),t=ba(),$a(Ye.reComputed,t)),t):(console.warn("clear failed because of not running under hot reload mode!"),t):(wa=!0,t)}var Na=ue,Ia=be;function Oa(e){var t=e.props,n=Na(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,v=n.isSingle,_=n.storedKeys,m=void 0===_?[]:_,h=Ia(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,w=C,$=y;if(!0!==t.__$$regDumb){var b=br(r,C,o,x,Ue(l),m,y,!0);E=l,w=b._ccClassKey,$=b._connect}wo(e,{isSingle:v,ccKey:K,connect:$,state:h,module:r,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:w,ccOption:S,type:x},c),e.ctx.reactSetState=nr(e),e.ctx.reactForceUpdate=rr(e),e.__$$compareProps=u,Uo(e,s,d)}var Da=Q,Aa=ce,Ta="";function Ma(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,v=void 0===t?{}:t,_=v.plugins,m=void 0===_?[]:_,h=v.middlewares,C=void 0===h?[]:h,K=v.isStrict,g=void 0!==K&&K,S=v.isDebug,E=void 0!==S&&S,w=v.errorHandler,$=void 0===w?null:w,b=v.isHot,x=v.bindCtxToMethod,U=void 0!==x&&x,N=v.computedCompare,I=void 0===N||N,O=v.watchCompare,D=void 0===O||O,A=v.watchImmediate,T=void 0!==A&&A,M=v.alwaysGiveState,R=void 0===M||M,k=v.reComputed,L=void 0===k||k;try{throw Error()}catch(e){var F=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=Ye.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return Ua(Ye.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(Ta)if(Ta!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);le()?(u=c(),Ta=a):(Z(d),s=!1)}else u=c();else Ta=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),j=F.ccFragKeys;if(!F.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Da("cc version "+Ye.info.version),void 0!==b&&(Ye.isHot=b),Ye.reComputed=L,Ye.errorHandler=$;var P=Ye.runtimeVar;if(P.alwaysGiveState=R,P.isStrict=g,P.isDebug=E,P.computedCompare=I,P.watchCompare=D,P.watchImmediate=T,P.bindCtxToMethod=U,ga(y),function(e){Ka(e,"state"),delete e[V],delete e[H],void 0===e[pe]&&(e[pe]={}),void 0===e[q]&&(e[q]={});for(var t=Ca(e),n=t.length,r=0;r<n;r++){var o=t[r];pt(o,e[o])}}(o),function(t){Ka(t,"reducer"),void 0===t[q]&&(t[q]={}),void 0===t[pe]&&(t[pe]={}),Ca(t).forEach(function(e){return Kt(e,t[e])})}(c),function(t){Ka(t,"computed"),Ca(t).forEach(function(e){return At(e,t[e])})}(d),function(t){Ka(t,"watch"),Object.keys(t).forEach(function(e){return kt(e,t[e])})}(l),function(n){if(n){if(!ha(n))throw Error("init "+Se);Ca(n).forEach(function(t){ct(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){tr(t)(e)})}),Ye.init._init=n}}(u),function(e){if(0<e.length){var t=Ye.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C),!Ye.refs[B]){var W=ma();Ea(W)}var z=function(e){Aa("CC_CONTEXT",Ye,e),Aa("ccc",Ye,e),Aa("cccc",Ye.computed._computedValue,e),Aa("sss",Ye.store._state,e)};window.mcc?setTimeout(function(){z(window.mcc[de()])},1200):z(),Ye.isStartup=!0,Sa(m),j.forEach(function(e){var t=Ye.ccUKey_ref_[e];ca(t),Oa(t),Xo(t)})}catch(e){if(!$)throw e;$(e)}}}function Ra(e){throw Error("[[run]]: param error, "+e+" "+Se)}var ka=Ee,La=oe,Fa=R,ja=be;function Pa(e,t){var n=ue(e);return delete n.__checkStartUp,delete n.__calledBy,_a(n,t)}var Wa=ie,za=D.createElement("span",{style:{display:"none"}}),qa=function(r){function e(e,t){var n;return Oa(sr(n=r.call(this,e,t)||this)),n}ur(e,r);var t=e.prototype;return t.componentDidMount=function(){Xo(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&Wa(Gr(e),Gr(this.props));return this.state!==t||n},t.componentDidUpdate=function(){Jo(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),ca(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=Gr(e);var t=e.render,n=t||e.children;if("function"==typeof n){ia(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||za):n(a)||za}if(D.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(D.Component);function Ha(e,t){var n=ue(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=Ue(c),l=br(o,t,r,x,f,i,d,!0),p=l._ccClassKey,y=l._connect;function v(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),D.createElement(t,e.mapped)):D.createElement(t,e)},ccKey:o.ccKey,register:e};return D.createElement(qa,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?v(u):function(e){return v(e)}}var Va=Ye.ccUKey_ref_,Ba=1;function Ga(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function Ya(e,t,n,r,o,a,c,i,u,s){var d=n||be(r),f=o.bindCtxToMethod,l=o.watchedKeys,p=void 0===l?"-":l,y=o.storedKeys,v=void 0===y?[]:y,_=o.connect,m=void 0===_?{}:_,h=o.setup,C=o.lite;Ba+=1;var K=br(o.module,s,o.renderKeyClasses,ye,Ue(p),v,m,!0),g=K._module,S=K._ccClassKey,E=K._connect,w=e||new Ga(a,c,i),$=Object.assign({},o,{module:g,watchedKeys:p,state:d,type:ye,ccClassKey:S,connect:E,ccOption:i.ccOption});w.props=i,wo(w,$,C),w.ctx.reactSetState=nr(w),w.ctx.reactForceUpdate=rr(w);var b=w.ctx;return b.props=i,b.extra=u,Uo(w,h,f),t.current=w.ctx.ccUniqueKey,b.useRef=function(e){var t=D.useRef(null);return b.refs[e]=t},w}function Xa(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}var Ja="react version is LTE 16.8";function Qa(e,t){var n=ue(e),r=n.state,o=void 0===r?{}:r,a=n.props,c=void 0===a?{}:a,i=n.mapProps,u=n.layoutEffect,s=void 0!==u&&u,d=n.extra,f=void 0===d?{}:d,l=D.useState;if(!l)throw Error(Ja);function p(e){return Ya(e,g,m,o,n,C,K,c,f,t)}var y,v=Ba,_=l(v)[0]===v,m=_?be(o):0,h=l(m),C=h[0],K=h[1],g=D.useRef(null);if(_)y=p();else if(y=Va[g.current]){var S=y.ctx;S.prevProps=S.props,y.props=S.props=c,S.extra=f}else y=p();var E=y.ctx,w=s?D.useLayoutEffect:D.useEffect;if(w(function(){y.isFirstRendered||Jo(y),Xa(E,K)}),w(function(){return!1===y.isFirstRendered?p(y):y.isFirstRendered=!1,Xa(E,K),Xo(y),function(){ca(y)}},[]),i){var $=i(E);if(!Ee($))throw Error("mapProps ret "+Se);E.mapped=$}return ia(y),E}function Za(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function ec(e){return Ye.store.getState(e)}var tc=Ye.computed._computedValue;var nc=Ye.ccUKey_ref_,rc=Ye.ccClassKey_ccClassContext_;function oc(){var n=[],r=Ye.ccUKey_ref_;return oe(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function ac(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!Ye.isStartup)throw Error("cc is not startup yet");at(e),ct(t,!1);var s=Ye.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,be(o));var f=ir(Ye.reducer._reducer[t]||{},e);a&&Object.assign(f,ir(a,e));var l=Ye.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=Ye.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=Ye.init._init[t];u&&(y=u);var v={state:d,reducer:f,computed:l,watch:p};y&&(v.init=y),cr(e,v)}function cc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=ja(n),"function"==typeof n&&(Ye.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),ka(t)||Ra("store"),ka(e)||Ra("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};La(t).forEach(function(e){return r(e,t[e])}),et.forEach(function(e){var t=e.module,n=e.config;Q("configure pending module["+t+"]"),r(t,n)}),et.length=0,Fa(s.init)&&(s.init=null),Ma(s,e)}function ic(e,t){return Pa({connect:e},t)}function uc(e,t){return Ha({connect:e},t)}function sc(e,o){var a=ue(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=Qa(a,o);return D.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&D.memo?D.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function dc(e,t,n,r,o){void 0===o&&(o=!1);try{yt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;J(e.message)}}function fc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&Za(),"string"!=typeof e&&Za(),An(e,t,n,r,o)}function lc(e,t,n,r){yt().ctx.set(e,t,n,r)}function pc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=ec(n[0]);return Jr(e,t,!1,r,!1).state}function yc(e){return $c[e].connectedState||{}}function vc(e){return e?tc[e]:tc}function _c(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=yt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){J(e)}}function mc(e,t){try{yt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;J(e.message)}}function hc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=rc[e];return t&&t.ccKeys.forEach(function(e){var t=nc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Cc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];oc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Kc(e,t,n){return{fn:e,depKeys:t,compare:n}}function gc(e,t,n){return{fn:e,depKeys:t,compare:n,lazy:!0}}function Sc(e,t){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t}}function Ec(e,t,n,r){return{fn:e,depKeys:t,compare:n,immediate:r}}function wc(e,t,n){return{fn:e,depKeys:t,compare:n,immediate:!0}}var $c=Ye.ccClassKey_ccClassContext_,bc=Pa,xc=Ha,Uc=cr,Nc=ec,Ic=Ye.store.getGlobalState,Oc=Ct,Dc=Ye,Ac=ma,Tc=oc,Mc=Ye.reducer._caller,Rc=Ua,kc=qa,Lc=s,Fc=Ye.store.appendState,jc=Qa,Pc={cloneModule:ac,emit:_c,off:mc,connect:ic,connectDumb:uc,register:bc,registerDumb:xc,registerHookComp:sc,configure:Uc,dispatch:Oc,run:cc,setGlobalState:dc,setState:fc,set:lc,setValue:pc,getGlobalState:Ic,getState:Nc,getComputed:vc,getConnectedState:yc,ccContext:Dc,createDispatcher:Ac,execute:hc,executeAll:Cc,getRefs:Tc,reducer:Mc,clearContextIfHot:Rc,CcFragment:kc,cst:Lc,appendState:Fc,useConcent:jc,bindCcToMcc:Wc,defComputed:Kc,defLazyComputed:gc,defComputedVal:Sc,defWatch:Ec,defWatchImmediate:wc};function Wc(e){if(!qc)throw Error("current env is not multi concent ins mode");if(qc[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){se=e}(e),ce(e,Pc,qc)}function zc(){var e=se?window.mcc[se]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=Dc.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var qc=window.mcc;qc?setTimeout(function(){if(!de())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");zc()},1e3):(zc(),ce("cc",Pc)),e.cloneModule=ac,e.run=cc,e.connect=ic,e.connectDumb=uc,e.register=bc,e.registerDumb=xc,e.registerHookComp=sc,e.configure=Uc,e.setGlobalState=dc,e.setState=fc,e.set=lc,e.setValue=pc,e.getState=Nc,e.getGlobalState=Ic,e.getConnectedState=yc,e.getComputed=vc,e.emit=_c,e.off=mc,e.dispatch=Oc,e.ccContext=Dc,e.createDispatcher=Ac,e.execute=hc,e.executeAll=Cc,e.getRefs=Tc,e.reducer=Mc,e.clearContextIfHot=Rc,e.CcFragment=kc,e.cst=Lc,e.appendState=Fc,e.useConcent=jc,e.defComputed=Kc,e.defLazyComputed=gc,e.defComputedVal=Sc,e.defWatch=Ec,e.defWatchImmediate=wc,e.bindCcToMcc=Wc,e.default=Pc,Object.defineProperty(e,"__esModule",{value:!0})});
