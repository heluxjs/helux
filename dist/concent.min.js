!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,R,n){"use strict";R=R&&R.hasOwnProperty("default")?R.default:R,n=n&&n.hasOwnProperty("default")?n.default:n;var t,r,$={},ee="$$global",q="$$default",V="$$cc",B="$$concent_void_module_624313307",o="$$CONCENT_ROUTER",T="$$CcClass",U="$$CcFrag",w="$$CcHook",h="$$Cc",G="$$Dispatcher",a="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",te=Symbol("__for_sync_param_ccsync__"),b=Symbol("__for_mock_event__"),i=Symbol("__lazy_handle_state__"),I=10,D=11,x=13,k="dispatch",re="setState",ne="setModuleState",oe="forceUpdate",N="invoke",g="sync",_="module",ae="ref",M="watch",ie={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},c=((t={})[ie.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[ie.CC_MODULE_NOT_FOUND]="module not found!",t[ie.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[ie.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[ie.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[ie.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[ie.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[ie.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[ie.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[ie.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:ee,MODULE_DEFAULT:q,MODULE_CC:V,MODULE_VOID:B,MODULE_CC_ROUTER:o,CC_CLASS:T,CC_FRAGMENT:U,CC_HOOK:w,CC_PREFIX:h,CC_DISPATCHER:G,CC_DISPATCHER_BOX:a,CCSYNC_KEY:te,MOCKE_KEY:b,LAZY_KEY:i,SIG_FN_START:I,SIG_FN_END:D,SIG_FN_QUIT:12,SIG_FN_ERR:x,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:k,SET_STATE:re,SET_MODULE_STATE:ne,FORCE_UPDATE:oe,INVOKE:N,SYNC:g,CATE_MODULE:_,CATE_REF:ae,FN_CU:"computed",FN_WATCH:M,ERR:ie,ERR_MESSAGE:c,default:{MODULE_GLOBAL:ee,MODULE_DEFAULT:q,MODULE_CC:V,ERR:ie,ERR_MESSAGE:c,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2}}),s=((r={})[ee]={},r[q]={},r[V]={},r),d={},l={},F={_computedValue:s,_computedRaw:l,_computedDep:d,getRootComputedValue:function(){return s},getRootComputedDep:function(){return d},getRootComputedRaw:function(){return l}},f={},p={},C={_watchRaw:p,_watchDep:f,getRootWatchDep:function(){return f},getRootWatchRaw:function(){return p}},L={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},ce="is not a plain json object!",K="should be an string array or *!",y=console.error;function v(e){return null!=e&&0<Z(e).length}function m(e){return!v(e)}function ue(e,t){if(void 0===t&&(t=!1),!e)return!1;var r="object"==typeof e;if(r){var n=Array.isArray(e);return t?n:r&&!n}return!1}function S(e,t){var r="";r="string"==typeof e?e:c[e]||"",t&&(r+=t),r||(r="undefined message for code:"+e);var n=Error(r);return n.code=e,n}function E(e,t){return e+"$"+t}function O(e){return e?" --verbose-info: "+e:""}function A(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function j(e){return"%c"+e}var P=function(e){return"------------ CC "+e+" ------------"};function H(e){y(P("WARNING")),e instanceof Error?(y(e.message),y(e.stack)):y(e)}function z(e){console.log(P("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function W(e){if(y(P("WARNING")),y(e),L.isStrict)throw e}function Y(e,t,r){void 0===r&&(r={});var n=e[t];return n||(n=e[t]=r),n}function se(e,t){var r=e[t];return r||(r=e[t]=[]),r}function X(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function J(t,r,n){void 0===r&&(r=[]),Array.isArray(t)?t.length=0:Object.keys(t).forEach(function(e){r.includes(e)||(n?t[e]=n:delete t[e])})}function Z(e){return Object.keys(e)}function Q(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function de(t,r,e){function n(e){e?e[t]=r:window[t]=r}window?n(e):setTimeout(function(){n(e)},3e3)}function le(e,t){for(var r in e)if(!(r in t))return!0;for(var n in t)if(e[n]!==t[n])return!0;return!1}function fe(e,t){var r=[];return e.forEach(function(e){t.includes(e)||r.push(e)}),r}function pe(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:q},e)}var ye="";function ve(){return ye}function me(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function he(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function _e(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function Ce(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!ue(t))throw Error("state "+ce);return t}var ge={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Ke(e,t){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys}}function Se(e,t,r,n,o,a,i,c){var u=n[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,l=u.stateKey_retKeys_,f=u.fnCount;if(e){var p=Z(d),y=Z(i),v=y;return"computed"===r?{pickedFns:p.map(function(e){return Ke(e,d)}),setted:y,changed:v}:(p.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys})}),{pickedFns:s,setted:y,changed:v})}var m=function(r,n){var o=[],a=[];return Z(n).forEach(function(e){var t=n[e];void 0!==t&&(a.push(e),t!==r[e]&&o.push(e))}),{changed:o,setted:a}}(a,i),h=m.setted,_=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var C=h.join(",")+"|"+_.join(",")+"|"+o,g=ge[t][r],K=c?Y(g,c):g,S=K[C];return S?{pickedFns:S.map(function(e){return Ke(e,d)}),setted:h,changed:_}:(function(u,o,s,d,a,l){if(0===o.length)return;var e=a["*"];if(e){var i=0<s.length;e.forEach(function(e){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a={retKey:e,fn:r,depKeys:o};n?i&&u.push(a):u.push(a)})}u.length<l&&function(){var c={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!c[e]){var t=d[e],r=t.fn,n=t.compare,o=t.depKeys,a=!0;n&&!s.includes(i)&&(a=!1),a&&(c[e]=!0,u.push({retKey:e,fn:r,depKeys:o}))}}),u.length===l?"break":void 0):"continue"};e:for(var r=0;r<e;r++){var n=t(r);switch(n){case"continue":continue;case"break":break e}}}()}(s,h,_,d,l,f),K[C]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:_})}function Ee(e,t,r){var n=t[r];return void 0!==n&&(e[r]=n,!0)}function we(t,r,e,n){void 0===r&&(r=[]),void 0===e&&(e=!1),void 0===n&&(n=!1);var o={},a=[];if(!ue(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var i=!0,c=Z(t);return c.length<r.length?c.forEach(function(e){r.includes(e)?Ee(o,t,e)&&(i=!1):n&&a.push(e)}):(r.forEach(function(e){Ee(o,t,e)&&(i=!1)}),n&&(a=fe(c,r))),i&&e&&(o=null),{partialState:o,isStateEmpty:i,ignoredStateKeys:a}}for(var be,Ne=function(K,S,E,w,b,e,N,O,I,U,D,x,A){for(var R=0,T=e,k=!0,t=function(){var e=b(T,1===++R&&U),t=e.pickedFns,n=e.setted,o=e.changed;if(!t.length)return"break";var r=me(),a=r.commit,i=r.getFnCommittedState,c=me(),u=c.commit,s=c.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,r=function(e,t,r,n,o,a){var i;if(L.alwaysGiveState)i=r(n,o,a);else{var c=t[0];i=1===t.length&&"*"!==c&&c===e?r(n[c],o[c],a):r(n,o,a)}return i}(t,e.depKeys,e.fn,N,w,{retKey:t,callInfo:I,isFirstCall:U,commit:a,commitCu:u,setted:n,changed:o,stateModule:S,refModule:E,oldState:w,committedState:T,refCtx:K});"computed"===D?A[t]=r:!1===r&&(k=!1)}),T=i()){var d=function(e,t){void 0===t&&(t=!1),T=e,t&&0===Z(e).length?T=null:(Object.assign(N,T),Object.assign(O,T))},l=we(T,"ref"===x?K.privStateKeys:$[S],!0,!0),f=l.partialState,p=l.ignoredStateKeys;if(f)if(D===M){var y=(x===ae?K.computedDep[K.module]||{}:F._computedDep[S]||{}).stateKey_retKeys_;if(y){var v=[],m={};Z(f).forEach(function(e){y[e]?v.push(e):m[e]=f[e]}),0<v.length&&H("these state keys["+v.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),d(m,!0)}else d(f)}else d(f);if(p.length){var h="they are not "+(x===ae?"private":"module")+", fn is "+x+" "+D;H("these state keys["+p.join(",")+"] are invalid, "+h)}}var _=s();if(_){var C;if("ref"===x)C="computed"===D?K.computedRetKeyFns:K.watchRetKeyFns;else{var g=F.getRootComputedDep()[S]||{};C=g.retKey_fn_||null}C&&Z(_).forEach(function(e){C[e]?A[e]=_[e]:H("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}if(10<R)throw Error("fnCtx.commit may goes endless loop, please check your code")};T;){if("break"===t())break}return k},Oe=F._computedValue,Ie=Z,Ue={},De=function(r,e,t){var n=void 0===t?{}:t,o=n.refCtx,a=void 0===o?null:o,i=n.callInfo,c=void 0===i?{}:i,u=xe(r),s=Ae(r),d=Oe[r],l=F.getRootComputedDep(),f=C.getRootWatchDep(),p=a?a.module:null,y=Object.assign({},u,e),v=Object.assign({},e),m=v;return Ne(a,r,p,u,function(e,t){return Se(t,_,"computed",l,r,u,e)},m,y,v,c,!1,"computed",_,d),Ne(a,r,p,u,function(e,t){return Se(t,_,"watch",f,r,u,e)},m,y,v,c,!1,"watch",_,d),Ie(v).forEach(function(e){s[e]=u[e],Re(r,e),u[e]=v[e]}),v},xe=function(e){return ke[e]},Ae=function(e){return $e[e]},Re=function(e,t){Me[e][t]++},Te=function(){var e;return(e={})[V]={},e[B]={},e[ee]={},e[q]={},e},ke=Te(),$e=Te(),Me={},Fe={getDispatcher:function(){return Ue[G]},isHotReloadMode:function(){return!!Fe.isHot||window&&(window.webpackHotUpdate||he())},runtimeVar:L,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:$,moduleName_isConfigured_:{},connectedModuleName_ccClassKeys_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var r=se($,e);Z(t).forEach(function(e){r.includes(e)||r.push(e)}),Fe.store.setState(e,t)},_state:ke,_prevState:$e,_stateVer:Me,getState:function(e){return e?xe(e):ke},getPrevState:function(e){return e?Ae(e):$e},getStateVer:function(e){return e?Me[e]:Me},setState:function(e,t,r){return De(e,t,r)},setGlobalState:function(e){return De(ee,e)},getGlobalState:function(){return ke[ee]}},reducer:{_reducer:(be={},be[ee]={},be[V]={},be),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:F,watch:C,refStore:{_state:{},setState:function(e,t){var r=Fe.refStore._state,n=Object.assign({},r[e],t);r[e]=n}},init:{_init:{}},ccUkey_ref_:Ue,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},renderKey_ccUkeys_:{},refs:Ue,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"1.5.171",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"destiny"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[]},Le=localStorage.length,je=Fe.refStore._state,Pe=0;Pe<Le;Pe++){var He=localStorage.key(Pe);if(He.startsWith("CCSS_"))try{je[He.substr(5)]=JSON.parse(localStorage.getItem(He))}catch(e){console.error(e)}}var qe=function(e){return e.toLowerCase()===V},Ve=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},Be=O,Ge=S;function ze(e){if(!Ve(e))throw Error("module["+e+"] writing is invalid!");if(qe(e))throw Error("'$$cc' is a built-in module name for concent")}function We(e,t,r){void 0===t&&(t=!0),void 0===r&&(r="");var n=r||"module["+e+"]",o=Fe.store._state;if(ze(e),e!==ee)if(t){if(v(o[e]))throw Ge(ie.CC_MODULE_NAME_DUPLICATE,Be(n))}else if(!o[e])throw Ge(ie.CC_MODULE_NOT_FOUND,Be(n))}function Ye(t,e){var r=Array.isArray(e);if(!r&&"*"!==e)throw Error("storedKeys type err, "+K);r&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var Xe={},Je=function(e,t,r){if(e.code!==ie.CC_MODULE_NAME_DUPLICATE||!Fe.isHotReloadMode())throw e;var n=function(e){e||(e="");for(var t=e.split("\n"),r=t.length,o="",a=0;a<r;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),r=e.length-1,n=[];e.forEach(function(e,t){t!==r&&n.push(e)}),o=n.join(":")}();break}return o}(e.stack),o=r+"|--link--|"+t,a=Xe[o];if(a){if(n!==a)throw e}else Xe[o]=n};function Ze(t,e,r){void 0===r&&(r=!0);var n=t===B?{}:e;try{!function(e,t,r){if(We(e,r),!ue(t))throw Error("module["+e+"]'s state "+ce)}(t,n,r)}catch(e){Je(e,t,"state")}var o=Fe.store,a=o.getState(),i=o.getStateVer();o.getPrevState()[t]=Object.assign({},a[t]=n),i[t]=Z(n).reduce(function(e,t){return e[t]=1,e},{});var c=Object.keys(n);if(Fe.moduleName_stateKeys_[t]=c,t===ee){var u=Fe.globalStateKeys;c.forEach(function(e){u.includes(e)||u.push(e)})}}function Qe(e,t){void 0===t&&(t=!1);var r=Fe.ccUkey_ref_,n=Fe.moduleName_ccClassKeys_,o=Fe.ccClassKey_ccClassContext_,a=[];if(e){if(!Fe.store._state[e])throw Error("module["+e+"] is not declared in store");var i=n[e];if(i&&0!==i.length){var c=i[0],u=o[c];if(!u)throw Error("no ccClassContext found for ccClassKey "+c+"!");a=u.ccKeys}if(e===q&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[G]}}else a=[G];var s=r[a[0]];if(!s)throw Error("cc found no ref!");return s}var et=E,tt=H;function rt(e,t,r,n,o){return function(e,t,r,n,o){void 0===r&&(r="");var a,i=void 0===o?{}:o,c=i.ccClassKey,u=i.ccKey,s=i.throwError;if(void 0===e&&void 0===t)throw Error("api doc: cc.dispatch(action:Action|String, payload?:any, delay?:number, idt?:string), when action is String, second param means payload");try{if(c&&u){var d=et(c,u),l=Fe.refs[d];if(!l)throw Error("no ref found for uniqueCcKey:"+d+"!");a=l.ctx.dispatch}else{var f,p="";"string"==typeof e&&e.includes("/")&&(p=e.split("/")[0]),f="*"!==p?Qe(p):Qe(),a=f.ctx.dispatch}if("string"==typeof e&&e.startsWith("*")){var y=e.split("/").pop(),v=Fe.reducer._fnName_fullFnNames_[y];if(!v)return;var m=[];return v.forEach(function(e){m.push(a(e,t,r,n))}),Promise.all(m)}return a(e,t,r,n)}catch(e){if(s)throw e;tt(e.message)}}(e,t,r,n,o)}function nt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!ue(e))throw Error(t+" "+ce);We(a,!1,t+" is invalid");var r=Fe.reducer,n=r._reducer,o=r._caller,i=r._fnName_fullFnNames_,c=r._module_fnNames_,u=Object.assign({},e);n[a]=u;var s=Y(o,a),d=se(c,a);u.setState||(u.setState=function(e){return e}),Z(u).forEach(function(e){d.includes(e)||d.push(e);var n=a+"/"+e;s[e]=function(e,t,r){return rt(n,e,t,r)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var t=o;o.__fnName&&(u[e]=t=function(e,t,r){return o(e,t,r)}),t.__fnName=e,t.__stateModule=a,t.__ctName=o.__ctName||o.constructor.name;var r=se(i,e);r.includes(n)||r.push(n)})}var ot=0,at=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function it(e){return ot++,(e||function(e){void 0===e&&(e=6);for(var t="",r=0;r<e;r++)t+=at[X()];return t}())+"_"+ot}var ct=Fe.moduleName_stateKeys_,ut=Fe.runtimeVar;function st(e,t,r,n,o,a,i){var c=t.refCtx,u=t.type;if(e!==ae||c.__$$isBSe){if(r){var s,d,l,f=typeof r;if("string"==f)s=ue(n)?((d={})[r]=n,d):((l={})[r]={fn:n,depKeys:o,compare:a,immediate:i},l);else if(ue(r))s=r;else if("function"==f&&!ue(s=r(c)))throw Error("type of "+u+" callback result must be an object");s?function(N,O,I){var e=ut.computedCompare,t=ut.watchCompare,U=ut.watchImmediate,D="computed"===O.type?e:t,x=O.module;Z(I).forEach(function(i){var e=I[i],t=typeof e,r=e;if("function"==t&&(r={fn:e}),ue(r)){var n=r,o=n.fn,a=n.depKeys,c=n.immediate,u=void 0===c?U:c,s=n.compare,d=void 0===s?D:s,l=it("mark");if("*"===a){var f=ft(O,x,i),p=f.isStateKey,y=f.stateKey;if(!p)throw Error("retKey["+i+"] is not a state key of module["+x+"]");dt(N,O,l,y),lt(N,O,x,y,o,a,u,d)}else{if(a&&!Array.isArray(a))throw Error("depKeys must an string array or *");if(a&&0!==a.length){var v="",m=i;if(i.includes("/")){var h=i.split("/"),_=h[0],C=h[1];v=_,m=C}dt(N,O,l,m);var g={};a.forEach(function(e){var t=ft(O,x,e),r=t.isStateKey,n=t.stateKey,o=t.module;if(v&&o!==v)throw Error("including slash both in retKey["+i+"] and depKey["+e+"] founded, but their module is different");var a=se(g,o);if(!r)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+n+"]");a.push(n)}),Z(g).forEach(function(e){lt(N,O,e,m,o,g[e],u,d)})}else{var K=ft(O,x,i),S=K.isStateKey,E=K.stateKey,w=K.module,b=[];!a&&S&&(b=[E]),dt(N,O,l,E),lt(N,O,w,E,o,b,u,d)}}}else H("retKey["+i+"] item type error")})}(e,t,s):H(e+" "+u+" param type error")}}else H(e+" "+u+" must be been called in setup block")}function dt(e,t,r,n){if(e===ae){var o=t.refCtx,a=o.retKey_fnUid_,i=t.type,c=i+"_"+n;if(a[c])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+n+"] duplicate in ref "+i);a[c]=r}}function lt(e,t,r,n,o,a,i,c){var u=Y(t.dep,r,{retKey_fn_:{},stateKey_retKeys_:{},fnCount:0}),s=u.retKey_fn_,d=u.stateKey_retKeys_,l={fn:o,immediate:i,compare:c,depKeys:a};s[n]?e!==ae&&(s[n]=l):(s[n]=l,u.fnCount++);var f=a;"*"===a&&(f=["*"]),e===ae&&(t.retKeyFns[n]=s[n]);var p=t.refCtx;p&&("computed"===t.type?p.hasComputedFn=!0:p.hasWatchFn=!0),f.forEach(function(e){var t=se(d,e);t.includes(n)||t.push(n)})}function ft(e,t,r){var n,o=t,a=r;if(r.includes("/")){var i=r.split("/"),c=i[0];c&&(o=c),a=i[1]}if(o===e.module)n=e.stateKeys;else{if(!(n=ct[o]))throw S(ie.CC_MODULE_NOT_FOUND,O("module["+o+"]"));if(!e.connect[o])throw S(ie.CC_MODULE_NOT_CONNECTED,O("module["+o+"], stateKey["+a+"]"))}return{isStateKey:n.includes(a),stateKey:a,module:o}}var pt=Y,yt=ue;function vt(r,e){if(e){var t="module["+r+"] computed";if(!yt(e))throw Error(t+" "+ce);We(r,!1,t+" is invalid");var n=Fe.computed,o=Fe.store.getState(),a=n.getRootComputedValue(),i=n.getRootComputedDep();n.getRootComputedRaw()[r]=e;var c=o[r];st(_,{module:r,stateKeys:Z(c),dep:i},e);var u=Fe.getDispatcher(),s=Object.assign({},c),d=pt(a,r);Ne(u&&u.ctx,r,u&&u.ctx.module,c,function(e,t){return Se(t,_,"computed",i,r,c,e)},c,c,s,_e(r),!0,"computed",_,d)}}var mt=ue,ht=Y,_t=Z;function Ct(r,e,t){if(void 0===t&&(t=!1),e){var n="module["+r+"] watch";if(!mt(e))throw Error(n+" "+ce);We(r,!1,n+" is invalid");var o=Fe.watch.getRootWatchDep(),a=Fe.watch.getRootWatchRaw(),i=Fe.computed.getRootComputedValue();if(t){var c=a[r];c?Object.assign(c,e):a[r]=e}else a[r]=e;var u=(0,Fe.store.getState)(r);st(_,{module:r,stateKeys:_t(u),dep:o},e);var s=Fe.getDispatcher(),d=Object.assign({},u),l=ht(i,r);Ne(s&&s.ctx,r,s&&s.ctx.module,u,function(e,t){return Se(t,_,"watch",o,r,u,e)},u,u,d,_e(r),!0,"watch",_,l)}}var gt=[I,D,12,x,14,15],Kt={};function St(t,r){Kt[t].forEach(function(e){e({sig:t,payload:r})})}function Et(e,t){function r(e,t){var r=Kt[e];r?r.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)}gt.forEach(function(e){return Kt[e]=[]});var wt=function(e){if(!Fe.errorHandler)throw e;Fe.errorHandler(e)},bt=0,Nt={},Ot={},It={},Ut={};function Dt(){return++bt}function xt(e,t,r,n){if(r){var o=n[e];o||(o=n[e]={});var a=o[t];a?Object.assign(a,r):o[t]=r}}function At(e,t,r){xt(e,t,r,Nt)}function Rt(e,t,r){return At(e,t,r),function(e){var t=function(e){return Nt[e]}(e),r=[];return Z(t).forEach(function(e){r.push({module:e,state:t[e]})}),r}(e)}function Tt(e){delete Nt[e]}var kt={},$t=function(e,t,r){void 0===r&&(r=1e3);var n=kt[t];n&&clearTimeout(n),kt[t]=setTimeout(function(){delete kt[t],e()},r)};function Mt(e,r,n,t,o,a,i){if(void 0===i&&(i=!1),!e.hasWatchFn)return!0;var c=Object.assign({},t),u=e.watchDep,s=e.module,d=e.ccUniqueKey,l=e.refComputed,f=Object.assign({},n,t),p=Ne(e,r,s,n,function(e,t){return Se(t,"ref","watch",u,r,n,e,d)},t,f,c,o,a,"watch",ae,l);return i&&Object.assign(t,c),p}function Ft(e,r,n,t,o,a,i){void 0===a&&(a=!1),void 0===i&&(i=!1);var c=Object.assign({},t);if(!e.hasComputedFn)return c;var u=e.computedDep,s=e.module,d=e.refComputed,l=e.ccUniqueKey,f=Object.assign({},n,t);return Ne(e,r,s,n,function(e,t){return Se(t,ae,"computed",u,r,n,e,l)},t,f,c,o,a,"computed",ae,d),i&&Object.assign(t,c),c}var Lt=ue,jt=H,Pt=v,Ht=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},qt=Z,Vt=fe,Bt=1,Gt=2,zt=oe,Wt=re,Yt=ne,Xt=N,Jt=g,Zt=15,Qt=1,er=2,tr=3,rr=Fe.store,nr=rr.setState,or=rr.getPrevState,ar=Fe.middlewares,ir=Fe.moduleName_ccClassKeys_,cr=Fe.ccClassKey_ccClassContext_,ur=Fe.connectedModuleName_ccClassKeys_,sr=Fe.refStore,dr=Fe.moduleName_stateKeys_,lr=Fe.ccUkey_ref_,fr=Fe.renderKey_ccUkeys_;function pr(e,t,r){var n=void 0===t?{}:t,o=n.module,a=n.skipMiddleware,i=void 0!==a&&a,c=n.payload,u=n.reactCallback,s=n.type,d=n.calledBy,l=void 0===d?Wt:d,f=n.fnName,p=void 0===f?"":f,y=n.renderKey,v=void 0===y?"":y,m=n.delay,h=void 0===m?-1:m;if(void 0!==e)if(Lt(e)){var _=r.ctx,C=_.module,g=_.ccUniqueKey,K=_.ccKey,S=function(e,t){return e===t?Bt:Gt}(o,C),E={payload:c,renderKey:v,ccKey:K,module:o,fnName:p},w=function(e,t,r){var n=we(t,dr[e],!0).partialState;if(n){var o=nr(e,n,r);return Object.assign(n,o),n}return n}(o,e,{refCtx:S===Bt?r.ctx:null,callInfo:E});Object.assign(e,w),yr(r,E,v,l,e,S,u,function(e,t){e===Qt&&!w||St(Zt,{committedState:t,sharedState:w,module:o,type:function(e,t){return[zt,Wt,Yt,Xt,Jt].includes(e)?"ccApi/"+e:"dispatch/"+t}(l,s),ccUniqueKey:g,renderKey:v}),w&&function(e,t,r,n,o,a,i){var c=function(){!function(d,e,l,t,r,n){if(!l)return;var o=e.ctx,f=o.ccUniqueKey,a=cr[o.ccClassKey].renderKeyClasses,p=t===Bt,y=ir[r]||[],v=[];if(n){y="*"===a?[]:Vt(y,a);var i=fr[n]||[],c=function(e,t){var r=e.indexOf(t);if(-1<r){var n=e.slice();return n.splice(r,1),n}return e}(i,f);(function(e,n,o,a){e.forEach(function(e){var t=lr[e],r=t.ctx.module;r===n?yr(t,a,null,"broadcastState",o,Bt):z("although ref's renderKey matched but its module "+r+" mismatch target module "+n+", cc will ignore trigger it re-render")})})(v=c,r,l,d)}for(var u=y.length,s=function(e){var t=y[e],r=cr[t],n=r.ccKeys,o=r.watchedKeys,a=r.originalWatchedKeys;if(0===n.length)return"continue";if(0===o.length)return"continue";var i=void 0;if("*"===a)i=l;else{var c=we(l,o,!0),u=c.partialState,s=c.isStateEmpty;if(s)return"continue";i=u}n.forEach(function(e){if(!(v.includes(e)||e===f&&p)){var t=lr[e];t&&yr(t,d,null,"broadcastState",i,Bt)}})},m=0;m<u;m++)s(m);!function(r,n,o){var a=qt(n);(ur[r]||[]).forEach(function(e){var t=cr[e];!function(e,o,a,t,i){var r=e.connectedModuleKeyMapping;if(1===e.connectedModule[o]){for(var n=e.ccKeys,c=!1,u=t.length,s=0;s<u;s++){var d=o+"/"+t[s];if(r[d]){c=!0;break}}if(!0===c){var l=or(o);n.forEach(function(e){var t=lr[e];if(t&&!0!==t.__$$isUnmounted){var r=t.ctx;Ft(r,o,l,a,i);var n=Mt(r,o,l,a,i);n&&r.__$$ccForceUpdate()}})}}}(t,r,n,a,o)})}(r,l,d)}(e,t,r,n,o,a)};if(0<i){var u=Ht(t.ctx.ccUniqueKey,r);$t(c,u,i)}else c()}(E,r,w,S,o,v,h)},i,{calledBy:l,type:s,payload:c,renderKey:v,delay:h,ccKey:K,ccUniqueKey:g,committedState:e,refModule:C,module:o,fnName:p,sharedState:w})}else jt("your committed state "+ce)}function yr(e,t,r,n,o,a,i,c,u,s){var d=e.state,l=e.ctx;if(!0===e.__$$isUnmounted||a!==Bt||n!==zt&&!Pt(o))return i&&i(d),c&&c(Qt,o);var f=l.module,p=l.storedKeys,y=l.ccUniqueKey,v=tr;if(r&&(v=er,l.renderKey!==r))return c&&c(Qt,o);if(0<p.length){var m=we(o,p),h=m.partialState;if(!m.isStateEmpty){if(!0===l.persistStoredKeys){var _=we(d,p),C=Object.assign({},_.partialState,h);localStorage.setItem("CCSS_"+y,JSON.stringify(C))}sr.setState(y,h)}}function g(){return l.__$$ccSetState(K,i,S)}var K=Ft(l,f,d,o,t),S=Mt(l,f,d,K,t,!1,!0);c?(s.state=K,function(e,r,n){if(!0!==e){var o=ar.length;if(0<o){var a=0;!function e(){if(a===o)n();else{var t=ar[a];a++,"function"==typeof t?t(r,e):(jt("found one middleware is not a function"),e())}}()}else n()}else n()}(u,s,function(){g(),c(v,K)})):g()}function vr(e,t,r,n,o){void 0===n&&(n=-1);try{Qe(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:r,delay:n,skipMiddleware:o})}catch(e){W(e)}}var mr=Fe.store.setState,hr=Fe.globalStateKeys,_r="note! you are trying set state for global module, but the state you commit include some invalid keys which is not declared in cc's global state, \ncc will ignore them, but if this result is not as you expected, please check your committed global state!";var Cr=H,gr=ue,Kr=Fe.store,Sr=Kr.getState,Er=Kr.setState,wr=Fe.reducer._reducer,br=Fe.computed._computedValue,Nr=S,Or=O;function Ir(e,t){void 0===t&&(t=!0);try{return We(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;xr(e)}(e,t),!1}}function Ur(o,a){return function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e?a(e):o.apply(void 0,r)}}function Dr(e,t,r,n){var o;return!0===e?(function(e){It[e]=!0}(o=Dt()),n[o]=1):n[o=t||Dt()]||(n[o]=1),{_chainId:o,_oriChainId:r||o}}function xr(e,t){e&&(t?t(e):(Cr(e),Fe.errorHandler&&Fe.errorHandler(e)))}function Ar(e,t,r){return function(n,o,a,i){return new Promise(function(e,t){var r=Object.assign(a,{__innerCb:Ur(e,t)});n(o,r,i)}).catch(wt)}(Mr,e,t,r)}function Rr(e,t,r){return Ar(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},r)}function Tr(i,c){return function(e,t,r){var n=i.ctx,o=Object.assign({},n.state,e);n.state=o,c&&(c.state=o);var a=n.type===w;(a&&(i.state=o),r)?(n.renderCount+=1,a?((n.__setter2||n.__setter1)(o),t&&t(o)):n.reactSetState(e,t)):a||Object.assign(i.state,e)}}function kr(r){return function(e){var t=r.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function $r(_,e){var t=void 0===e?{}:e,C=t.chainId,g=t.oriChainId,K=t.isLazy,r=t.delay,S=void 0===r?-1:r,n=t.isSilent,E=void 0!==n&&n,o=t.chainId_depth_,w=void 0===o?{}:o;return function(e,t,r,n){var o=K,a=E,i="",c=null!=n?n:S;if(gr(r)){var u=r.lazy,s=r.silent,d=r.renderKey,l=r.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(i=d),void 0!==l&&(c=l)}else i=r;var f,p,y=Dr(o,C,g,w),v=typeof e,m={callerRef:_,calledBy:N,module:_.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:w,delay:c,renderKey:i},h=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==v)return e.__fnName&&(e.name=e.__fnName),Rr(e,m,t);if("object"!=v)throw h;if(p=Array.isArray(e)?(f=e[1],e[0]):(f=e.fn,e.module),"function"!=typeof f)throw h;return p&&(m.module=p),Rr(f,m,t)}}function Mr(f,e,p){var y=e.callerRef,v=y.ctx.module,t=e.module,m=void 0===t?v:t,r=e.context,h=void 0!==r&&r,_=e.__innerCb,C=e.type,g=e.calledBy,K=e.fnName,n=e.delay,S=void 0===n?-1:n,E=e.renderKey,w=e.chainId,b=e.oriChainId,N=e.chainId_depth_,O=e.isSilent;!function(e,t,r,n){var o=r;Ir(e,!1)?(e!==t&&r&&(Cr(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),n(null,o)):n(Error("inputModule:"+e+" invalid"),null)}(m,v,e.cb,function(e,n){if(e)return xr(e,_);var o,t=Sr(m),r={};if(o=w===b&&1===N[w],h){N[w]=N[w]+1;var a=Fr(y,!1,O,m,E,S,w,b,N),i=Fr(y,!1,!0,m,E,S,w,b,N),c=Fr(y,!0,O,m,E,S,w,b,N),u=$r(y,{delay:S,chainId:w,oriChainId:b,chainId_depth_:N}),s=$r(y,{isLazy:!0,delay:S,oriChainId:b,chainId_depth_:N}),d=$r(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:b,chainId_depth_:N}),l=function(e){return Ut[e]}(w)||{};r={module:m,callerModule:v,committedStateMap:l,committedState:l[m]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:c,silentDispatch:i,dispatchLazy:c,dispatchSilent:i,rootState:Sr(),globalState:Sr(ee),moduleState:t,moduleComputed:br[m]||{},setState:function(e){return a("setState",e,{silent:O,renderKey:E,delay:S})},refCtx:y.ctx}}!1===O&&St(I,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:f}),new Promise(function(e){return e(f(p,t,r))}).then(function(e){N[w]=N[w]-1;var t=1===N[w];!function(e,t,r){xt(e,t,r,Ut)}(w,m,e);var r=[];!1===O&&(St(D,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:f}),!function(e){return!0===It[e]}(w)?r=[{module:m,state:e}]:t?function(e){return!0===Ot[e]}(w)||(r=Rt(w,m,e),Tt(w)):At(w,m,e)),r.forEach(function(e){e.state&&pr(e.state,{renderKey:E,module:e.module,reactCallback:n,type:C,calledBy:g,fnName:K,delay:S,payload:p},y)}),o&&(Tt(w),function(e){delete Ut[e]}(w)),_&&_(null,e)}).catch(function(e){St(x,{isSourceCall:o,calledBy:g,module:m,chainId:w,fn:f}),xr(e,_)})})}function Fr(N,O,I,U,D,x,A,R,T){return void 0===D&&(D=""),void 0===x&&(x=-1),void 0===T&&(T={}),function(e,r,t,n){void 0===e&&(e={});var o=O,a=I,i="",c=n||x;if(gr(t)){i=D;var u=t.lazy,s=t.silent,d=t.renderKey,l=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(i=d),void 0!==l&&(c=l)}else i=t||D;function f(){return $r(N,{chainId:m,oriChainId:h,isLazy:o,chainId_depth_:T})(e,r,i,c)}var p,y,v=Dr(o,A,R,T),m=v._chainId,h=v._oriChainId,_=typeof e,C=U;if(_&&"object"==_){if(Array.isArray(_))return f();var g=e.module;g&&(C=g),p=e.type,y=e.cb}else{if("string"!=_&&"function"!=_)return Promise.reject(Nr(ie.CC_DISPATCH_PARAM_INVALID));var K=e;if("function"==_){var S=e.__fnName;if(!S)return f();K=S,1==T[h]&&(C=e.__stateModule)}var E=K.split("").filter(function(e){return"/"===e}).length;if(0===E)p=K;else{if(1!==E)return Promise.reject(Nr(ie.CC_DISPATCH_STRING_INVALID,Or(K)));var w=K.split("/"),b=w[0];b&&(C=b),p=w[1]}}return"*"===C?Promise.reject("cc instance api dispatch do not support multi dispatch, please use top api[cc.dispatch] instead!"):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,r=t.callerRef,n=t.module,o=t.renderKey,a=t.isSilent,i=t.type,c=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,l=void 0===d?-1:d,f=t.chainId,p=t.oriChainId,y=t.chainId_depth_,v=wr[n];if(!v)return s(Error("no reducerMap found for module:["+n+"]"));var m=v[i];if(!m)return s(Error("no reducer fn found for ["+n+"/"+i+"], is these fn you want:"+Object.keys(v)));Mr(m,{callerRef:r,module:n,type:i,cb:u,context:!0,__innerCb:s,calledBy:k,delay:l,renderKey:o,isSilent:a,chainId:f,oriChainId:p,chainId_depth_:y},c)}({callerRef:N,module:C,type:p,payload:r,cb:y,__innerCb:Ur(e,t),delay:c,renderKey:i,isSilent:a,chainId:m,oriChainId:h,chainId_depth_:T})}).catch(wt)}}function Lr(o){return function(t){try{vr(o,t)}catch(e){if(o===ee)!function(e,t,r){void 0===t&&(t=""),void 0===r&&(r="");var n=we(e,hr),o=n.partialState,a=n.isStateEmpty,i=Z(o),c=Z(e);if(i.length<c.length){var u=c.filter(function(e){return!i.includes(e)});H(_r+",invalid keys: "+u.join(",")+", make sure the keys is invalid and their values are not undefined"),console.log(e),t&&H("module is "+t),r&&H("ccClassKey is "+r)}mr(ee,o)}(t,o);else{var r=Sr(o);if(!r)return H("invalid module "+o);var n=we(t,Z(r));n.isStateEmpty||Er(o,n.partialState)}z("no ccInstance found for module["+o+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var jr=ue,Pr=Ce;function Hr(t,e){if(!Fe.isStartup)throw Error("configure must be called after run!");if(!jr(e))throw Error("param config "+ce);if(t===ee)throw Error("configuring global module is not allowed");var r=e.reducer,n=e.computed,o=e.watch,a=e.init,i=e.isClassSingle,c=Pr(e.state);if(r&&!jr(r))throw Error("config.reducer "+ce);if(Ze(t,c,!0),nt(t,r),n&&vt(t,n),o&&Ct(t,o),Fe.moduleSingleClass[t]=!0===i,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){Lr(t)(e)})}Fe.moduleName_isConfigured_[t]=!0,St(14,t)}function qr(n,o){var a={};return Z(n).forEach(function(e){function t(){return r.apply(void 0,arguments)}var r=n[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function Vr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Br(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Gr=Z,zr=ue,Wr=Fe.store._state;var Yr=m,Xr=S,Jr=Fe.featureStr_classKey_,Zr=Fe.userClassKey_featureStr_,Qr=Fe.ccClassKey_ccClassContext_,en=0;var tn=Fe.moduleName_stateKeys_,rn=Fe.moduleName_ccClassKeys_,nn=Fe.moduleSingleClass,on=Fe.ccClassKey_ccClassContext_,an=Fe.connectedModuleName_ccClassKeys_,cn=Fe.computed._computedValue,un=function(e,t){var r=!1,n=!1;if(!Array.isArray(e))return{duplicate:r,notArray:!0,keyElementNotString:n};if(!Array.isArray(t))return{duplicate:r,notArray:!0,keyElementNotString:n};var o=e.length,a=t.length;e:for(var i=0;i<o;i++){var c=e[i];if("string"!=typeof c){n=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){n=!0;break e}if(s===c){r=!0;break e}}}return{duplicate:r,notArray:!1,keyElementNotString:n}},sn=O;function dn(e,t,r,n,o,a,i,c,u){void 0===e&&(e=q),void 0===a&&(a=[]),!0===c&&function(){if(!0!==Fe.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;We(e,!1,"module["+e+"] is not configured in store"),Ye(tn[e],a);var d=i;Array.isArray(i)&&(d={},i.forEach(function(e){return d[e]="*"}));var l,f=function(e,t,r){if(!r)return[];if("*"===r)return tn[e];var n=un(r,[]);if(n.notArray||n.keyElementNotString)throw Error("watchedKeys "+K+" "+sn("ccClassKey:"+t));return r}(e,t,o),p=function(o,e,t,a){if(!zr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+ce);function i(e){return c+" module["+e+"]'s value must be * or array of string"}var c="CcFragment or CcClass's prop connect is invalid,",r=Gr(o);r.sort();var u=[],s={};if(r.forEach(function(t){var r=Wr[t],n=a+"_"+t+"/";if(void 0===r)throw Error(c+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e)throw Error(i(t));u.push(n+"*"),Gr(r).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(i(t));e.forEach(function(e){if(!r.hasOwnProperty(e))throw Error(c+" module["+t+"]'s key["+e+"] not declared in cc store ");n+=e+",",s[t+"/"+e]=e}),u.push(n)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var n=t+"/"+e.join(",");u.push(n)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:r}}(d,f),y=p.connectedModuleKeyMapping,v=p.connectedModuleNames,m=function(e,t,r,n,o,a,i){if(void 0===i&&(i=""),!i){if(t===q&&Yr(r)&&0===n.length)return o+"0";var c=o+":"+a,u=Jr[c];return u||(Jr[c]=u=""+o+ ++en)}if(i.startsWith(h))throw Error("user can not specify a classKey["+i+"] starts with $$Cc");if(!e&&i.toLowerCase()==G.toLowerCase())throw Error(G+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(Qr[i]){if(Zr[i]!==a)throw Xr(ie.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+i+"] duplicate")}else Zr[i]=a;return i}(s,e,d,f,n,p.featureStr,t);if(r){if(!Array.isArray(r)&&"*"!==r)throw Error("renderKeyClasses type err, it is must be an array or string *");l=r}else l=[m];return function(r,e,t,n,o,a,i){var c=on[r];c||(c=function(e,t,r,n,o){return{module:e,ccClassKey:t,renderKeyClasses:r,originalWatchedKeys:o,watchedKeys:n,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(t,r,e,o,n),on[r]=c);var u={},s={};if(a){var d=Fe.store._state,l=c.connectedState;i.forEach(function(e){l[e]=d[e],s[e]=cn[e],u[e]=1;var t=se(an,e);t.includes(r)||t.push(r)}),c.connectedModuleKeyMapping=a,c.connectedModule=u,c.connectedComputed=s}}(m,l,e,o,f,y,v),function(e,t){var r=se(rn,e);if(!0===nn[e]&&1<=r.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+r[0]+"] has been registered!");r.includes(t)||r.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:f,_ccClassKey:m}}var ln=H,fn=S,pn=O,yn=j,vn=A,mn=Fe.runtimeVar,hn=Fe.ccClassKey_ccClassContext_,_n=Fe.ccUkey_ref_,Cn={};function gn(e,t,r,n){function o(){_n[e]=t,r.push(e)}!function(e){void 0===Cn[e]?Cn[e]=1:Cn[e]+=1}(e),n?setTimeout(o,n):o()}function Kn(e,t,r,n,o){var a=hn[r],i=a.ccKeys;mn.isDebug&&console.log(yn("register ccKey "+o+" to CC_CONTEXT"),vn());var c=Fe.isHotReloadMode();if(i.includes(o)){var u=function(){throw fn(ie.CC_CLASS_INSTANCE_KEY_DUPLICATE,pn("ccClass:"+r+",ccKey:"+o))};if(c){var s=function(e){return void 0===Cn[e]?0:Cn[e]}(o);if(t&&0<s)throw fn(ie.CC_CLASS_INSTANCE_MORE_THAN_ONE,pn("ccClass:"+r));1<s&&u(),ln("\n        found ccKey["+n+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+pn("ccClassKey:"+r+" ccKey:"+n+" ccUniqueKey:"+o)+"\n      "),gn(o,e,i,600)}else u()}else gn(o,e,i);return a}var Sn=Fe.event_handlers_,En=Fe.handlerKey_handler_,wn=Fe.ccUKey_handlerKeys_,bn=Fe.ccUkey_ref_,Nn=function(e,t,r){return e+"$"+t+"$"+r},On=se,In=H;function Un(e,t,r,n,o){void 0===o&&(o=null);var a=Sn[e];if(a){var i=a;return n?i=a.filter(function(e){return e.ccUniqueKey===n}):r?i=a.filter(function(e){return e.ccClassKey===r}):t&&(i=a.filter(function(e){return e.module===t})),void 0!==o&&(i=i.filter(function(e){return e.identity===o})),i}return[]}function Dn(e){var o={},n=[];e.forEach(function(e){var t=e.ccUniqueKey,r=e.event;delete En[e.handlerKey],o[t]=1,n.includes(r)||n.push(r)}),n.forEach(function(e){var n=Sn[e];n&&(n.forEach(function(e,t){var r=e.ccUniqueKey;1===o[r]&&(n[t]=null,delete wn[r])}),Sn[e]=n.filter(function(e){return null!==e}))})}function xn(e,t,r,n,o,a){var i=On(Sn,n);if("function"!=typeof a)return In("event "+n+"'s handler is not a function!");var c=Nn(r,n,o),u=On(wn,r),s=i.findIndex(function(e){return e.handlerKey===c}),d={event:n,module:e,ccClassKey:t,ccUniqueKey:r,identity:o,handlerKey:c,fn:a};-1<s?i[s]=d:(i.push(d),u.push(c)),En[c]=d}function An(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o,a,i,c,u=null;"string"==typeof e?o=e:(o=e.name,u=e.identity,a=e.module,i=e.ccClassKey,c=e.ccUniqueKey),Un(o,a,i,c,u).forEach(function(e){var t=e.handlerKey;if(bn[e.ccUniqueKey]&&t){var r=En[t];r&&r.fn.apply(r,n)}})}function Rn(e,t){Dn(Un(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Tn(e){var t=wn[e];if(t){var r=[];t.forEach(function(e){return r.push(En[e])}),Dn(r)}}function kn(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var $n=Object.freeze({bindEventHandlerToCcContext:xn,findEventHandlersToPerform:An,findEventHandlersToOff:Rn,offEventHandlersByCcUniqueKey:Tn,getEventItem:kn});var Mn=H,Fn=E;function Ln(e){return e?e.props||e:{}}var jn=Fe.store.getState;function Pn(e){var t=Q(e);return t?t.currentTarget.value:e}var Hn=function(e,t,r){var n,o=r.module,a=r.state,i=!1,c="",u="",s="",d=void 0,l=-1,f=!1,p=e[te],y=e.type,v=!1;if(void 0!==p)if(c=p,l=e.delay,u=e.rkey,"val"===y||"int"===y){i="int"===y;var m=e.val;if(void 0===m)s=Pn(t);else if("function"==typeof m){var h,_,C;if(c.includes("/")){var g=c.split("/");h=g[1],_=c,C=g[0]}else _=o+"/"+(h=c),C=o;v=!0,d=m(Pn(t),h,{moduleState:jn(C),fullKeyPath:_,state:a,refCtx:r})}else s=m}else{if("bool"!==y)return null;f=!0}else{var K=Q(t);if(!K)return null;var S=K.currentTarget;s=S.value;var E=S.dataset;if(i="int"===y||void 0!==E.ccint,!(c=E.ccsync))return null;u=E.ccrkey;var w=E.ccdelay;if(w)try{l=parseInt(w)}catch(e){}}return(n={})[b]=1,n.currentTarget={value:s,extraState:d,hasSyncCb:v,dataset:{ccsync:c,ccint:i,ccdelay:l,ccrkey:u}},n.isToggleBool=f,n};var qn=function(e,t,r,n,o){var a=t;!0!==r||Number.isNaN(a=parseInt(t))&&(H(t+" can not convert to int but you set ccint as true!！"),a=t);var i=null,c=[];if(e.includes("/")){var u=e.split("/"),s=u[1];i=u[0],c=s.includes(".")?s.split("."):[s]}else c=e.includes(".")?e.split("."):[e];if(1===c.length){var d,l,f=c[0];return!0!==o?{module:i,state:(d={},d[f]=a,d)}:{module:i,state:(l={},l[f]=!n[f],l)}}var p,y=c[0],v=c.slice(1),m=n[y];return function e(t,r,n,o,a,i){void 0===i&&(i=!1);var c=r[o];if(n===o)if(!0===i){var u=t[c];"boolean"!=typeof u?H("key["+c+"]'s value type is not boolean"):t[c]=!u}else t[c]=a;else e(t[c],r,n,++o,a,i)}(m,v,v.length-1,0,a,o),{module:i,state:(p={},p[y]=m,p)}},Vn=Fe.store.getState;function Bn(e,t,r){var n=t.ctx,o=n.module,a=null;if(a=e[b]?e:Hn(e,r,n)){var i=a.currentTarget,c=i.dataset,u=i.value,s=i.extraState,d=i.hasSyncCb;r&&r.stopPropagation&&r.stopPropagation();var l=c.ccsync,f=c.ccint,p=c.ccdelay,y=c.ccrkey;if(l.startsWith("/")&&(c.ccsync=""+o+l),l.includes("/")){var v=l.split("/")[0];We(v,!1);var m=n.ccKey,h=n.ccUniqueKey;if(d)return void(s&&pr(s,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t));var _=v!==o?Vn(v):t.state;pr(qn(l,u,f,_,a.isToggleBool).state,{calledBy:g,ccKey:m,ccUniqueKey:h,module:v,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=qn(l,u,f,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var Gn=Fe.refStore,zn=Fe.ccClassKey_ccClassContext_,Wn=Fe.moduleName_stateKeys_,Yn=Fe.store.getState,Xn=Fe.moduleName_ccClassKeys_,Jn=Fe.computed._computedValue,Zn=Fe.renderKey_ccUkeys_,Qn=Z,eo=S,to=O,ro=se,no=H,oo=0;function ao(a,e,t){var r;void 0===t&&(t=5);var n=a.setState.bind(a),o=a.forceUpdate.bind(a),i=e.isSingle,c=e.ccClassKey,u=e.ccKey,s=void 0===u?"":u,d=e.module,l=e.type,f=e.state,p=e.storedKeys,y=void 0===p?[]:p,v=e.persistStoredKeys,m=e.watchedKeys,h=e.connect,_=void 0===h?{}:h,C=e.tag,g=void 0===C?"":C,K=e.ccOption,S=void 0===K?{}:K,E=d,w={};w.persistStoredKeys=void 0===S.persistStoredKeys?void 0!==v&&v:S.persistStoredKeys,w.tag=S.tag||g;var b=function(e,t,r,n){var o;if(e)r&&Mn("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+r+"]"),o=t;else if(r)o=Fn(t,r);else{var a=it(n);o=Fn(t,a)}return o}(i,c,s,w.tag);if(w.renderKey=S.renderKey||b,ro(Zn,w.renderKey).push(b),w.storedKeys=function(e,t,r,n){var o=r||n;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(Ye(t,o),o):[]}(f,Wn[E],S.storedKeys,y),s&&!c)throw Error("missing ccClassKey while init a cc ins with ccKey["+s+"]");if(0<w.storedKeys.length&&!s)throw eo(ie.CC_STORED_KEYS_NEED_CCKEY,to("ccClassKey["+c+"]"));var N=zn[c],O=N.connectedComputed||{},I=N.connectedState||{},U=Yn(d),D=Jn[d]||{},x=Jn[ee]||{},A=Yn(ee),R=fe(Qn(f),Wn[E]),T=Gn._state[b]||{},k=Object.assign({},f,T,U),$=Qn(a.state=k);Kn(a,i,c,s,b);var M=se(Xn,d);M.includes(c)||M.push(c);function F(e,t){pr(e,t,a)}function L(e,t,r,n,o,a){F(t,{calledBy:r,module:e,renderKey:o,delay:a,reactCallback:n})}function j(e,t,r,n,o){L(e,t,ne,r,n,o)}function P(e,t,r,n,o){"string"==typeof e?j(e,t,r,n,o):L(E,e,re,t,r,n)}function H(e,t,r){L(E,a.state,oe,e,t,r)}var q=[],V=[],B=[],G={effectItems:V,eid_effectReturnCb_:{},effectPropsItems:B,eid_effectPropsReturnCb_:{}},z={},W={},Y=Ln(a.props),X=((r={type:l,isSingle:i,module:d,ccClassKey:c,ccKey:s,ccUniqueKey:b,renderCount:1,initTime:Date.now(),watchedKeys:m,privStateKeys:R,connect:_,persistStoredKeys:w.persistStoredKeys,storedKeys:w.storedKeys,renderKey:w.renderKey,tag:w.tag,prevProps:Y,props:Y,mapped:{},prevState:k,state:k,moduleState:U,globalState:A,connectedState:I,extra:{},staticExtra:{},refComputed:{},moduleComputed:D,globalComputed:x,connectedComputed:O,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},r.prevModuleStateVer={},r.stateKeys=$,r.onEvents=q,r.computedDep={},r.computedRetKeyFns={},r.watchDep={},r.watchRetKeyFns={},r.execute=null,r.auxMap=z,r.effectMeta=G,r.retKey_fnUid_={},r.reactSetState=n,r.reactForceUpdate=o,r.setState=P,r.__setState=P,r.setModuleState=j,r.forceUpdate=H,r.__forceUpdate=H,r.changeState=F,r.refs=W,r.useRef=function(t){return function(e){return W[t]={current:e}}},r.__$$ccForceUpdate=kr(a),r.__$$ccSetState=Tr(a),r);a.ctx=X,a.setState=P,a.forceUpdate=H,X.initState=function(e){return a.__$$isBF?ue(f)?(a.state=Object.assign({},f,e,T,U),void(X.prevState=X.state=a.state)):no("state "+ce):no("ctx.initState can only been called before first render period!")};var J=Fr(a,!1,!1,E);if(X.dispatch=J,1<t&&(X.lazyDispatch=Fr(a,!0,!1,E),X.silentDispatch=Fr(a,!1,!0,E),X.dispatchLazy=X.lazyDispatch,X.dispatchSilent=X.silentDispatch,X.invoke=$r(a),X.lazyInvoke=$r(a,{isLazy:!0}),X.silentInvoke=$r(a,{isLazy:!1,isSilent:!0}),X.invokeLazy=X.lazyInvoke,X.invokeSilent=X.silentInvoke,X.setGlobalState=function(e,t,r,n){L(ee,e,re,t,r,n)}),2<t&&(X.syncBool=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return Bn.bind(null,((n={})[te]=e,n.type="bool",n.delay=r,n.rkey=t,n),a);Bn({type:"bool"},e,a)},X.sync=function(e,t,r,n){var o;if(void 0===r&&(r=""),void 0===n&&(n=-1),"string"==typeof e)return Bn.bind(null,((o={})[te]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a);Bn({type:"val"},a,e)},X.set=function(e,t,r,n){var o;void 0===r&&(r=""),void 0===n&&(n=-1),Bn(((o={})[te]=e,o.type="val",o.val=t,o.delay=n,o.rkey=r,o),a)},X.setBool=function(e,t,r){var n;void 0===t&&(t=""),void 0===r&&(r=-1),Bn(((n={})[te]=e,n.type="bool",n.delay=r,n.rkey=t,n),a)},X.syncInt=function(e,t,r){var n;if(void 0===t&&(t=""),void 0===r&&(r=-1),"string"==typeof e)return Bn.bind(null,((n={})[te]=e,n.type="int",n.delay=r,n.rkey=t,n),a);Bn({type:"int"},a,e)}),3<t){X.emit=function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];An.apply($n,[kn(e)].concat(r))},X.off=function(e,t){var r=void 0===t?{}:t,n=r.module,o=r.ccClassKey,a=r.ccUniqueKey,i=void 0===a?b:a,c=kn(e);Rn(c.name,{module:n,ccClassKey:o,ccUniqueKey:i,identity:c.identity})};var Z=function(e,t,r){void 0===r&&(r=!0);var n=kn(e),o=n.name,a=n.identity,i=void 0===a?null:a;r?q.push({event:o,handler:t,identity:i}):xn(E,c,b,o,i,t)};X.on=Z,X.onDirectly=function(e,t){Z(e,t,!1)}}if(4<t){X.execute=function(e){return X.execute=e},X.aux=function(e,t){if(z[e])throw Error("auxMethod["+e+"] already defined!");z[e]=t},X.watch=function(a){return function(e,t,r,n,o){st(ae,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,r,n,o)}}(X),X.computed=function(o){return function(e,t,r,n){st(ae,{type:"computed",refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep},e,t,r,n)}}(X);var Q=function(i){return function(e,t,r,n){var o;if(void 0===r&&(r=!0),"function"!=typeof e)throw Error("type of defineEffect first param must be function");if(null!=t&&!Array.isArray(t))throw Error("type of defineEffect second param must be one of them(array, null, undefined)");var a=((o={fn:e,depKeys:t,eId:n||Symbol("__autoGen_"+ ++oo+"__")}).depKeys=t,o.immediate=r,o);i.push(a)}};X.effect=Q(V),X.effectProps=Q(B)}}var io=Fe.store.getState;var co=Y,uo=Z,so=H,lo=Fe.reducer,fo=lo._module_fnNames_,po=lo._caller,yo=Fe.runtimeVar;function vo(r,e,t){r.__$$isUnmounted=!1,r.__$$isBF=!0;var n=r.ctx;n.__$$isBSe=!0;var a=n.connectedReducer,i=n.moduleReducer,c=n.dispatch,u=n.module,o=uo(n.connect).slice();if(o.includes(u)?so("module["+u+"] is in belongTo and connect both, it will cause redundant render."):o.push(u),o.forEach(function(o){var e;e=o===u?i:co(a,o),(fo[o]||[]).forEach(function(n){e[n]=function(e,t,r){return c(o+"/"+n,e,t,r)}})}),n.reducer=po,e){if("function"!=typeof e)throw Error("type of setup must be function");var s=e(n)||{};if(!ue(s))throw Error("type of setup return result must be an plain json object");(!0===t||!0===yo.bindCtxToMethod&&!1!==t)&&uo(s).forEach(function(e){var t=s[e];"function"==typeof t&&(s[e]=t.bind(r,n))}),n.settings=s}n.__$$isBSe=!1,function(e){var n=e.ctx,t=n.hasComputedFn,r=n.hasWatchFn,o=n.connect,a=n.module,i=_e(a),c=Z(o),u=n.state;t&&(Ft(n,a,u,u,i,!0,!0),c.forEach(function(e){var t=io(e),r=_e(e);Ft(n,e,t,t,r,!0,!0)})),r&&(Mt(n,a,u,u,i,!0,!0),c.forEach(function(e){var t=io(e),r=_e(e);Mt(n,e,t,t,r,!0,!0)}))}(r)}var mo=Fe.moduleName_stateKeys_,ho=Fe.store,_o=ho.getPrevState,Co=ho.getState,go=ho.getStateVer,Ko=function(e,t){return H("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function So(e,t){function r(o,a,i){return function(e){var t=e.eId;if(!i||!1!==e.immediate){var r=o[t],n=(0,e.fn)(m,a);n&&(o[t]=n),r&&r(m)}}}var m=e.ctx,n=m.effectMeta,o=n.effectItems,a=n.eid_effectReturnCb_,i=n.effectPropsItems,c=n.eid_effectPropsReturnCb_,h=m.prevModuleStateVer;if(t)o.forEach(r(a,!0,!0)),i.forEach(r(c,!0,!0));else{var _=m.prevState,C=e.state,g=[];o.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i],u=void 0,s=void 0,d=void 0;if(c.includes("/")){var l=c.split("/"),f=l[0],p=l[1],y=_o(f),v=go(f);if(h[p]===v[p])continue;if(m.prevModuleStateVer[p]=v[p],!y){Ko(c,"module["+f+"]");continue}if(!mo[f].includes(p)){Ko(c,"unmoduledKey["+p+"]");continue}u=Co(f),s=y,d=p}else u=C,s=_,d=c;if(s[d]!==u[d]){a=!0;break}}a&&g.push({fn:r,eId:n})}else g.push({fn:r,eId:n})}),g.forEach(r(a,!1,!1));var u=m.prevProps,s=m.props,d=[];i.forEach(function(e){var t=e.depKeys,r=e.fn,n=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,i=0;i<o;i++){var c=t[i];if(u[c]!==s[c]){a=!0;break}}a&&d.push({fn:r,eId:n})}else d.push({fn:r,eId:n})}),d.forEach(r(c,!1,!1))}}function Eo(e){e.__$$isBF=!1;var t=e.ctx,r=t.module,n=t.ccClassKey,o=t.ccUniqueKey;t.onEvents.forEach(function(e){xn(r,n,o,e.event,e.identity,e.handler)}),So(e,!0)}function wo(e){So(e),e.ctx.prevState=e.state}var bo=Fe.ccUkey_ref_,No=Fe.ccUKey_handlerKeys_,Oo=Fe.runtimeVar,Io=Fe.ccClassKey_ccClassContext_,Uo=Fe.handlerKey_handler_,Do=Fe.renderKey_ccUkeys_;function xo(e,t,r){Oo.isDebug&&console.log(j(t+" unset ref"),A("purple")),delete bo[t];var n=Do[r];r===t?delete Do[r]:n.splice(n.indexOf(t),1);var o=Io[e].ccKeys,a=o.indexOf(t);a<0||o.splice(a,1),function(e){void 0===Cn[e]?Cn[e]=0:Cn[e]-=1}(t);var i=No[t];i&&i.forEach(function(e){delete Uo[e]})}var Ao=Z;function Ro(r,n){function e(e){var t=r[e];"function"==typeof t&&t(n)}Object.getOwnPropertySymbols(r).forEach(e),Ao(r).forEach(e)}function To(e){e.__$$isUnmounted=!0;var t=e.ctx,r=t.effectMeta,n=r.eid_effectPropsReturnCb_;Ro(r.eid_effectReturnCb_,t),Ro(n,t);var o=t.ccUniqueKey,a=t.ccClassKey,i=t.renderKey;Tn(o),xo(a,o,i)}var ko=function(e){return"CC("+e+")"},$o=Z,Mo=le,Fo=Ce,Lo=Fe.runtimeVar,jo=A,Po=j,Ho=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function qo(e,t){var r=void 0===e?{}:e,n=r.module,o=void 0===n?q:n,a=r.state,u=void 0===a?{}:a,i=r.watchedKeys,c=void 0===i?"*":i,s=r.storedKeys,d=void 0===s?[]:s,l=r.setup,f=void 0===l?null:l,p=r.persistStoredKeys,y=r.connect,v=void 0===y?{}:y,m=r.tag,h=r.lite,_=r.isPropsProxy,C=void 0!==_&&_,g=r.isSingle,K=void 0!==g&&g,S=r.renderKeyClasses,E=r.__checkStartUp,w=void 0===E||E,b=r.compareProps,N=void 0===b||b,O=r.__calledBy;void 0===t&&(t="");try{var I=dn(o,t,S,T,c,d,v,w,O),U=I._module,D=I._watchedKeys,x=I._ccClassKey,A=I._connect;return function(r){if(r.prototype&&r.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?r:R.Component,c=e.$$setup,t=function(i){function e(e,t){var r;try{r=i.call(this,e,t)||this;var n=Fo(u),o=Object.assign(r.state||{},n);r.$$attach=r.$$attach.bind(Br(r));var a=Object.assign({},e,{isSingle:K,module:U,tag:m,state:o,type:T,watchedKeys:D,ccClassKey:x,connect:A,storedKeys:d,persistStoredKeys:p});if(ao(Br(r),a,h),f&&(r.$$setup||c))throw Ho("ccUniqueKey "+r.ctx.ccUniqueKey);r.$$setup&&(r.$$setup=r.$$setup.bind(Br(r))),vo(Br(r),f||r.$$setup||c,!1)}catch(e){wt(e)}return r}Vr(e,i);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var r=this.ctx.childRef;if(r&&r.shouldComponentUpdate)return r.shouldComponentUpdate(e,t);if(i.prototype.shouldComponentUpdate)return i.prototype.shouldComponentUpdate.call(this,e,t);var n=!!N&&Mo(this.props,e);return this.state!==t||n},t.$$attach=function(e){var t=this.ctx;((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Tr(e,this),t.__$$ccForceUpdate=kr(e);var r=e.state,n=this.state;r||(r=e.state={});var o=Object.assign({},r,n);if($o(t.state=e.state=o).forEach(function(e){return n[e]=o[e]}),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),f&&(e.$$setup||c))throw Ho("ccUniqueKey "+t.ccUniqueKey);vo(e,f||e.$$setup||c,!1)},t.componentDidMount=function(){i.prototype.componentDidMount&&i.prototype.componentDidMount.call(this),Eo(this)},t.componentDidUpdate=function(){i.prototype.componentDidUpdate&&i.prototype.componentDidUpdate.call(this),wo(this)},t.componentWillUnmount=function(){i.prototype.componentWillUnmount&&i.prototype.componentWillUnmount.call(this),To(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,Lo.isDebug&&console.log(Po("@@@ render "+ko(x)),jo()),!1===C?i.prototype.render.call(this):R.createElement(r,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=x===G?"CcDispatcher":ko(x),t}}catch(e){wt(e)}}function Vo(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return Vr(t,e),t.prototype.render=function(){return this.props.children||R.createElement("span",{style:{display:"none"}})},t}(R.Component);if(Fe.refs[G]){if(!Fe.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");z("hot reload mode, CC_DISPATCHER existed")}var r=e||t;return qo({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},G)(r)}var Bo=ue,Go=Z;function zo(e,t){if(!Bo(e))throw Error(t+" "+ce)}function Wo(e){if(!Bo(e))throw Error("StartupOption.moduleSingleClass "+ce);!function(t,r){Object.keys(r).forEach(function(e){t[e]=r[e]})}(Fe.moduleSingleClass,e)}function Yo(e){if(0<e.length){var o=Fe.plugins;o.length=0,gt.forEach(function(e){return Kt[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(Et),r=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw r;var n=t.name;if(!n)throw r;if(a[n])throw Error("pluginName["+n+"] duplicate");a[n]=1})}}var Xo=function(e){var t=document.querySelector("#"+a);if(!t){(t=document.createElement("div")).id=a;var r=t.style;r.position="fixed",r.left=0,r.top=0,r.display="none",r.zIndex=-888666,document.body.appendChild(t)}n.render(R.createElement(e),t)},Jo=!1;function Zo(e){void 0===e&&(e=!1),J(Fe.event_handlers_),J(Fe.ccUKey_handlerKeys_),J(Fe.renderKey_ccUkeys_);var t=Fe.ccClassKey_ccClassContext_;if(Object.keys(t).forEach(function(e){J(t[e].ccKeys)}),J(Fe.handlerKey_handler_),J(Fe.ccUkey_ref_,[G]),J(Fe.refs,[G]),e){var r=Fe.computed,n=Fe.watch,o=r._computedValue,a=n._watchDep;Z(Fe.store._state).forEach(function(e){e!==V&&(o[e]&&(Fe.computed._computedDep[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},vt(e,r._computedRaw[e])),a[e]&&(a[e]={retKey_fn_:{},stateKey_retKeys_:{},fnCount:0},Ct(e,n._watchRaw[e])))})}}function Qo(){J(Fe.globalStateKeys);var e=Z(Fe.moduleName_isConfigured_).concat([q,V,ee,o]);J(Fe.reducer._reducer,e),J(Fe.store._state,e,{}),J(Fe.computed._computedDep,e),J(Fe.computed._computedValue,e),J(Fe.watch._watchDep,e),J(Fe.middlewares),ge={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}},Zo()}function ea(e){void 0===e&&(e=!1),Fe.info.latestStartupTime=Date.now(),function(e){Fe.isStartup?Fe.isHotReloadMode()?e():console.warn("clear failed because of not running under hot reload mode!"):Jo=!0}(function(){if(e)console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Jo=!0,Qo();else{if(Jo)return void(Jo=!1);!function(){if(!Fe.refs[G]){var e=Vo();Xo(e)}}(),Zo(Fe.reComputed)}})}var ta=z,ra=de,na="";function oa(e,t){var r=void 0===e?{}:e,n=r.store,o=void 0===n?{}:n,a=r.reducer,i=void 0===a?{}:a,c=r.init,u=void 0===c?null:c,s=r.computed,d=void 0===s?{}:s,l=r.watch,f=void 0===l?{}:l,p=r.moduleSingleClass,y=void 0===p?{}:p,v=void 0===t?{}:t,m=v.plugins,h=void 0===m?[]:m,_=v.middlewares,C=void 0===_?[]:_,g=v.isStrict,K=void 0!==g&&g,S=v.isDebug,E=void 0!==S&&S,w=v.errorHandler,b=void 0===w?null:w,N=v.isHot,O=v.bindCtxToMethod,I=void 0!==O&&O,U=v.computedCompare,D=void 0===U||U,x=v.watchCompare,A=void 0===x||x,R=v.watchImmediate,T=void 0!==R&&R,k=v.alwaysGiveState,$=void 0===k||k,M=v.reComputed,F=void 0===M||M,L=!0;try{throw Error()}catch(e){L=function(e){function t(e,t){for(var r=0;r<o;r++)if(n[r].includes(e)){a=n[r+t];break}}var r=Fe.info,n=e.stack.split("\n"),o=n.length,a="";function i(){ea(Fe.isHot=!0)}t("startup",2),a||t("runConcent",0);var c=Date.now();if(na)if(na!==a){var u="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(c-r.latestStartupTime<1e3)throw Error(u);if(!he())return W(u),!1;i(),na=a}else i();else na=a,r.firstStartupTime=c,r.latestStartupTime=c;return!0}(e)}if(L)try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),ta("cc version "+Fe.info.version),void 0!==N&&(Fe.isHot=N),Fe.reComputed=F,Fe.errorHandler=b;var j=Fe.runtimeVar;if(j.alwaysGiveState=$,j.isStrict=K,j.isDebug=E,j.computedCompare=D,j.watchCompare=A,j.watchImmediate=T,j.bindCtxToMethod=I,Wo(y),function(e){zo(e,"state"),delete e[B],delete e[V],void 0===e[ee]&&(e[ee]={}),void 0===e[q]&&(e[q]={});for(var t=Go(e),r=t.length,n=0;n<r;n++){var o=t[n];Ze(o,e[o])}}(o),function(t){zo(t,"reducer"),void 0===t[q]&&(t[q]={}),void 0===t[ee]&&(t[ee]={}),Go(t).forEach(function(e){return nt(e,t[e])})}(i),function(t){zo(t,"computed"),Go(t).forEach(function(e){return vt(e,t[e])})}(d),function(t){zo(t,"watch"),Object.keys(t).forEach(function(e){return Ct(e,t[e])})}(f),function(r){if(r){if(!Bo(r))throw Error("init "+ce);Go(r).forEach(function(t){We(t,!1);var e=r[t];e&&Promise.resolve().then(e).then(function(e){Lr(t)(e)})}),Fe.init._init=r}}(u),function(e){if(0<e.length){var t=Fe.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C),!Fe.refs[G]){var P=Vo();Xo(P)}var H=function(e){ra("CC_CONTEXT",Fe,e),ra("ccc",Fe,e),ra("cccc",Fe.computed._computedValue,e),ra("sss",Fe.store._state,e)};window.mcc?setTimeout(function(){H(window.mcc[ve()])},1200):H(),Fe.isStartup=!0,Yo(h)}catch(e){if(!b)throw e;b(e)}}function aa(e){throw Error("[[run]]: param error, "+e+" "+ce)}var ia=ue,ca=Z,ua=m,sa=Ce;function da(e,t){var r=pe(e);return delete r.__checkStartUp,delete r.__calledBy,qo(r,t)}var la=le,fa=pe,pa=Ce,ya=R.createElement("span",{style:{display:"none"}}),va=function(I){function e(e,t){var r;r=I.call(this,e,t)||this;var n=fa(e.register),o=n.module,a=n.renderKeyClasses,i=n.tag,c=n.lite,u=n.compareProps,s=void 0===u||u,d=n.setup,l=n.bindCtxToMethod,f=n.watchedKeys,p=void 0===f?"*":f,y=n.connect,v=void 0===y?{}:y,m=n.isSingle,h=n.storedKeys,_=void 0===h?[]:h,C=pa(n.state),g=e.ccClassKey,K=e.ccKey,S=e.ccOption,E=void 0===S?{}:S,w=p,b=g,N=v;if(!0!==e.__$$regDumb){var O=dn(o,g,a,U,p,_,v,!0);w=O._watchedKeys,b=O._ccClassKey,N=O._connect}return ao(Br(r),{isSingle:m,ccKey:K,connect:N,state:C,module:o,storedKeys:_,watchedKeys:w,tag:i,ccClassKey:b,ccOption:E,type:U},c),r.__$$compareProps=s,vo(Br(r),d,l),r}Vr(e,I);var t=e.prototype;return t.componentDidMount=function(){Eo(this)},t.shouldComponentUpdate=function(e,t){var r=!!this.__$$compareProps&&la(Ln(e),Ln(this.props));return this.state!==t||r},t.componentDidUpdate=function(){wo(this)},t.componentWillUnmount=function(){I.prototype.componentWillUnmount&&I.prototype.componentWillUnmount.call(this),To(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=Ln(e);var t=e.render,r=t||e.children;if("function"==typeof r){var n=e.register,o=void 0===n?{}:n,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},r(a.mapped)||ya):r(a)||ya}if(R.isValidElement(r))throw Error("CcFragment's children can not b a react dom ");return r},e}(R.Component);function ma(e,t){var r=pe(e),n=r.watchedKeys,o=r.render,a=r.connect,i=dn(r.module,t,r.renderKeyClasses,U,void 0===n?"*":n,r.storedKeys,void 0===a?{}:a,!0),c=i._watchedKeys,u=i._ccClassKey,s=i._connect;function d(t){return function(e){return r.props=e,function(t,e){var r=e.mapProps,n=e.props,o=void 0===n?{}:n,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return r?(e.mapped=r(e),R.createElement(t,e.mapped)):R.createElement(t,e)},ccKey:o.ccKey,register:e};return R.createElement(va,a)}(t,r)}}return r.module=i._module,r.watchedKeys=c,r.ccClassKey=u,r.connect=s,o?d(o):function(e){return d(e)}}var ha=Fe.ccUkey_ref_,_a=1,Ca={},ga="__setState",Ka="__forceUpdate";var Sa=function(n,o){return function(e,t){var r=Object.assign({},n,e);o(r),t&&t(r)}},Ea=function(r,n){return function(e){var t=Object.assign({},r);n(t),e&&e(t)}};function wa(e,t,r){this.setState=Sa(e,t),this.forceUpdate=Ea(e,t),this.state=e,this.isFirstRendered=!0,this.props=r}function ba(e,t,r,n,o,a,i,c,u){var s=t||Ce(r),d=n.bindCtxToMethod,l=n.watchedKeys,f=n.storedKeys,p=n.connect,y=n.setup,v=n.lite;_a+=1;var m=dn(n.module,u,n.renderKeyClasses,w,void 0===l?"*":l,void 0===f?[]:f,void 0===p?{}:p,!0),h=m._module,_=m._watchedKeys,C=m._ccClassKey,g=m._connect,K=new wa(o,a,i),S=Object.assign({},n,{module:h,watchedKeys:_,state:s,type:w,ccClassKey:C,connect:g,ccOption:i.ccOption});K.props=i,ao(K,S,v);var E=K.ctx;return E.props=i,E.extra=c,vo(K,y,d),Ca[e]=K.ctx.ccUniqueKey,E.useRef=function(e){var t=R.useRef(null);return E.refs[e]=t},K}var Na="react version is LTE 16.8";function Oa(e,t){var r=pe(e),n=r.state,o=void 0===n?{}:n,a=r.props,i=void 0===a?{}:a,c=r.mapProps,u=r.layoutEffect,s=void 0!==u&&u,d=r.extra,l=void 0===d?{}:d,f=R.useState;if(!f)throw Error(Na);function p(){return ba(m,_,o,r,g,K,i,l,t)}var y,v=_a,m=f(v)[0],h=m===v,_=h?Ce(o):0,C=f(_),g=C[0],K=C[1];if(h)y=p();else if(!(y=ha[Ca[m]])&&Date.now()-Fe.info.latestStartupTime<1e3)y=p();else{var S=y.ctx;S.reactSetState=Sa(g,K),S.reactForceUpdate=Ea(g,K),S.prevProps=S.props,y.props=S.props=i,S.extra=l}var E=y.ctx;E.setState=Ia(y,K,ga),E.forceUpdate=Ia(y,K,Ka);var w=s?R.useLayoutEffect:R.useEffect;if(w(function(){y.isFirstRendered||wo(y),E.setState=Ia(y,K,ga),E.forceUpdate=Ia(y,K,Ka)}),w(function(){if(!1===y.isFirstRendered){var e=y.ctx;Kn(y,e.isSingle,e.ccClassKey,e.ccKey,e.ccUniqueKey)}else y.isFirstRendered=!1,Eo(y);return function(){To(y)}},[]),c){var b=c(E);if(!ue(b))throw Error("mapProps ret "+ce);E.mapped=b}return E}function Ia(e,t,r){return e.ctx.__setter1=t,e.ctx.__setter2=null,function(){e.ctx.__setter2=t,e.ctx.__setter1=null,e.ctx[r].apply(null,arguments)}}function Ua(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function Da(e){return Fe.store.getState(e)}var xa=Fe.computed._computedValue;var Aa=Fe.ccUkey_ref_,Ra=Fe.ccClassKey_ccClassContext_;function Ta(){var r=[],n=Fe.ccUkey_ref_;return Z(n).forEach(function(e){var t=n[e];t&&!t.__$$isUnmounted&&r.push(t)}),r}function ka(e,t,r){var n=void 0===r?{}:r,o=n.state,a=n.reducer,i=n.computed,c=n.watch,u=n.init;if(!Fe.isStartup)throw Error("cc is not startup yet");ze(e),We(t,!1);var s=Fe.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,Ce(o));var l=qr(Fe.reducer._reducer[t]||{},e);a&&Object.assign(l,qr(a,e));var f=Fe.computed._computedRaw[t]||{};i&&Object.assign(f,i);var p=Fe.watch._watchRaw[t]||{};c&&Object.assign(p,c);var y=Fe.init._init[t];u&&(y=u);var v={state:d,reducer:l,computed:f,watch:p};y&&(v.init=y),Hr(e,v)}function $a(s,e){void 0===s&&(s={}),void 0===e&&(e={}),ia(s)||aa("store"),ia(e)||aa("options");var d={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};ca(s).forEach(function(e){var t=s[e],r=t.state,n=t.reducer,o=void 0===n?{}:n,a=t.watch,i=t.computed,c=t.init,u=t.isClassSingle;d.store[e]=sa(r),"function"==typeof r&&(Fe.moduleName_stateFn_[e]=r),d.reducer[e]=o,a&&(d.watch[e]=a),i&&(d.computed[e]=i),c&&(d.init[e]=c),d.moduleSingleClass[e]=!0===u}),ua(d.init)&&(d.init=null),oa(d,e)}function Ma(e,t){return da({connect:e},t)}function Fa(e,t){return ma({connect:e},t)}function La(e,o){var a=pe(e);function t(r){var e=a.memo,t=void 0===e||e;function n(){return function(e){a.props=e;var t=Oa(a,o);return R.createElement(r,a.mapProps?t.mapped:t)}}return delete a.memo,t&&R.memo?R.memo(n()):n()}"function"==typeof a.state&&(a.state=a.state());var r=a.render;return r?t(r):function(e){return t(e)}}function ja(e,t,r,n,o){void 0===o&&(o=!1);try{Qe().ctx.setGlobalState(e,t,r,n)}catch(e){if(o)throw e;H(e.message)}}function Pa(e,t,r,n,o,a){void 0===n&&(n=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&Ua(),"string"!=typeof e&&Ua(),vr(e,t,r,n,o)}function Ha(e,t,r,n){Qe().ctx.set(e,t,r,n)}function qa(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var r=e.split("/"),n=Da(r[0]);return qn(e,t,!1,n,!1).state}function Va(e){return ei[e].connectedState||{}}function Ba(e){return e?xa[e]:xa}function Ga(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,r=Qe(),n=arguments.length,o=Array(1<n?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=r.ctx).emit.apply(t,[e].concat(o))}catch(e){H(e)}}function za(e,t){try{Qe().ctx.off(e,t)}catch(e){if(t.throwError)throw e;H(e.message)}}function Wa(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(function(e){var r=[],t=Ra[e];return t&&t.ccKeys.forEach(function(e){var t=Aa[e];t&&r.push(t)}),r})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function Ya(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];Ta().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,r)})}function Xa(e,t,r){return{fn:e,depKeys:t,compare:r}}function Ja(e,t){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t}}function Za(e,t,r,n){return{fn:e,depKeys:t,compare:r,immediate:n}}function Qa(e,t,r){return{fn:e,depKeys:t,compare:r,immediate:!0}}var ei=Fe.ccClassKey_ccClassContext_,ti=da,ri=ma,ni=Hr,oi=Da,ai=Fe.store.getGlobalState,ii=rt,ci=Fe,ui=Vo,si=Ta,di=Fe.reducer._caller,li=ea,fi=va,pi=u,yi=Fe.store.appendState,vi=Oa,mi={cloneModule:ka,emit:Ga,off:za,connect:Ma,connectDumb:Fa,register:ti,registerDumb:ri,registerHookComp:La,configure:ni,dispatch:ii,run:$a,setGlobalState:ja,setState:Pa,set:Ha,setValue:qa,getGlobalState:ai,getState:oi,getComputed:Ba,getConnectedState:Va,ccContext:ci,createDispatcher:ui,execute:Wa,executeAll:Ya,getRefs:si,reducer:di,clearContextIfHot:li,CcFragment:fi,cst:pi,appendState:yi,useConcent:vi,bindCcToMcc:hi,defComputed:Xa,defComputedVal:Ja,defWatch:Za,defWatchImmediate:Qa};function hi(e){if(!Ci)throw Error("current env is not multi concent ins mode");if(Ci[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ye=e}(e),de(e,mi,Ci)}function _i(){var e=ye?window.mcc[ye]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,r=ci.info.version;if(t!==r)throw Error("a existed version concent "+t+" is different with current about to import concent "+r+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var Ci=window.mcc;Ci?setTimeout(function(){if(!ve())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");_i()},1e3):(_i(),de("cc",mi)),e.cloneModule=ka,e.run=$a,e.connect=Ma,e.connectDumb=Fa,e.register=ti,e.registerDumb=ri,e.registerHookComp=La,e.configure=ni,e.setGlobalState=ja,e.setState=Pa,e.set=Ha,e.setValue=qa,e.getState=oi,e.getGlobalState=ai,e.getConnectedState=Va,e.getComputed=Ba,e.emit=Ga,e.off=za,e.dispatch=ii,e.ccContext=ci,e.createDispatcher=ui,e.execute=Wa,e.executeAll=Ya,e.getRefs=si,e.reducer=di,e.clearContextIfHot=li,e.CcFragment=fi,e.cst=pi,e.appendState=yi,e.useConcent=vi,e.defComputed=Xa,e.defComputedVal=Ja,e.defWatch=Za,e.defWatchImmediate=Qa,e.bindCcToMcc=hi,e.default=mi,Object.defineProperty(e,"__esModule",{value:!0})});
