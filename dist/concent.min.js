!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,D,r){"use strict";D=D&&D.hasOwnProperty("default")?D.default:D,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,W={},pe="$$global",q="$$default",H="$$cc",V="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",x="$$CcFrag",ye="$$CcHook",m="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",_e=Symbol("__for_sync_param_ccsync__"),U=10,N=11,I=13,T="dispatch",ve="setState",me="setModuleState",he="forceUpdate",w="invoke",K="sync",h="module",Ce="ref",F="watch",Ke={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[Ke.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[Ke.CC_MODULE_NOT_FOUND]="module not found!",t[Ke.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[Ke.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[Ke.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[Ke.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[Ke.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[Ke.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:pe,MODULE_DEFAULT:q,MODULE_CC:H,MODULE_VOID:V,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_FRAGMENT:x,CC_HOOK:ye,CC_PREFIX:m,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:_e,SIG_FN_START:U,SIG_FN_END:N,SIG_FN_QUIT:12,SIG_FN_ERR:I,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,EFFECT_AVAILABLE:1,EFFECT_STOPPED:0,DISPATCH:T,SET_STATE:ve,SET_MODULE_STATE:me,FORCE_UPDATE:he,INVOKE:w,SYNC:K,CATE_MODULE:h,CATE_REF:Ce,FN_CU:"computed",FN_WATCH:F,ERR:Ke,ERR_MESSAGE:i}),s=((n={})[pe]={},n[q]={},n[H]={},n),d=((o={})[pe]={},o[q]={},o[H]={},o),f={},l={},L={_computedValueOri:d,_computedValue:s,_computedRaw:l,_computedDep:f,getRootComputedValue:function(){return s},getRootComputedDep:function(){return f},getRootComputedRaw:function(){return l}},p={},y={},C={_watchRaw:y,_watchDep:p,getRootWatchDep:function(){return p},getRootWatchRaw:function(){return y}},_={alwaysGiveState:!0,isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},v=Symbol("cuk"),g="1",ge="2",Se="is not a plain json object!",S="should be an string array or *!",E=console.error;function $(e){return null!=e&&0<te(e).length}function b(e){return!$(e)}function Ee(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function O(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function j(e,t,n,r,o,a,c){var i;return(i={})[v]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function R(e,t){return e+"$"+t}function M(e){return e?" --verbose-info: "+e:""}function k(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function P(e){return"%c"+e}var z=function(e){return"------------ CC "+e+" ------------"};function G(e){E(z("WARNING")),e instanceof Error?(E(e.message),E(e.stack)):E(e)}function Y(e){console.log(z("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function X(e){if(E(z("WARNING")),E(e),_.isStrict)throw e}function J(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function Q(e,t){var n=e[t];return n||(n=e[t]=[]),n}function Z(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function ee(t,n,r){if(void 0===n&&(n=[]),Array.isArray(t)){var o=[];n.forEach(function(e){t.includes(e)&&o.push(e)}),t.length=0,o.forEach(function(e){return t.push(e)})}else Object.keys(t).forEach(function(e){n.includes(e)||(r?t[e]=r:delete t[e])})}function te(e){return Object.keys(e)}function ne(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function re(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function oe(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function $e(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function ae(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:q},e)}var ce="";function ie(){return ce}function ue(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},getFnCommittedState:function(){return t}}}function se(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function de(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function fe(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!Ee(t))throw Error("state "+Se);return t}function le(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function we(e){return"-"===e?"*":e}var be={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function xe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n}}function Ue(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=te(d),_=te(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return xe(e,d,f[e])}),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys})}),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return te(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=be[t][n],S=i?J(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return xe(e,d,f[e])}),setted:h,changed:C}:(function(u,o,s,d,a,f,l){if(0===o.length)return;var e=a["*"];if(e){var c=0<s.length;e.forEach(function(e){var t=d[e],n=t.fn,r=t.compare,o=t.depKeys,a={retKey:e,fn:n,depKeys:o,isLazy:f[e]};r?c&&u.push(a):u.push(a)})}u.length<l&&function(){var i={},e=o.length,t=function(e){var c=o[e],t=a[c];return t?(t.forEach(function(e){if(!i[e]){var t=d[e],n=t.fn,r=t.compare,o=t.depKeys,a=!0;r&&!s.includes(c)&&(a=!1),a&&(i[e]=!0,u.push({retKey:e,fn:n,depKeys:o,isLazy:f[e]}))}}),u.length===l?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}()}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Ne(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ie(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!Ee(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=te(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Ne(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Ne(o,t,e)&&(c=!1)}),r&&(a=$e(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Oe(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(e,t){return e[t]=e[t],!0}})}function De(e,t,n,r){if(_.alwaysGiveState)return[n,r];var o=t[0];return 1===t.length&&"*"!==o&&o===e?[n[o],r[o]]:[n,r]}function Ae(e,t,n,r,o){if(0!==o.length){var a=J(t===Ce?J(e.computedDep,e.module):J(L._computedDep,n),"stateKey_retKeys_");o.forEach(function(e){var t=Q(a,e);Array.isArray(t)&&!t.includes(r)&&t.push(r)})}}function Re(e,t,n,r,o,a){var c=De(e,t,r,o);return n(c[0],c[1],a)}for(var Te,Me=function(S,E,$,w,b,e,x,U,N,I,O,D,A){for(var R=0,T=e,M=!0,k=!1,t=function(){var v=1===++R&&I,e=b(T,v),t=e.pickedFns,m=e.setted,h=e.changed;if(!t.length)return"break";var n=ue(),C=n.commit,r=n.getFnCommittedState,o=ue(),K=o.commit,a=o.getFnCommittedState;if(t.forEach(function(e){var t=e.retKey,n=e.fn,r=e.depKeys,o=e.isLazy,a={retKey:t,callInfo:N,isFirstCall:I,commit:C,commitCu:K,setted:m,changed:h,stateModule:E,refModule:$,oldState:w,committedState:T,refCtx:S},c=v&&"-"===r;if("computed"===O)if(o&&(delete a.commit,delete a.commitCu),c){var i=[],u=Oe(x,i),s=Re(t,r,n,u,u,a);A[t]=j(!1,s),Ae(S,D,E,t,i)}else if(o){var d=De(t,r,x,w);A[t]=j(o,null,!0,n,d[0],d[1],a)}else{var f=Re(t,r,n,x,w,a);A[t]=j(!1,f)}else{var l,p=x,y=[],_=w;c&&(_=p=Oe(x,y)),l=Re(t,r,n,p,_,a),Ae(S,D,E,t,y),!1===l&&(M=!1)}}),T=r()){var c=function(e,t){void 0===t&&(t=!1),T=e,t&&0===te(e).length?T=null:(Object.assign(x,T),Object.assign(U,T),k=!0)},i=Ie(T,"ref"===D?S.privStateKeys:W[E],!0,!0),u=i.partialState,s=i.ignoredStateKeys;if(u)if(O===F){var d=function(e,t,n){return(t===Ce?e.computedDep[e.module]||{}:L._computedDep[n]||{}).stateKey_retKeys_}(S,D,E);if(d){var f=[],l={};te(u).forEach(function(e){d[e]?f.push(e):l[e]=u[e]}),0<f.length&&G("these state keys["+f.join(",")+"] will been ignored, cause they are also appeared in computed depKeys,\n              cc suggest you move the logic to computed file."),c(l,!0)}else c(u)}else c(u);if(s.length){var p="they are not "+(D===Ce?"private":"module")+", fn is "+D+" "+O;G("these state keys["+s.join(",")+"] are invalid, "+p)}}var y=a();if(y){var _;if("ref"===D)_="computed"===O?S.computedRetKeyFns:S.watchRetKeyFns;else{var g=L.getRootComputedDep()[E]||{};_=g.retKey_fn_||null}_&&te(y).forEach(function(e){_[e]?A[e]=j(!1,y[e]):G("fnCtx.commitCu commit an invalid retKey["+e+"] for moduleComputed")})}10<R&&(G("fnCtx.commit may goes endless loop, please check your code"),T=null)};T;){if("break"===t())break}return{shouldCurrentRefUpdate:M,hasDelta:k}},ke=L._computedValue,We=te,Fe={},Le=function(n,e,t){var r=void 0===t?{}:t,o=r.refCtx,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=Pe(n),f=ke[n],l=L.getRootComputedDep(),p=C.getRootWatchDep(),y=a?a.module:null,_=Object.assign({},d,e),v=Object.assign({},e),m=v;return Me(a,n,y,d,function(e,t){return Ue(t,h,"computed",l,n,d,e)},m,_,v,i,!1,"computed",h,f),Me(a,n,y,d,function(e,t){return Ue(t,h,"watch",p,n,d,e)},m,_,v,i,!1,"watch",h,f),s||je(n,v),v},je=function(t,e,n){void 0===n&&(n=!1);var r=e;if(n){var o=Ie(e,W[t],!0);r=o.partialState}if(r){var a=Pe(t),c=ze(t);We(r).forEach(function(e){c[e]=a[e],qe(t,e),a[e]=r[e]})}return r},Pe=function(e){return Ve[e]},ze=function(e){return Be[e]},qe=function(e,t){Ge[e][t]++},He=function(){var e;return(e={})[H]={},e[V]={},e[pe]={},e[q]={},e},Ve=He(),Be=He(),Ge={},Ye={getDispatcher:function(){return Fe[B]},isHotReloadMode:function(){return!!Ye.isHot||window&&(window.webpackHotUpdate||se())},runtimeVar:_,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:W,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=Q(W,e);te(t).forEach(function(e){n.includes(e)||n.push(e)}),Ye.store.setState(e,t)},_state:Ve,_prevState:Be,_stateVer:Ge,getState:function(e){return e?Pe(e):Ve},getPrevState:function(e){return e?ze(e):Be},getStateVer:function(e){return e?Ge[e]:Ge},setState:function(e,t,n){return Le(e,t,n)},setGlobalState:function(e){return Le(pe,e)},saveSharedState:je,getGlobalState:function(){return Ve[pe]}},reducer:{_reducer:(Te={},Te[pe]={},Te[H]={},Te),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:L,watch:C,refStore:{_state:{},setState:function(e,t){var n=Ye.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:Fe,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:{},refs:Fe,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.3.6",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},Xe=localStorage.length,Je=Ye.refStore._state,Qe=0;Qe<Xe;Qe++){var Ze=localStorage.key(Qe);if(Ze.startsWith("CCSS_"))try{Je[Ze.substr(5)]=JSON.parse(localStorage.getItem(Ze))}catch(e){console.error(e)}}var et=[],tt=function(e){return e.toLowerCase()===H},nt=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},rt=M,ot=O;function at(e){if(!nt(e))throw Error("module["+e+"] writing is invalid!");if(tt(e))throw Error("'$$cc' is a built-in module name for concent")}function ct(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=Ye.store._state;if(at(e),e!==pe)if(t){if($(o[e]))throw ot(Ke.CC_MODULE_NAME_DUPLICATE,rt(r))}else if(!o[e])throw ot(Ke.CC_MODULE_NOT_FOUND,rt(r))}function it(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+S);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var ut={},st=function(e,t,n){if(e.code!==Ke.CC_MODULE_NAME_DUPLICATE||!Ye.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=ut[o];if(a){if(r!==a)throw e}else ut[o]=r},dt={};function ft(e){dt[e]={}}var lt=Ye.waKey_uKeyMap_;function pt(n,e,t){void 0===t&&(t=!0),ft(n);var r=n===V?{}:e;try{!function(e,t,n){if(ct(e,n),!Ee(t))throw Error("module["+e+"]'s state "+Se)}(n,r,t)}catch(e){st(e,n,"state")}var o=Ye.store,a=o.getState(),c=o.getStateVer();o.getPrevState()[n]=Object.assign({},a[n]=r),c[n]=te(r).reduce(function(e,t){return lt[n+"/"+t]={},e[t]=1,e},{});var i=Object.keys(r);if(Ye.moduleName_stateKeys_[n]=i,n===pe){var u=Ye.globalStateKeys;i.forEach(function(e){u.includes(e)||u.push(e)})}}function yt(e,t){void 0===t&&(t=!1);var n=Ye.ccUKey_ref_,r=Ye.moduleName_ccClassKeys_,o=Ye.ccClassKey_ccClassContext_,a=[];if(e){if(!Ye.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===q&&(a=a.filter(function(e){return!e.startsWith(x)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var _t=R,vt=G,mt=function(){return Promise.resolve()};function ht(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=_t(c,i),_=Ye.refs[y];if(!_)return vt("no ref found for ccUniqueKey:"+y+"!"),mt();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?yt(l):d?yt(d):yt()))return vt("no ref found"),mt();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=Ye.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return vt(e.message),mt()}}function Ct(e,t,n,r,o){return ht(e,t,n,r,o)}function Kt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!Ee(e))throw Error(t+" "+Se);ct(a,!1,t+" is invalid");var n=Ye.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=J(o,a),d=Q(i,a);u.setState||(u.setState=function(e){return e}),te(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=Q(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Ct(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var gt=0,St=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Et(e){return gt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=St[Z()];return t}())+"_"+gt}var $t=Ye.moduleName_stateKeys_,wt=Ye.runtimeVar;function bt(e,t,n,r,o,a,c){var i=t.refCtx,u=t.type;if(e!==Ce||i.__$$isBSe){if(n){var s,d,f,l=typeof n;if("string"==l)s=Ee(r)?((d={})[n]=r,d):((f={})[n]={fn:r,depKeys:o,compare:a,immediate:c},f);else if(Ee(n))s=n;else if("function"==l&&!Ee(s=n(i)))throw Error("type of "+u+" callback result must be an object");s?function(x,U,N){var e=wt.computedCompare,t=wt.watchCompare,I=wt.watchImmediate,O="computed"===U.type?e:t,D=U.module;te(N).forEach(function(c){var e=N[c],t=typeof e,n=e;if("function"==t&&(n={fn:e}),Ee(n)){var r=n,o=r.fn,a=r.depKeys,i=void 0===a?"-":a,u=r.immediate,s=void 0===u?I:u,d=r.compare,f=void 0===d?O:d,l=r.lazy,p=Et("mark");if("*"===i||"-"===i){var y=Nt(U,D,c),_=y.stateKey;xt(x,U,p,_),Ut(x,U,D,_,o,i,s,f,l)}else{if(i&&!Array.isArray(i))throw Error("depKeys must an string array or *");if(i&&0!==i.length){var v="",m=c;if(c.includes("/")){var h=c.split("/"),C=h[0],K=h[1];v=C,m=K}xt(x,U,p,m);var g={};i.forEach(function(e){var t=Nt(U,D,e),n=t.isStateKey,r=t.stateKey,o=t.module;if(v&&o!==v)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=Q(g,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");a.push(r)}),te(g).forEach(function(e){Ut(x,U,e,m,o,g[e],s,f,l)})}else{var S=Nt(U,D,c),E=S.isStateKey,$=S.stateKey,w=S.module,b=[];!i&&E&&(b=[$]),xt(x,U,p,$),Ut(x,U,w,$,o,b,s,f,l)}}}else G("retKey["+c+"] item type error")})}(e,t,s):G(e+" "+u+" param type error")}}else G(e+" "+u+" must be been called in setup block")}function xt(e,t,n,r){if(e===Ce){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function Ut(e,t,n,r,o,a,c,i,u){var s=J(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0}),d=s.retKey_fn_,f=s.stateKey_retKeys_,l=s.retKey_lazy_,p={fn:o,immediate:c,compare:i,depKeys:a};d[r]?e!==Ce&&(d[r]=p,l[r]=t.isLazyComputed||u):(d[r]=p,l[r]=t.isLazyComputed||u,s.fnCount++),e===Ce&&(t.retKeyFns[r]=d[r]);var y=t.refCtx;(y&&("computed"===t.type?y.hasComputedFn=!0:y.hasWatchFn=!0),"-"!==a)&&("*"===a?["*"]:a).forEach(function(e){var t=Q(f,e);t.includes(r)||t.push(r)})}function Nt(e,t,n){var r,o=t,a=n;if(n.includes("/")){var c=n.split("/"),i=c[0];i&&(o=i),a=c[1]}if(o===e.module)r=e.stateKeys;else{if(!(r=$t[o]))throw O(Ke.CC_MODULE_NOT_FOUND,M("module["+o+"]"));if(!e.connect[o])throw O(Ke.CC_MODULE_NOT_CONNECTED,M("module["+o+"], stateKey["+a+"]"))}return{isStateKey:r.includes(a),stateKey:a,module:o}}function It(e,o){var t={};return te(e).forEach(function(r){o[r]=j(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[v]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):G("computed value can not been changed manually")}})}),t}var Ot=J,Dt=Ee;function At(n,e){if(e){var t="module["+n+"] computed";if(!Dt(e))throw Error(t+" "+Se);ct(n,!1,t+" is invalid");var r=Ye.computed,o=Ye.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];bt(h,{module:n,stateKeys:te(i),dep:c},e);var u=Ye.getDispatcher(),s=Object.assign({},i),d=Ot(r._computedValueOri,n);a[n]=It(e,d);var f=a[n];Me(u&&u.ctx,n,u&&u.ctx.module,i,function(e,t){return Ue(t,h,"computed",c,n,i,e)},i,i,s,de(n),!0,"computed",h,f)}}var Rt=Ee,Tt=J,Mt=te;function kt(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!Rt(e))throw Error(r+" "+Se);ct(n,!1,r+" is invalid");var o=Ye.watch.getRootWatchDep(),a=Ye.watch.getRootWatchRaw(),c=Ye.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,Ye.store.getState)(n);bt(h,{module:n,stateKeys:Mt(u),dep:o},e);var s=Ye.getDispatcher(),d=Object.assign({},u),f=Tt(c,n);Me(s&&s.ctx,n,s&&s.ctx.module,u,function(e,t){return Ue(t,h,"watch",o,n,u,e)},u,u,d,de(n),!0,"watch",h,f)}}var Wt=[U,N,12,I,14,15],Ft={};function Lt(t,n){Ft[t].forEach(function(e){e({sig:t,payload:n})})}function jt(e,t){function n(e,t){var n=Ft[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}Wt.forEach(function(e){return Ft[e]=[]});var Pt=function(e){if(!Ye.errorHandler)throw e;Ye.errorHandler(e)},zt=0,qt={},Ht={},Vt={},Bt={};function Gt(){return++zt}function Yt(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function Xt(e,t,n){Yt(e,t,n,qt)}function Jt(e,t,n){return Xt(e,t,n),function(e){var t=function(e){return qt[e]}(e),n=[];return te(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function Qt(e){delete qt[e]}var Zt={},en=function(e,t,n){void 0===n&&(n=1e3);var r=Zt[t];r&&clearTimeout(r),Zt[t]=setTimeout(function(){delete Zt[t],e()},n)};function tn(e,n,r,t,o,a,c){if(void 0===c&&(c=!1),!e.hasWatchFn)return!0;var i=Object.assign({},t),u=e.watchDep,s=e.module,d=e.ccUniqueKey,f=e.refComputed,l=Object.assign({},r,t),p=Me(e,n,s,r,function(e,t){return Ue(t,"ref","watch",u,n,r,e,d)},t,l,i,o,a,"watch",Ce,f),y=p.shouldCurrentRefUpdate;return c&&p.hasDelta&&Object.assign(t,i),y}function nn(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=Object.assign({},t);if(!e.hasComputedFn)return i;var u=e.computedDep,s=e.module,d=e.refComputed,f=e.ccUniqueKey,l=Object.assign({},r,t);return Me(e,n,s,r,function(e,t){return Ue(t,Ce,"computed",u,n,r,e,f)},t,l,i,o,a,"computed",Ce,d),c&&Object.assign(t,i),i}var rn=te,on=Ye.ccUKey_ref_,an=Ye.waKey_uKeyMap_;function cn(o,e,a,c){var t=rn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,a,c),r=function(e,t){return dt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var i={};t.forEach(function(e){Object.assign(i,an[o+"/"+e])});function u(e,t){e?f.push(t):l.push(t)}function s(e,t){var n=e.ctx,r=n.ccClassKey;if(a){var o=n.renderKey===a;"*"===c?o&&u(t,e):c.includes(r)?o&&u(t,e):u(t,e)}else u(t,e)}var d=rn(i),f=[],l=[];d.forEach(function(e){var t=on[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&s(t,!0),r&&s(t,!1)}});var p={belong:f,connect:l};return function(e,t,n){dt[e][t]=n}(o,n,p),{sharedStateKeys:t,result:p}}var un=Ee,sn=G,dn=$,fn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},ln=te,pn=1,yn=2,_n=he,vn=ve,mn=me,hn=w,Cn=K,Kn=15,gn=1,Sn=2,En=3,$n=Ye.store,wn=$n.setState,bn=$n.getPrevState,xn=$n.saveSharedState,Un=Ye.middlewares,Nn=Ye.ccClassKey_ccClassContext_,In=Ye.refStore,On=Ye.moduleName_stateKeys_;function Dn(e,t,c){var n=void 0===t?{}:t,i=n.module,r=n.skipMiddleware,u=void 0!==r&&r,s=n.payload,o=n.reactCallback,d=n.type,a=n.calledBy,f=void 0===a?vn:a,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(un(e)){var h=c.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?pn:yn}(i,C),E={payload:s,renderKey:_,ccKey:g,module:i,fnName:p},$=function(e,t,n){var r=Ie(t,On[e],!0).partialState;if(r)return wn(e,r,n);return r}(i,e,{refCtx:S===pn?c.ctx:null,callInfo:E,noSave:!0});Object.assign(e,$),An(c,E,_,f,e,S,o,function(n,r,o){var a={calledBy:f,type:d,payload:s,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:r,refModule:C,module:i,fnName:p,sharedState:$||{},modState:function(e,t){a.committedState[e]=t,a.sharedState[e]=t}};!function(e,n,r){var o=!1;if(!0!==e){var a=Un.length;if(0<a){o=!0;var c=0;!function e(){if(c===a)r(o);else{var t=Un[c];c++,"function"==typeof t?t(n,e):(sn("found one middleware is not a function"),e())}}()}else r()}else r(o)}(u,a,function(e){o&&o();var t=$;e?t=xn(i,a.sharedState,!0):$&&xn(i,$),n===gn&&!t||Lt(Kn,{committedState:r,sharedState:t,module:i,type:function(e,t){return[_n,vn,mn,hn,Cn].includes(e)?"ccApi/"+e:"dispatch/"+t}(f,d),ccUniqueKey:K,renderKey:_}),t&&function(e,t,n,r,o,a,c){var i=function(){!function(r,e,o,t,a,n){if(!o)return;var c=e.ctx,i=c.ccUniqueKey,u=t===pn,s=cn(a,o,n,Nn[c.ccClassKey].renderKeyClasses),d=s.sharedStateKeys,f=s.result,l=f.connect;f.belong.forEach(function(e){u&&e.ctx.ccUniqueKey===i||An(e,r,null,"broadcastState",o,pn)});var p=bn(a);l.forEach(function(e){if(!0!==e.__$$isUnmounted){var t=e.ctx;nn(t,a,p,o,r);var n=tn(t,a,p,o,r);t.__$$settedList.push({module:a,keys:d}),n&&(t.__$$reInjectConnObState(a),t.__$$ccForceUpdate())}})}(e,t,n,r,o,a)};if(0<c){var u=fn(t.ctx.ccUniqueKey,n);en(i,u,c)}else i()}(E,c,t,S,i,_,m)})})}else sn("your committed state "+Se)}function An(e,t,n,r,o,a,c,i){var u=e.state,s=e.ctx;if(!0===e.__$$isUnmounted||a!==pn||r!==_n&&!dn(o))return c&&c(u),i&&i(gn,o);var d=s.module,f=s.storedKeys,l=s.ccUniqueKey,p=En;if(n&&(p=Sn,s.renderKey!==n))return i&&i(gn,o);if(0<f.length){var y=Ie(o,f),_=y.partialState;if(!y.isStateEmpty){if(!0===s.persistStoredKeys){var v=Ie(u,f),m=Object.assign({},v.partialState,_);localStorage.setItem("CCSS_"+l,JSON.stringify(m))}In.setState(l,_)}}function h(){s.__$$settedList.push({module:d,keys:ln(C)}),s.__$$ccSetState(C,c,K)}var C=nn(s,d,u,o,t),K=tn(s,d,u,C,t,!1,!0);i?i(p,C,h):h()}function Rn(e,t,n,r,o){void 0===r&&(r=-1);try{yt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){X(e)}}var Tn=G,Mn=Ee,kn=te,Wn=Ye.store,Fn=Wn.getState,Ln=Wn.setState,jn=Ye.reducer._reducer,Pn=Ye.computed._computedValue,zn=O,qn=M;function Hn(e,t){void 0===t&&(t=!0);try{return ct(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;Gn(e)}(e,t),!1}}function Vn(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function Bn(e,t,n,r){var o;return!0===e?(function(e){Vt[e]=!0}(o=Gt()),r[o]=1):r[o=t||Gt()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function Gn(e,t){e&&(t?t(e):(Tn(e),Ye.errorHandler&&Ye.errorHandler(e)))}function Yn(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Vn(e,t)});r(o,n,c)}).catch(Pt)}(er,e,t,n)}function Xn(e,t,n){return Yn(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function Jn(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function Qn(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function Zn(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(Mn(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=Bn(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),Xn(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),Xn(l,v,t)}}function er(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;Hn(e,!1)?(e!==t&&n&&(Tn(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return Gn(e,h);var o,t=Fn(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=tr(y,!1,x,v,E,S,$,w,b),c=tr(y,!1,!0,v,E,S,$,w,b),i=tr(y,!0,x,v,E,S,$,w,b),u=Zn(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=Zn(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=Zn(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return Bt[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:Fn(),globalState:Fn(pe),moduleState:t,moduleComputed:Pn[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&Lt(U,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){Yt(e,t,n,Bt)}($,v,e);var n=[];!1===x&&(Lt(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===Vt[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===Ht[e]}($)||(n=Jt($,v,e),Qt($)):Xt($,v,e)),n.forEach(function(e){e.state&&Dn(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(Qt($),function(e){delete Bt[e]}($)),h&&h(null,e)}).catch(function(e){Lt(I,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),Gn(e,h)})})}function tr(b,x,U,N,I,O,D,A,R){return void 0===I&&(I=""),void 0===O&&(O=-1),void 0===R&&(R={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||O;if(Mn(t)){c=I;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||I;function l(){return Zn(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:R})(e,n,c,i)}var p,y,_=Bn(o,D,A,R),v=_._chainId,m=_._oriChainId,h=typeof e,C=N;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(zn(Ke.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==R[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(zn(Ke.CC_DISPATCH_STRING_INVALID,qn(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?ht("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=jn[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));er(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:T,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Vn(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:R})}).catch(Pt)}}function nr(a){return function(t){try{Rn(a,t)}catch(e){var n=Fn(a);if(!n)return Tn("invalid module "+a);var r=Ie(t,kn(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||Ln(a,r.partialState),0<o.length&&Tn("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),Y("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var rr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===ye?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},or=function(r){return function(e){var t=r.ctx;if(t.type===ye){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},ar=Ee,cr=fe;function ir(t,e){if(Ye.isStartup){if(!ar(e))throw Error("param config "+Se);if(t===pe)throw Error("configuring global module is not allowed");var n=e.reducer,r=e.computed,o=e.watch,a=e.init,c=e.isClassSingle,i=cr(e.state);if(n&&!ar(n))throw Error("config.reducer "+Se);if(pt(t,i,!0),Kt(t,n),r&&At(t,r),o&&kt(t,o),Ye.moduleSingleClass[t]=!0===c,a){if("function"!=typeof a)throw Error("init value must be a function!");Promise.resolve().then(a).then(function(e){nr(t)(e)})}Ye.moduleName_isConfigured_[t]=!0,Lt(14,t)}else et.push({module:t,config:e})}function ur(r,o){var a={};return te(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function sr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function dr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var fr=te,lr=Ee,pr=Ye.store._state;var yr=b,_r=O,vr=Ye.featureStr_classKey_,mr=Ye.userClassKey_featureStr_,hr=Ye.ccClassKey_ccClassContext_,Cr=0;var Kr=Ye.moduleName_stateKeys_,gr=Ye.moduleName_ccClassKeys_,Sr=Ye.moduleSingleClass,Er=Ye.ccClassKey_ccClassContext_,$r=Ye.computed._computedValue,wr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},br=M;function xr(e,t,n,r,o,a,c,i,u){void 0===e&&(e=q),void 0===a&&(a=[]),!0===i&&function(){if(!0!==Ye.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;ct(e,!1,"module["+e+"] is not configured in store"),it(Kr[e],a);var d=c;Array.isArray(c)?(d={},c.forEach(function(e){return d[e]="-"})):c[pe]||(c[pe]="-");var f,l=function(e,t,n){if(!n)return[];if("*"===n)return Kr[e];var r=wr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+S+" "+br("ccClassKey:"+t));return n}(e,t,o),p=function(o,e,t,a){if(!lr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Se);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=fr(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=pr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),fr(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,l),y=p.connectedModuleKeyMapping,_=p.connectedModuleNames,v=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===q&&yr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=vr[i];return u||(vr[i]=u=""+o+ ++Cr)}if(c.startsWith(m))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name, if you want to customize your dispatcher, \n      you can set autoCreateDispatcher=false in StartupOption, and use createDispatcher then.");if(hr[c]){if(mr[c]!==a)throw _r(Ke.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else mr[c]=a;return c}(s,e,d,l,r,p.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");f=n}else f=[v];return function(e,t,n,r,o,a,c){var i=Er[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Er[e]=i);var u={},s={};if(a){var d=Ye.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=$r[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(v,f,e,o,l,y,_),function(e,t){var n=Q(gr,e);if(!0===Sr[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,v),{_module:e,_connect:d,_watchedKeys:l,_ccClassKey:v}}var Ur=Ye.event_handlers_,Nr=Ye.handlerKey_handler_,Ir=Ye.ccUKey_handlerKeys_,Or=Ye.ccUKey_ref_,Dr=function(e,t,n){return e+"$"+t+"$"+n},Ar=Q,Rr=G;function Tr(e,t,n,r,o){void 0===o&&(o=null);var a=Ur[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function Mr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete Nr[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=Ur[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete Ir[n])}),Ur[e]=r.filter(function(e){return null!==e}))})}function kr(e,t,n,r,o,a){var c=Ar(Ur,r);if("function"!=typeof a)return Rr("event "+r+"'s handler is not a function!");var i=Dr(n,r,o),u=Ar(Ir,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),Nr[i]=d}function Wr(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),Tr(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=Or[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=Nr[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function Fr(e,t){Mr(Tr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Lr(e){var t=Ir[e];if(t){var n=[];t.forEach(function(e){return n.push(Nr[e])}),Mr(n)}}function jr(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var Pr=Object.freeze({bindEventHandlerToCcContext:kr,findEventHandlersToPerform:Wr,findEventHandlersToOff:Fr,offEventHandlersByCcUniqueKey:Lr,getEventItem:jr}),zr=Ye.waKey_uKeyMap_,qr=Ye.moduleName_stateKeys_;function Hr(s,e,d){return new Proxy(e,{get:function(e,t){var n=s.ctx;if(n.__$$renderStatus===g){var r=n.ccUniqueKey;if(d){var o=n.__$$nextCompareConnWaKeys,a=n.__$$nextCompareConnWaKeyCount;n.__$$compareConnWaKeys[d][t]=n.__$$curConnWaKeys[d][t]=zr[d+"/"+t][r]=1;var c=o[d];c[t]||(c[t]=2,a[d]++)}else{var i=n.module;if(qr[i].includes(t)){var u=n.__$$nextCompareWaKeys;n.__$$compareWaKeys[t]=n.__$$curWaKeys[t]=zr[i+"/"+t][r]=1,u[t]||(u[t]=2,n.__$$nextCompareWaKeyCount++)}}}return e[t]},set:function(e,t){return e[t]=e[t],!0}})}function Vr(o,a){return void 0===a&&(a=!1),function(e,t,n,r){bt(Ce,{type:"computed",isLazyComputed:a,refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep},e,t,n,r)}}var Br=G,Gr=R;function Yr(e){return e?e.props||e:{}}var Xr=Ye.store.getState;var Jr=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[_e],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=Xr(m);u="bool"===p?!le(m!==r?C:o,_):function(e){var t=ne(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):G("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=ne(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var Qr=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(G(t+" can not convert to int but you set ccint as true!！"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?G("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},Zr=Ye.store.getState;function eo(e,t,n){var r=t.ctx,o=r.module,a=Jr(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];ct(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&Dn(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?Zr(_):t.state;Dn(Qr(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=Qr(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var to=Ye.reducer,no=to._module_fnNames_,ro=to._caller,oo=Ye.refStore,ao=Ye.ccClassKey_ccClassContext_,co=Ye.moduleName_stateKeys_,io=Ye.store.getState,uo=Ye.moduleName_ccClassKeys_,so=Ye.computed._computedValue,fo=Ye.waKey_uKeyMap_,lo=te,po=O,yo=M,_o=Q,vo=J,mo=G,ho=b,Co=0;var Ko=function(){},go=function(e){return"type of defineEffect "+e+" param must be"},So=function(e){return"-"===e.watchedKeys?lo(e.__$$renderStatus===g?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},Eo=function(t,e){function n(e){return lo(t.__$$renderStatus===g?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?co[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function $o(n,r,e){("*"===e?co[r]:e).forEach(function(e){var t=fo[r+"/"+e];t?t[n]=1:mo("invalid watchedKey["+e+"] of module["+r+"]")})}function wo(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=e.connect,m=void 0===v?{}:v,h=e.tag,C=void 0===h?"":h,K=e.ccOption,g=void 0===K?{}:K,S=u,E=c.ctx,$=c.setState,w=c.forceUpdate;!ho(E)&&E.ccUniqueKey?($=E.__boundSetState,w=E.__boundForceUpdate):s!==ye&&($=c.setState.bind(c),w=c.forceUpdate.bind(c));var b={};b.persistStoredKeys=void 0===g.persistStoredKeys?y:g.persistStoredKeys,b.tag=g.tag||C;var x=function(e,t,n,r){var o;if(e)n&&Br("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=Gr(t,n);else{var a=Et(r);o=Gr(t,a)}return o}(r,o,i,b.tag);if(b.renderKey=g.renderKey||x,b.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(it(t,o),o):[]}(d,co[S],g.storedKeys,l),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<b.storedKeys.length&&!i)throw po(Ke.CC_STORED_KEYS_NEED_CCKEY,yo("ccClassKey["+o+"]"));var U=ao[o],N=U.connectedState,I=lo(m),O=U.connectedComputed||{},D={},A={},R=io(u),T=so[u]||{},M=so[pe]||{},k=io(pe),W=$e(lo(d),co[S]),F=oo._state[x]||{},L=Object.assign({},d,F,R),j=lo(c.state=L),P=_o(uo,u);P.includes(o)||P.push(o);function z(e,t){Dn(e,t,c)}function q(e,t,n,r,o,a){z(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function H(e,t,n,r,o){q(e,t,me,n,r,o)}function V(e,t,n,r,o){"string"==typeof e?H(e,t,n,r,o):q(S,e,ve,t,n,r)}function B(e,t,n){q(S,c.state,he,e,t,n)}var G=[],Y=[],X={effectItems:G,eid_effectReturnCb_:{},effectPropsItems:Y,eid_effectPropsReturnCb_:{}},J={},Q=Yr(c.props),Z=((n={type:s,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:x,renderCount:1,initTime:Date.now(),watchedKeys:_,privStateKeys:W,connect:m,connectedModules:I,__$$onEvents:[],__$$hasModuleState:0<co[u].length,__$$renderStatus:ge,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},persistStoredKeys:b.persistStoredKeys,storedKeys:b.storedKeys,renderKey:b.renderKey,tag:b.tag,prevProps:Q,props:Q,mapped:{},prevState:L,state:L,moduleState:R,mstate:R,globalState:k,gstate:k,connectedState:D,cstate:A,extra:{},staticExtra:{},refComputed:{},refComputedOri:{},moduleComputed:T,globalComputed:M,connectedComputed:O,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=j,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.effectMeta=X,n.retKey_fnUid_={},n.reactSetState=Ko,n.__boundSetState=$,n.reactForceUpdate=Ko,n.__boundForceUpdate=w,n.setState=V,n.setModuleState=H,n.forceUpdate=B,n.changeState=z,n.refs=J,n.useRef=function(t){return function(e){return J[t]={current:e}}},n.__$$ccSetState=Jn(c),n.__$$ccForceUpdate=Qn(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=V,c.forceUpdate=B,Z.initState=function(e){return c.__$$isMounted?mo("ctx.initState can only been called before first render period!"):Ee(d)?(c.state=Object.assign({},d,e,F,R),void(Z.prevState=Z.state=c.state)):mo("state "+Se)};var ee=tr(c,!1,!1,S);if(Z.dispatch=ee,1<t&&(Z.lazyDispatch=tr(c,!0,!1,S),Z.silentDispatch=tr(c,!1,!0,S),Z.dispatchLazy=Z.lazyDispatch,Z.dispatchSilent=Z.silentDispatch,Z.invoke=Zn(c),Z.lazyInvoke=Zn(c,{isLazy:!0}),Z.silentInvoke=Zn(c,{isLazy:!1,isSilent:!0}),Z.invokeLazy=Z.lazyInvoke,Z.invokeSilent=Z.silentInvoke,Z.setGlobalState=function(e,t,n,r){q(pe,e,ve,t,n,r)}),2<t){var te=function(e,t,n,r,o){var a;if("string"==typeof e)return eo.bind(null,((a={})[_e]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);eo({type:"val"},c,e)};Z.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"val")},Z.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"bool")},Z.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"int")},Z.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),te(e,t,n,r,"as")},Z.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),eo(((o={})[_e]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},Z.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),eo(((r={})[_e]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(Z.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Wr.apply(Pr,[jr(e)].concat(n))},Z.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?x:a,i=jr(e);Fr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},Z.on=function(e,t){var n=jr(e),r=n.identity;kr(S,o,x,n.name,void 0===r?null:r,t)}),4<t){Z.execute=function(e){return Z.execute=e},Z.watch=function(a){return function(e,t,n,r,o){bt(Ce,{type:"watch",refCtx:a,stateKeys:a.stateKeys,retKeyFns:a.watchRetKeyFns,module:a.module,connect:a.connect,dep:a.watchDep},e,t,n,r,o)}}(Z),Z.computed=Vr(Z),Z.lazyComputed=Vr(Z,!0);var ne=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(go("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(go("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){e.includes("/")?c.push(e):c.push(S+"/"+e)}));var i={fn:e,isProp:s,depKeys:o,moDepKeys:c,eId:Symbol("__autoGen_"+ ++Co+"__"),compare:n,immediate:a};u.push(i)}};Z.effect=ne(G,!1),Z.effectProps=ne(Y,!0)}var re=Z.moduleReducer,oe=Z.connectedReducer,ae=Z.__$$curConnWaKeys,ce=Z.__$$compareConnWaKeys,ie=Z.__$$compareConnWaKeyCount,ue=Z.__$$nextCompareConnWaKeys,se=Z.__$$nextCompareConnWaKeyCount,de=I.slice();de.includes(u)?mo("module["+u+"] is in belongTo and connect both, it will cause redundant render."):de.push(u);var fe=!1;if(de.forEach(function(o){var e;e=o===u?re:vo(oe,o);var t=m[o];if(t){var n=N[o];A[o]=n,"-"===t?(fe=!0,ae[o]={},ce[o]={},ie[o]=0,ue[o]={},se[o]=0,n=Hr(c,n,o)):$o(x,o,t),D[o]=n}(no[o]||[]).forEach(function(r){e[r]=function(e,t,n){return ee(o+"/"+r,e,t,n)}})}),Z.reducer=ro,"-"===_?(fe=!0,c.state=Hr(c,L),Z.state=c.state):$o(x,u,_),Z.__$$autoWatch=fe,Z.__$$reInjectConnObState=function(e){var t=Z.connectedState;Array.isArray(m)?t[e]=Hr(c,N[e],e):"-"===m[e]&&(t[e]=Hr(c,N[e],e));Z.globalState=t[pe]},Z.getWatchedKeys=function(){return So(c.ctx||Z)},Z.getConnectWatchedKeys=function(e){return Eo(c.ctx||Z,e)},ho(E))c.ctx=Z;else{var le=c.ctx;Object.assign(c.ctx,Z,{__$$curWaKeys:le.__$$curWaKeys,__$$compareWaKeys:le.__$$compareWaKeys,__$$compareWaKeyCount:le.__$$compareWaKeyCount,__$$nextCompareWaKeys:le.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:le.__$$nextCompareWaKeyCount,__$$curConnWaKeys:le.__$$curConnWaKeys,__$$compareConnWaKeys:le.__$$compareConnWaKeys,__$$compareConnWaKeyCount:le.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:le.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:le.__$$nextCompareConnWaKeyCount})}}var bo=Ye.store.getState;var xo=te,Uo=Ye.runtimeVar;function No(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$isBSe=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!Ee(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Uo.bindCtxToMethod&&!1!==t)&&xo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.__$$isBSe=!1,r.refComputed=It(r.computedRetKeyFns,r.refComputedOri),function(e){var r=e.ctx,t=r.hasComputedFn,n=r.hasWatchFn,o=r.connect,a=r.module,c=de(a),i=te(o),u=r.state;t&&(nn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=bo(e),n=de(e);nn(r,e,t,t,n,!0,!0)})),n&&(tn(r,a,u,u,c,!0,!0),i.forEach(function(e){var t=bo(e),n=de(e);tn(r,e,t,t,n,!0,!0)}))}(n)}var Io=Ye.moduleName_stateKeys_,Oo=Ye.store,Do=Oo.getPrevState,Ao=Oo.getState,Ro=Oo.getStateVer,To=function(e,t){return G("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function Mo(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,h=u.__$$prevMoStateVer,C=u.__$$settedList,K=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var g=u.prevState,S=e.state,E=[];o.forEach(function(e){var t=e.moDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(C),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=void 0,p=s.split("/"),y=p[0],_=p[1];if(y!==K){var v=Do(y),m=Ro(y);if(h[_]===m[_])continue;if(h[_]=m[_],!v){To(s,"module["+y+"]");continue}if(!Io[y].includes(_)){To(s,"unmoduledKey["+_+"]");continue}d=Ao(y),f=v,l=_}else d=S,f=g,l=s;if(f[l]!==d[l]){i=!0;break}}else if(c[s]){i=!0;break}}i&&E.push({fn:r,eId:o})}else E.push({fn:r,eId:o})}),E.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),C.length=0}}var ko=G,Wo=O,Fo=M,Lo=P,jo=k,Po=Ye.runtimeVar,zo=Ye.ccClassKey_ccClassContext_,qo=Ye.ccUKey_ref_,Ho={};function Vo(e,t,n,r){function o(){qo[e]=t,n.push(e)}!function(e){void 0===Ho[e]?Ho[e]=1:Ho[e]+=1}(e),r?setTimeout(o,r):o()}function Bo(e,t,n,r,o){var a=zo[n],c=a.ccKeys;Po.isDebug&&console.log(Lo("register ccKey "+o+" to CC_CONTEXT"),jo());var i=Ye.isHotReloadMode();if(c.includes(o)){var u=function(){throw Wo(Ke.CC_CLASS_INSTANCE_KEY_DUPLICATE,Fo("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===Ho[e]?0:Ho[e]}(o);if(t&&0<s)throw Wo(Ke.CC_CLASS_INSTANCE_MORE_THAN_ONE,Fo("ccClass:"+n));1<s&&u(),ko("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+Fo("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),Vo(o,e,c,600)}else u()}else Vo(o,e,c);return a}var Go=Ye.waKey_uKeyMap_;function Yo(t,e,n,r){var o=!1,a=te(t);a.forEach(function(e){2===t[e]&&(o=!0,delete Go[n+"/"+e][r])}),e<a.length&&(o=!0),o&&ft(n)}function Xo(e){var t=e.ctx;if(t.__$$renderStatus=ge,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;Yo(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&Yo(a[e],c[e],e,o)})}}function Jo(e){Xo(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.__$$onEvents;Bo(e,t.isSingle,t.ccClassKey,t.ccKey,t.ccUniqueKey),0<n.length&&(n.forEach(function(e){return e.fn.apply(void 0,e.args)}),n.length=0),Mo(e,!0)}function Qo(e){Xo(e),Mo(e),e.ctx.prevState=e.state}var Zo=Ye.ccUKey_ref_,ea=Ye.ccUKey_handlerKeys_,ta=Ye.runtimeVar,na=Ye.ccClassKey_ccClassContext_,ra=Ye.handlerKey_handler_;function oa(e,t){ta.isDebug&&console.log(P(t+" unset ref"),k("purple")),delete Zo[t];var n=na[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===Ho[e]?Ho[e]=0:Ho[e]-=1}(t);var o=ea[t];o&&o.forEach(function(e){delete ra[e]})}var aa=te;function ca(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),aa(n).forEach(e)}function ia(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey;if(e.__$$isMounted){var o=t.effectMeta,a=o.eid_effectPropsReturnCb_;ca(o.eid_effectReturnCb_,t),ca(a,t),Lr(n)}oa(r,n)}function ua(e){var t=e.ctx;if(t.__$$renderStatus=g,1!==t.renderCount&&t.__$$autoWatch){t.__$$hasModuleState&&(e.state=Hr(e,e.state),t.state=e.state,t.moduleState=Hr(e,t.mstate),t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var sa=function(e){return"CC("+e+")"},da=we,fa=oe,la=fe,pa=Ye.runtimeVar,ya=k,_a=P,va=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function ma(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?q:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=xr(o,t,S,A,da(s),d,_,$,x),N=U._module,I=U._ccClassKey,O=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:D.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=la(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(dr(n));var a=Object.assign({},e,{isSingle:g,module:N,tag:v,state:o,type:A,watchedKeys:s,ccClassKey:I,connect:O,storedKeys:d,persistStoredKeys:p});if(wo(dr(n),a,m),n.ctx.reactSetState=rr(dr(n)),n.ctx.reactForceUpdate=or(dr(n)),l&&(n.$$setup||i))throw va("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(dr(n))),No(dr(n),l||n.$$setup||i,!1))}catch(e){Pt(e)}return n}sr(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&fa(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Jn(e,this),t.__$$ccForceUpdate=Qn(e),e.state||(e.state={}),Object.assign(e.state,this.state),ua(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw va("ccUniqueKey "+t.ccUniqueKey);No(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),Jo(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),Qo(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),ia(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,pa.isDebug&&console.log(_a("@@@ render "+sa(I)),ya()),!1===C?(ua(this),c.prototype.render.call(this)):D.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=I===B?"CcDispatcher":sa(I),t}}catch(e){Pt(e)}}function ha(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return sr(t,e),t.prototype.render=function(){return this.props.children||D.createElement("span",{style:{display:"none"}})},t}(D.Component);if(Ye.refs[B]){if(!Ye.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");Y("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return ma({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var Ca=Ee,Ka=te;function ga(e,t){if(!Ca(e))throw Error(t+" "+Se)}function Sa(e){if(!Ca(e))throw Error("StartupOption.moduleSingleClass "+Se);!function(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}(Ye.moduleSingleClass,e)}function Ea(e){if(0<e.length){var o=Ye.plugins;o.length=0,Wt.forEach(function(e){return Ft[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(jt),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),Ye.pluginNameMap=a}}var $a=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(D.createElement(e),t)},wa=!1;function ba(e,r){void 0===e&&(e=!1),ee(Ye.event_handlers_),ee(Ye.ccUKey_handlerKeys_);var o=Ye.ccClassKey_ccClassContext_,t=Ye.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),ee(t.ccKeys,n)}),ee(Ye.handlerKey_handler_),ee(t,[B].concat(r)),e){var n=Ye.computed,a=Ye.watch,c=n._computedValue,i=a._watchDep;te(Ye.store._state).forEach(function(e){e!==H&&(c[e]&&(Ye.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0},At(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},fnCount:0},kt(e,a._watchRaw[e])))})}}function xa(){var n=Ye.ccUKey_ref_,r=[];return te(n).forEach(function(e){var t=n[e];t&&t.ctx.type===x&&!0!==t.props.__$$regDumb&&!0===t.__$$isMounted&&0==t.__$$isUnmounted&&r.push(e)}),r}function Ua(){ee(Ye.globalStateKeys);var e=te(Ye.moduleName_isConfigured_).concat([q,H,pe,a]);ee(Ye.reducer._reducer,e),ee(Ye.store._state,e,{}),ee(Ye.computed._computedDep,e),ee(Ye.computed._computedValue,e),ee(Ye.watch._watchDep,e),ee(Ye.middlewares),ee(Ye.waKey_uKeyMap_),be={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=xa();return ba(!1,t),t}function Na(e){void 0===e&&(e=!1),Ye.info.latestStartupTime=Date.now();var t=[];return Ye.isStartup?Ye.isHotReloadMode()?e?(console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),wa=!0,t=Ua()):(wa?wa=!1:(function(){if(!Ye.refs[B]){var e=ha();$a(e)}}(),t=xa(),ba(Ye.reComputed,t)),t):(console.warn("clear failed because of not running under hot reload mode!"),t):(wa=!0,t)}var Ia=ae,Oa=fe;function Da(e){var t=e.props,n=Ia(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=Oa(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y;if(!0!==t.__$$regDumb){var b=xr(r,C,o,x,we(l),m,y,!0);E=l,$=b._ccClassKey,w=b._connect}wo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S,type:x},c),e.ctx.reactSetState=rr(e),e.ctx.reactForceUpdate=or(e),e.__$$compareProps=u,No(e,s,d)}var Aa=Y,Ra=re,Ta="";function Ma(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,U=void 0!==x&&x,N=_.computedCompare,I=void 0===N||N,O=_.watchCompare,D=void 0===O||O,A=_.watchImmediate,R=void 0!==A&&A,T=_.alwaysGiveState,M=void 0===T||T,k=_.reComputed,W=void 0===k||k;try{throw Error()}catch(e){var F=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=Ye.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return Na(Ye.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(Ta)if(Ta!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);se()?(u=c(),Ta=a):(X(d),s=!1)}else u=c();else Ta=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),L=F.ccFragKeys;if(!F.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Aa("cc version "+Ye.info.version),void 0!==b&&(Ye.isHot=b),Ye.reComputed=W,Ye.errorHandler=w;var j=Ye.runtimeVar;if(j.alwaysGiveState=M,j.isStrict=g,j.isDebug=E,j.computedCompare=I,j.watchCompare=D,j.watchImmediate=R,j.bindCtxToMethod=U,Sa(y),function(e){ga(e,"state"),delete e[V],delete e[H],void 0===e[pe]&&(e[pe]={}),void 0===e[q]&&(e[q]={});for(var t=Ka(e),n=t.length,r=0;r<n;r++){var o=t[r];pt(o,e[o])}}(o),function(t){ga(t,"reducer"),void 0===t[q]&&(t[q]={}),void 0===t[pe]&&(t[pe]={}),Ka(t).forEach(function(e){return Kt(e,t[e])})}(c),function(t){ga(t,"computed"),Ka(t).forEach(function(e){return At(e,t[e])})}(d),function(t){ga(t,"watch"),Object.keys(t).forEach(function(e){return kt(e,t[e])})}(l),function(n){if(n){if(!Ca(n))throw Error("init "+Se);Ka(n).forEach(function(t){ct(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){nr(t)(e)})}),Ye.init._init=n}}(u),function(e){if(0<e.length){var t=Ye.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C),!Ye.refs[B]){var P=ha();$a(P)}var z=function(e){Ra("CC_CONTEXT",Ye,e),Ra("ccc",Ye,e),Ra("cccc",Ye.computed._computedValue,e),Ra("sss",Ye.store._state,e)};window.mcc?setTimeout(function(){z(window.mcc[ie()])},1200):z(),Ye.isStartup=!0,Ea(m),L.forEach(function(e){var t=Ye.ccUKey_ref_[e];ia(t),Da(t),Jo(t)})}catch(e){if(!w)throw e;w(e)}}}function ka(e){throw Error("[[run]]: param error, "+e+" "+Se)}var Wa=Ee,Fa=te,La=b,ja=fe;function Pa(e,t){var n=ae(e);return delete n.__checkStartUp,delete n.__calledBy,ma(n,t)}var za=oe,qa=D.createElement("span",{style:{display:"none"}}),Ha=function(r){function e(e,t){var n;return Da(dr(n=r.call(this,e,t)||this)),n}sr(e,r);var t=e.prototype;return t.componentDidMount=function(){Jo(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&za(Yr(e),Yr(this.props));return this.state!==t||n},t.componentDidUpdate=function(){Qo(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),ia(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=Yr(e);var t=e.render,n=t||e.children;if("function"==typeof n){ua(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||qa):n(a)||qa}if(D.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(D.Component);function Va(e,t){var n=ae(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=we(c),l=xr(o,t,r,x,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),D.createElement(t,e.mapped)):D.createElement(t,e)},ccKey:o.ccKey,register:e};return D.createElement(Ha,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var Ba=Ye.ccUKey_ref_,Ga=1;function Ya(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function Xa(e,t,n,r,o,a,c,i,u,s){var d=n||fe(r),f=o.bindCtxToMethod,l=o.watchedKeys,p=void 0===l?"-":l,y=o.storedKeys,_=void 0===y?[]:y,v=o.connect,m=void 0===v?{}:v,h=o.setup,C=o.lite;Ga+=1;var K=xr(o.module,s,o.renderKeyClasses,ye,we(p),_,m,!0),g=K._module,S=K._ccClassKey,E=K._connect,$=e||new Ya(a,c,i),w=Object.assign({},o,{module:g,watchedKeys:p,state:d,type:ye,ccClassKey:S,connect:E,ccOption:i.ccOption});$.props=i,wo($,w,C),$.ctx.reactSetState=rr($),$.ctx.reactForceUpdate=or($);var b=$.ctx;return b.props=i,b.extra=u,No($,h,f),t.current=$.ctx.ccUniqueKey,b.useRef=function(e){var t=D.useRef(null);return b.refs[e]=t},$}function Ja(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}var Qa="react version is LTE 16.8";function Za(e,t){var n=ae(e),r=n.state,o=void 0===r?{}:r,a=n.props,c=void 0===a?{}:a,i=n.mapProps,u=n.layoutEffect,s=void 0!==u&&u,d=n.extra,f=void 0===d?{}:d,l=D.useState;if(!l)throw Error(Qa);function p(e){return Xa(e,g,m,o,n,C,K,c,f,t)}var y,_=Ga,v=l(_)[0]===_,m=v?fe(o):0,h=l(m),C=h[0],K=h[1],g=D.useRef(null);if(v)y=p();else if(y=Ba[g.current]){var S=y.ctx;S.prevProps=S.props,y.props=S.props=c,S.extra=f}else y=p();var E=y.ctx,$=s?D.useLayoutEffect:D.useEffect;if($(function(){y.isFirstRendered||Qo(y),Ja(E,K)}),$(function(){return!1===y.isFirstRendered?p(y):y.isFirstRendered=!1,Ja(E,K),Jo(y),function(){ia(y)}},[]),i){var w=i(E);if(!Ee(w))throw Error("mapProps ret "+Se);E.mapped=w}return ua(y),E}function ec(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function tc(e){return Ye.store.getState(e)}var nc=Ye.computed._computedValue;var rc=Ye.ccUKey_ref_,oc=Ye.ccClassKey_ccClassContext_;function ac(){var n=[],r=Ye.ccUKey_ref_;return te(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function cc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!Ye.isStartup)throw Error("cc is not startup yet");at(e),ct(t,!1);var s=Ye.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,fe(o));var f=ur(Ye.reducer._reducer[t]||{},e);a&&Object.assign(f,ur(a,e));var l=Ye.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=Ye.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=Ye.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),ir(e,_)}function ic(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=ja(n),"function"==typeof n&&(Ye.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),Wa(t)||ka("store"),Wa(e)||ka("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};Fa(t).forEach(function(e){return r(e,t[e])}),et.forEach(function(e){var t=e.module,n=e.config;Y("configure pending module["+t+"]"),r(t,n)}),et.length=0,La(s.init)&&(s.init=null),Ma(s,e)}function uc(e,t){return Pa({connect:e},t)}function sc(e,t){return Va({connect:e},t)}function dc(e,o){var a=ae(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=Za(a,o);return D.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&D.memo?D.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function fc(e,t,n,r,o){void 0===o&&(o=!1);try{yt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;G(e.message)}}function lc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&ec(),"string"!=typeof e&&ec(),Rn(e,t,n,r,o)}function pc(e,t,n,r){yt().ctx.set(e,t,n,r)}function yc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=tc(n[0]);return Qr(e,t,!1,r,!1).state}function _c(e){return bc[e].connectedState||{}}function vc(e){return e?nc[e]:nc}function mc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=yt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){G(e)}}function hc(e,t){try{yt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;G(e.message)}}function Cc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=oc[e];return t&&t.ccKeys.forEach(function(e){var t=rc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Kc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];ac().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function gc(e,t,n){return{fn:e,depKeys:t,compare:n}}function Sc(e,t,n){return{fn:e,depKeys:t,compare:n,lazy:!0}}function Ec(e,t){return void 0===t&&(t=!0),{fn:function(){return e},depKeys:[],compare:t}}function $c(e,t,n,r){return{fn:e,depKeys:t,compare:n,immediate:r}}function wc(e,t,n){return{fn:e,depKeys:t,compare:n,immediate:!0}}var bc=Ye.ccClassKey_ccClassContext_,xc=Pa,Uc=Va,Nc=ir,Ic=tc,Oc=Ye.store.getGlobalState,Dc=Ct,Ac=Ye,Rc=ha,Tc=ac,Mc=Ye.reducer._caller,kc=Na,Wc=Ha,Fc=u,Lc=Ye.store.appendState,jc=Za,Pc={cloneModule:cc,emit:mc,off:hc,connect:uc,connectDumb:sc,register:xc,registerDumb:Uc,registerHookComp:dc,configure:Nc,dispatch:Dc,run:ic,setGlobalState:fc,setState:lc,set:pc,setValue:yc,getGlobalState:Oc,getState:Ic,getComputed:vc,getConnectedState:_c,ccContext:Ac,createDispatcher:Rc,execute:Cc,executeAll:Kc,getRefs:Tc,reducer:Mc,clearContextIfHot:kc,CcFragment:Wc,cst:Fc,appendState:Lc,useConcent:jc,bindCcToMcc:zc,defComputed:gc,defLazyComputed:Sc,defComputedVal:Ec,defWatch:$c,defWatchImmediate:wc};function zc(e){if(!Hc)throw Error("current env is not multi concent ins mode");if(Hc[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ce=e}(e),re(e,Pc,Hc)}function qc(){var e=ce?window.mcc[ce]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=Ac.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var Hc=window.mcc;Hc?setTimeout(function(){if(!ie())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");qc()},1e3):(qc(),re("cc",Pc)),e.cloneModule=cc,e.run=ic,e.connect=uc,e.connectDumb=sc,e.register=xc,e.registerDumb=Uc,e.registerHookComp=dc,e.configure=Nc,e.setGlobalState=fc,e.setState=lc,e.set=pc,e.setValue=yc,e.getState=Ic,e.getGlobalState=Oc,e.getConnectedState=_c,e.getComputed=vc,e.emit=mc,e.off=hc,e.dispatch=Dc,e.ccContext=Ac,e.createDispatcher=Rc,e.execute=Cc,e.executeAll=Kc,e.getRefs=Tc,e.reducer=Mc,e.clearContextIfHot=kc,e.CcFragment=Wc,e.cst=Fc,e.appendState=Lc,e.useConcent=jc,e.defComputed=gc,e.defLazyComputed=Sc,e.defComputedVal=Ec,e.defWatch=$c,e.defWatchImmediate=wc,e.bindCcToMcc=zc,e.default=Pc,Object.defineProperty(e,"__esModule",{value:!0})});
