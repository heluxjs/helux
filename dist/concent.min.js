!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("react-dom")):"function"==typeof define&&define.amd?define(["exports","react","react-dom"],t):t(e.concent={},e.React,e.ReactDOM)}(this,function(e,I,r){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I,r=r&&r.hasOwnProperty("default")?r.default:r;var t,n,o,W={$$default:[]},_e="$$global",z="$$default",q="$$cc",H="$$concent_void_module_624313307",a="$$CONCENT_ROUTER",A="$$CcClass",ve="$$CcHook",U="$$CcFrag",f="$$CcOb",T="$$CcCust",h="$$Cc",B="$$Dispatcher",c="__cc_dispatcher_container_designed_by_zzk_qq_is_624313307__",me=Symbol("__for_sync_param_ccsync__"),O=10,N=11,D=13,M="dispatch",he="setState",Ce="setModuleState",Ke="forceUpdate",w="invoke",K="sync",k="module",ge="ref",Se="computed",Ee="watch",$e={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},i=((t={})[$e.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[$e.CC_MODULE_NOT_FOUND]="module not found!",t[$e.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[$e.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[$e.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[$e.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[$e.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[$e.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[$e.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[$e.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),u=Object.freeze({MODULE_GLOBAL:_e,MODULE_DEFAULT:z,MODULE_CC:q,MODULE_VOID:H,MODULE_CC_ROUTER:a,CC_CLASS:A,CC_HOOK:ve,CC_FRAGMENT:U,CC_OB:f,CC_CUSTOMIZE:T,CC_PREFIX:h,CC_DISPATCHER:B,CC_DISPATCHER_BOX:c,CCSYNC_KEY:me,SIG_FN_START:O,SIG_FN_END:N,SIG_FN_QUIT:12,SIG_FN_ERR:D,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,DISPATCH:M,SET_STATE:he,SET_MODULE_STATE:Ce,FORCE_UPDATE:Ke,INVOKE:w,SYNC:K,CATE_MODULE:k,CATE_REF:ge,FN_CU:Se,FN_WATCH:Ee,ERR:$e,ERR_MESSAGE:i}),s=((n={})[_e]={},n[z]={},n[q]={},n),d=((o={})[_e]={},o[z]={},o[q]={},o),l={},p={},j={_computedValueOri:d,_computedValue:s,_computedRaw:p,_computedDep:l,getRootComputedValue:function(){return s},getRootComputedDep:function(){return l},getRootComputedRaw:function(){return p}},y={},_={},C={_watchRaw:_,_watchDep:y,getRootWatchDep:function(){return y},getRootWatchRaw:function(){return _}},v={isStrict:!1,isDebug:!1,objectValueCompare:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1},m=Symbol("cuk"),g="1",we="2",R="function",be="is not a plain json object!",S="should be an string array or *!",E=console.error;function $(e){return null!=e&&0<ie(e).length}function b(e){return!$(e)}function xe(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function x(e,t){var n="";n="string"==typeof e?e:i[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function L(e,t,n,r,o,a,c){var i;return(i={})[m]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function F(e,t){return e+"$"+t}function P(e){return e?" --verbose-info: "+e:""}function V(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function G(e){return"%c"+e}var Y=function(e){return"------------ CC "+e+" ------------"};function X(e){E(Y("WARNING")),e instanceof Error?(E(e.message),E(e.stack)):E(e)}function J(e){console.log(Y("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function Z(e){if(E(Y("WARNING")),E(e),v.isStrict)throw e}function Q(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function ee(e,t){return Q(e,t,[])}function te(e,t){e.includes(t)||e.push(t)}function ne(e,t,n){te(ee(e,t),n)}function re(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}function oe(e,t,n){var r=e[t];r||(r=e[t]={}),re(r,n)}function ae(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function ce(n,r,o,a){if(void 0===r&&(r=[]),void 0===a&&(a=!1),Array.isArray(n)){var t=[];r.forEach(function(e){n.includes(e)&&t.push(e)}),n.length=0,t.forEach(function(e){return n.push(e)})}else Object.keys(n).forEach(function(e){if(r.includes(e));else{var t=n[e];a&&t?ie(t).forEach(function(e){return delete t[e]}):o?n[e]=o:delete n[e]}})}function ie(e){return Object.keys(e)}function ue(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function se(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function de(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function fe(o,a,c){var i={},u=!1;if(a){var s=v.objectValueCompare;ie(a).forEach(function(e){var t=o[e],n=a[e],r=!0;"object"!=typeof n?r=t!==n:s&&(r=t!==n),r&&(c&&(c.prevStateContainer[e]=t,c.incStateVer(e),o[e]=n),i[e]=n,u=!0)})}return u?i:null}function Ue(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function le(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:z},e)}var pe="";function ye(){return pe}function Oe(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function Ne(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function De(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function Ie(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!xe(t))throw Error("state "+be);return t}function Ae(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function Te(e){return"-"===e?"*":e}function Me(e){return Array.isArray(e)||"-"===e||"*"===e}function Re(e,t,n){void 0===n&&(n=!0);var r=t||{},o={fn:e},a=Me(r)?{depKeys:r}:r;return n&&function(e){if(e&&!Me(e))throw Error("depKeys must an array , '*' or '-'")}(a.depKeys),Object.assign(o,a)}var We={},ke={};function je(t,n,r){try{t[n][r]=1}catch(e){var o={};o[r]=1,t[n]=o}}function Le(e,t){return e+"/"+t}function Fe(e,t){je(We,e,t)}function Pe(e,t,n){!function(e,t){try{delete We[e][t]}catch(e){}}(Le(e,t),n)}var Ve={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function ze(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var qe=function(e,t){return e.sort-t.sort};function He(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=ie(d),_=ie(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return ze(e,d,f[e])}).sort(qe),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(qe),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return ie(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Ve[t][n],S=i?Q(g,i):g,E=S[K];return E?{pickedFns:E.map(function(e){return ze(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(qe)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function Be(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function Ge(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!xe(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=ie(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?Be(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){Be(o,t,e)&&(c=!1)}),r&&(a=Ue(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}function Ye(e,n){return new Proxy(e,{get:function(e,t){return n.includes(t)||n.push(t),e[t]},set:function(e,t){return e[t]=e[t],!0}})}function Xe(e,t,n,r){var o=e.ctx;if(!0===o.__$$inBM||o.__$$renderStatus===g){var a=o.ccUniqueKey;if(r){var c=o.module;if(!W[c].includes(n))return;var i=Le(c,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[i]=1);if("-"!==o.watchedKeys)return;var u=o.__$$curWaKeys,s=o.__$$compareWaKeys,d=o.__$$nextCompareWaKeys;Fe(i,a),s[n]=u[n]=1,d[n]||(d[n]=2,o.__$$nextCompareWaKeyCount++)}else{var f=Le(t,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[f]=1);if("-"!==o.connect[t])return;var l=o.__$$curConnWaKeys,p=o.__$$compareConnWaKeys,y=o.__$$nextCompareConnWaKeys,_=o.__$$nextCompareConnWaKeyCount;Fe(f,a),p[t][n]=l[t][n]=1;var v=y[t];v[n]||(v[n]=2,_[t]++)}}}var Je=j._computedValueOri,Ze=j._computedValue,Qe=j._computedDep;function et(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Xe(t,n,e,o)})}function tt(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var i=c?r.ctx.refComputedOri:Je[o],u=c?r.ctx.refComputedValue:Ze[o];return i?new Proxy(i,{get:function(e,t){if(i.hasOwnProperty(t))if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){et(n[e],r,e,t,a)})}else et(Qe[o],r,o,t,a);return u[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var nt,rt=function(e){return X(e+" call commit or commitCu as it is lazy")},ot={},at={};function ct(e,t,n){return e==k?Q(ot,t):Q(at,n)}function it(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===ge){var s=e.computedDep,d=n===Se?s:e.watchDep;u=Q(s,r),i=Q(d,r)}else{var f=j._computedDep,l=n===Se?f:C._watchDep;u=Q(f,r),i=Q(l,r)}var p=Q(i,"stateKey_retKeys_"),y=Q(i,"retKey_stateKeys_"),_=function(e){var n=ee(y,o);e.forEach(function(e){var t=ee(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=Q(u,"retKey_stateKeys_");_(t[e]||[])})}}function ut(e,t,n){return t===ge?e.computedRetKeyFns:(j._computedDep[n]||{}).retKey_fn_||{}}function st(l,E,$,w,p,e,b,y,x,U,O,N,D){void 0===l&&(l={});for(var I=l.ctx,A=I?I.ccUniqueKey:"",_=0,T=e,M=!0,R=!1,t=function(){var v=1===++_&&U,e=p(T,v),t=e.pickedFns,m=e.setted,h=e.changed;if(!t.length)return"break";var n,r,o=Oe(),C=o.commit,a=o.getFnCommittedState,c=Oe(),K=c.commit,g=c.getFnCommittedState,S=c.clear;if(t.forEach(function(e){var n=e.retKey,t=e.fn,r=e.isLazy,o=N+" "+O+" retKey["+n+"] can't",a={retKey:n,callInfo:x,isFirstCall:U,commit:C,commitCu:K,setted:m,changed:h,cuVal:D,stateModule:E,refModule:$,oldState:w,committedState:T,refCtx:I},c=v&&"-"===e.depKeys,i=[],u=[];if(c&&(a.cuVal=function(n,r,o,e,t,a){var c,i;return i=k===r?(c=Je[e],Ze[e]):(c=t.refComputedOri,t.refComputedValue),new Proxy(c,{get:function(e,t){return c.hasOwnProperty(t)?a.push(t):X(r+" "+o+" retKey["+n+"] get cuVal invalid retKey["+t+"]"),i[t]},set:function(){return!0}})}(n,N,O,E,I,i)),O===Se)if(r&&(a.commit=function(){return rt(o)},a.commitCu=a.commit),c){var s=Ye(b,u),d=t(s,s,a);D[n]=L(!1,d),it(I,N,Se,E,n,u),it(I,N,Se,E,n,i,!1),function(e,t,n,r,o,a){var c=ct(e,o,a),i=ut(n,o,a),u=ee(c,e);t.forEach(function(e){i[e].isStatic?u.push(e):ee(c,e).forEach(function(e){return te(u,e)})})}(n,i,I,0,N,E)}else if(r)D[n]=L(r,null,!0,t,b,w,a);else{var f=t(b,w,a);D[n]=L(!1,f)}else{var l=b,p=w;c&&(p=l=Ye(b,u)),!1===t(l,p,a)&&(M=!1),c&&(it(I,N,Ee,E,n,u),it(I,N,Ee,E,n,i,!1))}c&&N===ge&&u.forEach(function(e){return I.__$$staticWaKeys[Le(E,e)]=1});var y=g();if(y){var _=ut(I,N,E);ie(y).forEach(function(e){var t=_[e];t?t.isStatic?function(e,t,n,r){return ee(ct(t,n,r),e)}(e,N,E,A).includes(e)?X("commitCu:"+o+" change ["+e+"], ["+n+"] referred ["+e+"]"):D[e]=L(!1,y[e]):X("commitCu:"+o+" change ["+e+"], it must have zero dep keys"):X("commitCu:"+o+" commit ["+e+"], it is not defined")}),S()}}),T=a()){var i=Ge(T,"ref"===N?I.privStateKeys:W[E],!0),u=i.partialState,s=i.ignoredStateKeys;if(s.length){var d="they are not "+(N===ge?"private":"module")+", fn is "+N+" "+O;X("these state keys["+s.join(",")+"] are invalid, "+d)}if(u)if(O===Ee){var f=function(e,t){return t===ge?e.computedDep:j._computedDep}(I,N);st(l,E,$,w,function(e,t){return He(t,N,Se,f,E,w,e,A)},u,b,y,x,!1,Se,N,D)}else void 0===r&&(r=!1),T=n=u,r&&0===ie(n).length?T=null:(Object.assign(b,T),Object.assign(y,T),R=!0)}2<_&&(X("fnCtx.commit may goes endless loop, please check your code"),T=null)};T;){if("break"===t())break}return{shouldCurrentRefUpdate:M,hasDelta:R}}for(var dt=j._computedValue,ft=ie,lt=fe,pt={},yt=function(){return pt[B]},_t=function(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=mt(n),f=dt[n],l=j.getRootComputedDep(),p=C.getRootWatchDep(),y=a||yt(),_=y.module,v=Object.assign({},d,e),m=Object.assign({},e),h=m;return st(y,n,_,d,function(e,t){return He(t,k,"computed",l,n,d,e)},h,v,m,i,!1,"computed",k,f),st(y,n,_,d,function(e,t){return He(t,k,"watch",p,n,d,e)},h,v,m,i,!1,"watch",k,f),s||vt(n,m),m},vt=function(t,e,n){void 0===n&&(n=!1);var r=e;n&&(r=Ge(e,W[t],!0).partialState);var o=mt(t),a=ht(t);return lt(o,r,{prevStateContainer:a,incStateVer:function(e){return Ct(t,e)}})},mt=function(e){return gt[e]},ht=function(e){return St[e]},Ct=function(e,t){Et[e][t]++},Kt=function(){var e;return(e={})[q]={},e[H]={},e[_e]={},e[z]={},e},gt=Kt(),St=Kt(),Et={},$t={getDispatcher:yt,isHotReloadMode:function(){return!!$t.isHot||window&&(window.webpackHotUpdate||Ne())},runtimeVar:v,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:W,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=ee(W,e);ft(t).forEach(function(e){n.includes(e)||n.push(e)}),$t.store.setState(e,t)},_state:gt,_prevState:St,_stateVer:Et,getState:function(e){return e?mt(e):gt},getPrevState:function(e){return e?ht(e):St},getStateVer:function(e){return e?Et[e]:Et},setState:function(e,t,n){return _t(e,t,n)},setGlobalState:function(e){return _t(_e,e)},saveSharedState:vt,getGlobalState:function(){return gt[_e]}},reducer:{_reducer:(nt={},nt[_e]={},nt[q]={},nt),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:j,watch:C,refStore:{_state:{},setState:function(e,t){var n=$t.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:pt,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:We,waKey_staticUKeyMap_:ke,refs:pt,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.4.2-10",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},fragmentNameCount:0,featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{}},wt=localStorage.length,bt=$t.refStore._state,xt=0;xt<wt;xt++){var Ut=localStorage.key(xt);if(Ut.startsWith("CCSS_"))try{bt[Ut.substr(5)]=JSON.parse(localStorage.getItem(Ut))}catch(e){console.error(e)}}var Ot=[],Nt=function(e){return e.toLowerCase()===q},Dt=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},It=P,At=x;function Tt(e){if(!Dt(e))throw Error("module["+e+"] writing is invalid!");if(Nt(e))throw Error("'$$cc' is a built-in module name for concent")}function Mt(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=$t.store._state;if(Tt(e),e!==_e)if(t){if($(o[e]))throw At($e.CC_MODULE_NAME_DUPLICATE,It(r))}else if(!o[e])throw At($e.CC_MODULE_NOT_FOUND,It(r))}function Rt(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+S);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var Wt={},kt=function(e,t,n){if(e.code!==$e.CC_MODULE_NAME_DUPLICATE||!$t.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=Wt[o];if(a){if(r!==a)throw e}else Wt[o]=r},jt={};function Lt(e){jt[e]={}}function Ft(t,e,n){void 0===n&&(n=!0),Lt(t);var r=t===H?{}:e;try{!function(e,t,n){if(Mt(e,n),!xe(t))throw Error("module["+e+"]'s state "+be)}(t,r,n)}catch(e){kt(e,t,"state")}var o=$t.store,a=o.getState(),c=o.getStateVer(),i=o.getPrevState();oe(a,t,r),oe(i,t,r),c[t]=ie(r).reduce(function(e,t){return e[t]=1,e},{});var u=$t.computed;Q(u._computedDep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),Q(u._computedValue,t),Q(u._computedValueOri,t);var s=Object.keys(r);if($t.moduleName_stateKeys_[t]=s,t===_e){var d=$t.globalStateKeys;s.forEach(function(e){d.includes(e)||d.push(e)})}}function Pt(e,t){void 0===t&&(t=!1);var n=$t.ccUKey_ref_,r=$t.moduleName_ccClassKeys_,o=$t.ccClassKey_ccClassContext_,a=[];if(e){if(!$t.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===z&&(a=a.filter(function(e){return!e.startsWith(U)})),0===a.length){if(!1!==t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}a=[B]}}else a=[B];var s=n[a[0]];if(!s)throw Error("cc found no ref!");return s}var Vt=F,zt=X,qt=function(){return Promise.resolve()};function Ht(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=Vt(c,i),_=$t.refs[y];if(!_)return zt("no ref found for ccUniqueKey:"+y+"!"),qt();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?Pt(l):d?Pt(d):Pt()))return zt("no ref found"),qt();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=$t.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return zt(e.message),qt()}}function Bt(e,t,n,r,o){return Ht(e,t,n,r,o)}function Gt(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!xe(e))throw Error(t+" "+be);Mt(a,!1,t+" is invalid");var n=$t.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=Q(o,a),d=ee(i,a);u.setState||(u.setState=function(e){return e}),ie(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=ee(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return Bt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var Yt=0,Xt=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Jt(e){return Yt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Xt[ae()];return t}())+"_"+Yt}var Zt=$t.moduleName_stateKeys_,Qt=$t.runtimeVar,en=1;function tn(e,t,n,r,o){var a=t.refCtx,c=t.type;if(e!==ge||a.__$$inBM){if(n){var i,u,s,d=typeof n;if("string"==d)xe(r)?((u={})[n]=r,i=u):typeof r===R&&((s={})[n]=Re(r,o),i=s);else if(xe(n))i=n;else if(d===R&&!xe(i=n(a)))throw Error("type of "+c+" callback result must be an object");i?function(O,N,D){var e=Qt.computedCompare,t=Qt.watchCompare,I=Qt.watchImmediate,A=N.type===Se?e:t,T=N.module;ie(D).forEach(function(c,e){var t=D[c],n=typeof t,r=t;if(n===R&&(r={fn:t}),xe(r)){var o=r,a=o.fn,i=o.immediate,u=void 0===i?I:i,s=o.compare,d=void 0===s?A:s,f=o.lazy,l=o.retKeyDep,p=void 0===l||l,y=r.depKeys||"-",_=r.sort||en++,v=Jt("mark");if("*"===y||"-"===y){var m="-"===y&&p,h=an(N,T,c,m),C=h.pureKey,K=h.module;nn(O,N,v,C),on(O,N,K,C,a,y,u,d,f,_)}else if(0===y.length){var g=an(N,T,c),S=g.pureKey,E=g.module;nn(O,N,v,S),on(O,N,E,S,a,y,u,d,f,_)}else{var $=an(N,T,c),w=$.pureKey,b=$.moduleOfKey,x=b;nn(O,N,v,w);var U={};y.forEach(function(e){var t=an(N,T,e),n=t.isStateKey,r=t.pureKey,o=t.module;if(x&&o!==x)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=ee(U,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");rn(N,o,r),a.push(r)}),ie(U).forEach(function(e){on(O,N,e,w,a,U[e],u,d,f,_)})}}else X("retKey["+c+"] item type error")})}(e,t,i):X(e+" "+c+" param type error")}}else X(e+" "+c+" must be been called in setup block")}function nn(e,t,n,r){if(e===ge){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function rn(e,t,n){var r=e.refCtx;r&&(r.__$$staticWaKeys[Le(t,n)]=1)}function on(e,t,n,r,o,a,c,i,u,s){var d=Q(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_=Array.isArray(a)&&0===a.length,v=s;_?v<0||(v=-1):s<0&&(v=0);var m={fn:o,immediate:c,compare:i,depKeys:a,sort:v,isStatic:_};f[r]?e!==ge&&(f[r]=m,p[r]=u):(f[r]=m,p[r]=u,d.fnCount++),e===ge&&(t.retKeyFns[r]=f[r]);var h=t.refCtx;if(h&&("computed"===t.type?h.hasComputedFn=!0:h.hasWatchFn=!0),"-"!==a){var C="*"===a?["*"]:a;"*"===a&&(y[r]=Zt[n]),C.forEach(function(e){ne(l,e,r)})}}function an(e,t,n,r){void 0===r&&(r=!1);var o,a=t,c=n,i="";if(n.includes("/")){var u=n.split("/"),s=u[0];s&&(a=i=s),c=u[1]}var d=Zt[a];if(a===e.module)o=e.stateKeys;else{if(!(o=d))throw x($e.CC_MODULE_NOT_FOUND,P("module["+a+"]"));if(!e.connect[a])throw x($e.CC_MODULE_NOT_CONNECTED,P("module["+a+"], retKey["+c+"]"))}var f=o.includes(c);return r&&f&&function(e,t,n,r){var o=Q(e.dep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),a=o.retKey_stateKeys_;ne(o.stateKey_retKeys_,n,n),ne(a,n,n),r&&rn(e,t,n)}(e,a,c,d.includes(c)),{isStateKey:f,pureKey:c,module:a,moduleOfKey:i}}function cn(e,o){var t={};return ie(e).forEach(function(r){o[r]=L(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[m]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):X("computed value can not been changed manually")}})}),t}var un=xe;function sn(n,e){if(e){var t="module["+n+"] computed";if(!un(e))throw Error(t+" "+be);Mt(n,!1,t+" is invalid");var r=$t.computed,o=$t.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];tn(k,{type:Se,module:n,stateKeys:ie(i),dep:c},e);var u=$t.getDispatcher(),s=Object.assign({},i);a[n]=cn(e,r._computedValueOri[n]);var d=a[n];st(u,n,u&&u.ctx.module,i,function(e,t){return He(t,k,"computed",c,n,i,e)},i,i,s,De(n),!0,"computed",k,d)}}var dn=xe,fn=Q,ln=ie;function pn(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!dn(e))throw Error(r+" "+be);Mt(n,!1,r+" is invalid");var o=$t.watch.getRootWatchDep(),a=$t.watch.getRootWatchRaw(),c=$t.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,$t.store.getState)(n);tn(k,{module:n,stateKeys:ln(u),dep:o},e);var s=$t.getDispatcher(),d=Object.assign({},u),f=fn(c,n);st(s,n,s&&s.ctx.module,u,function(e,t){return He(t,k,"watch",o,n,u,e)},u,u,d,De(n),!0,"watch",k,f)}}var yn=[O,N,12,D,14,15],_n={};function vn(t,n){_n[t].forEach(function(e){e({sig:t,payload:n})})}function mn(e,t){function n(e,t){var n=_n[e];n?n.push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){n(e,t)}):n(e,t)}yn.forEach(function(e){return _n[e]=[]});var hn=function(e){if(!$t.errorHandler)throw e;$t.errorHandler(e)},Cn=0,Kn={},gn={},Sn={},En={};function $n(){return++Cn}function wn(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function bn(e,t,n){wn(e,t,n,Kn)}function xn(e,t,n){return bn(e,t,n),function(e){var t=function(e){return Kn[e]}(e),n=[];return ie(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function Un(e){delete Kn[e]}var On={},Nn=function(e,t,n){void 0===n&&(n=1e3);var r=On[t];r&&clearTimeout(r),On[t]=setTimeout(function(){delete On[t],e()},n)};function Dn(e,n,r,t,o,a){var c=e.ctx;if(!c.hasWatchFn)return{shouldCurrentRefUpdate:!0};var i=Object.assign({},t),u=c.watchDep,s=c.module,d=c.ccUniqueKey,f=c.refComputed;n!==s&&(f=c.connectedComputed[n]);var l=Object.assign({},r,t);return st(e,n,s,r,function(e,t){return He(t,ge,Ee,u,n,r,e,d)},t,l,i,o,a,Ee,ge,f)}function In(e,n,r,t,o,a,c){void 0===a&&(a=!1),void 0===c&&(c=!1);var i=e.ctx,u=Object.assign({},t);if(!i.hasComputedFn)return u;var s=i.computedDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed;n!==d&&(l=i.connectedComputed[n]);var p=Object.assign({},r,t);return st(e,n,d,r,function(e,t){return He(t,ge,"computed",s,n,r,e,f)},t,p,u,o,a,"computed",ge,l),c&&Object.assign(t,u),u}var An=ie,Tn=$t.ccUKey_ref_,Mn=$t.waKey_uKeyMap_,Rn=$t.waKey_staticUKeyMap_;function Wn(o,e,c,i){var t=An(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return jt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,Mn[t],Rn[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=An(a),p=!1;l.forEach(function(e){var t=Tn[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){jt[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var kn=xe,jn=X,Ln=$,Fn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Pn=ie,Vn=1,zn=2,qn=Ke,Hn=he,Bn=15,Gn=1,Yn=2,Xn=3,Jn=$t.store,Zn=Jn.setState,Qn=Jn.getPrevState,er=Jn.saveSharedState,tr=$t.middlewares,nr=$t.ccClassKey_ccClassContext_,rr=$t.refStore,or=$t.moduleName_stateKeys_;function ar(e,t,c){var n=void 0===t?{}:t,i=n.module,r=n.skipMiddleware,u=void 0!==r&&r,s=n.payload,o=n.reactCallback,d=n.type,a=n.calledBy,f=void 0===a?Hn:a,l=n.fnName,p=void 0===l?"":l,y=n.renderKey,_=void 0===y?"":y,v=n.delay,m=void 0===v?-1:v;if(void 0!==e)if(kn(e)){var h=c.ctx,C=h.module,K=h.ccUniqueKey,g=h.ccKey,S=function(e,t){return e===t?Vn:zn}(i,C),E={payload:s,renderKey:_,ccKey:g,module:i,fnName:p},$=function(e,t,n){var r=Ge(t,or[e],!0).partialState;if(r)return Zn(e,r,n);return r}(i,e,{ref:c,callInfo:E,noSave:!0});Object.assign(e,$),cr(c,E,_,f,e,S,o,!0,function(n,r,o){var a={calledBy:f,type:d,payload:s,renderKey:_,delay:m,ccKey:g,ccUniqueKey:K,committedState:r,refModule:C,module:i,fnName:p,sharedState:$||{},modState:function(e,t){a.committedState[e]=t,a.sharedState[e]=t}};!function(e,n,r){if(!0!==e){var o=tr.length;if(0<o){var a=0;!function e(){if(a===o)r();else{var t=tr[a];a++,"function"==typeof t?t(n,e):(jn("found one middleware is not a function"),e())}}()}else r()}else r()}(u,a,function(e){var t=er(i,a.sharedState,!0);o&&o(),n===Gn&&!t||vn(Bn,{calledBy:f,type:d,committedState:r,sharedState:t,module:i,ccUniqueKey:K,renderKey:_}),t&&function(e,t,n,r,o,a,c){var i=function(){!function(c,e,i,t,u,n){if(!i)return;var s=$t.ccUKey_ref_,r=e.ctx,o=r.ccUniqueKey,a=t===Vn,d=Wn(u,i,n,nr[r.ccClassKey].renderKeyClasses),f=d.sharedStateKeys,l=d.result,p=l.connect;l.belong.forEach(function(e){var t=s[e];if(t){var n=t.ctx.ccUniqueKey;a&&n===o||cr(t,c,null,"broadcastState",i,Vn)}});var y=Qn(u);p.forEach(function(e){var t=s[e];if(t&&!0!==t.__$$isUnmounted){var n=t.ctx,r=In(t,u,y,i,c),o=Dn(t,u,y,r,c),a=o.shouldCurrentRefUpdate;a&&(n.__$$settedList.push({module:u,keys:f}),n.__$$ccForceUpdate())}})}(e,t,n,r,o,a)};if(0<c){var u=Fn(t.ctx.ccUniqueKey,n);Nn(i,u,c)}else i()}(E,c,t,S,i,_,m)})})}else jn("your committed state "+be)}function cr(e,t,n,r,o,a,c,i,u){void 0===i&&(i=!1);var s=e.state,d=e.ctx;if(!0===e.__$$isUnmounted||a!==Vn||r!==qn&&!Ln(o))return c&&c(s),u&&u(Gn,o);var f=d.module,l=d.storedKeys,p=d.ccUniqueKey,y=Xn;if(n&&(y=Yn,d.renderKey!==n))return u&&u(Gn,o);if(0<l.length){var _=Ge(o,l),v=_.partialState;if(!_.isStateEmpty){if(!0===d.persistStoredKeys){var m=Ge(s,l),h=Object.assign({},m.partialState,v);localStorage.setItem("CCSS_"+p,JSON.stringify(h))}rr.setState(p,v)}}function C(){var e=i?fe(d.state,K):K;e&&(d.__$$settedList.push({module:f,keys:Pn(e)}),d.__$$ccSetState(e,c,g))}var K=In(e,f,s,o,t),g=Dn(e,f,s,K,t,!1).shouldCurrentRefUpdate;u?u(y,K,C):C()}function ir(e,t,n,r,o){void 0===r&&(r=-1);try{Pt(e).ctx.changeState(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}catch(e){Z(e)}}var ur=X,sr=xe,dr=ie,fr=$t.store,lr=fr.getState,pr=fr.setState,yr=$t.reducer._reducer,_r=$t.computed._computedValue,vr=x,mr=P;function hr(e,t){void 0===t&&(t=!0);try{return Mt(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;gr(e)}(e,t),!1}}function Cr(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function Kr(e,t,n,r){var o;return!0===e?(function(e){Sn[e]=!0}(o=$n()),r[o]=1):r[o=t||$n()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function gr(e,t){e&&(t?t(e):(ur(e),$t.errorHandler&&$t.errorHandler(e)))}function Sr(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:Cr(e,t)});r(o,n,c)}).catch(hn)}(xr,e,t,n)}function Er(e,t,n){return Sr(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function $r(a,c){return function(e,t,n){var r=a.ctx;if(c){var o=Object.assign({},r.state,e);c.state=o}n?(r.renderCount+=1,r.reactSetState(e,t)):(Object.assign(a.state,e),r.state=a.state)}}function wr(n){return function(e){var t=n.ctx;t.renderCount+=1,t.reactForceUpdate(e)}}function br(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,E=void 0!==r&&r,o=t.chainId_depth_,$=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=E,c="",i=null!=r?r:S;if(sr(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=Kr(o,C,K,$),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:$,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),Er(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),Er(l,v,t)}}function xr(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,E=e.renderKey,$=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;hr(e,!1)?(e!==t&&n&&(ur(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return gr(e,h);var o,t=lr(v),n={};if(o=$===w&&1===b[$],m){b[$]=b[$]+1;var a=Ur(y,!1,x,v,E,S,$,w,b),c=Ur(y,!1,!0,v,E,S,$,w,b),i=Ur(y,!0,x,v,E,S,$,w,b),u=br(y,{delay:S,chainId:$,oriChainId:w,chainId_depth_:b}),s=br(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=br(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return En[e]}($)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:lr(),globalState:lr(_e),moduleState:t,moduleComputed:_r[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:E,delay:S})},refCtx:y.ctx}}!1===x&&vn(O,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[$]=b[$]-1;var t=1===b[$];!function(e,t,n){wn(e,t,n,En)}($,v,e);var n=[];!1===x&&(vn(N,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),!function(e){return!0===Sn[e]}($)?n=[{module:v,state:e}]:t?function(e){return!0===gn[e]}($)||(n=xn($,v,e),Un($)):bn($,v,e)),n.forEach(function(e){e.state&&ar(e.state,{renderKey:E,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(Un($),function(e){delete En[e]}($)),h&&h(null,e)}).catch(function(e){vn(D,{isSourceCall:o,calledBy:K,module:v,chainId:$,fn:l}),gr(e,h)})})}function Ur(b,x,U,O,N,D,I,A,T){return void 0===N&&(N=""),void 0===D&&(D=-1),void 0===T&&(T={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=U,c="",i=r||D;if(sr(t)){c=N;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||N;function l(){return br(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:T})(e,n,c,i)}var p,y,_=Kr(o,I,A,T),v=_._chainId,m=_._oriChainId,h=typeof e,C=O;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(vr($e.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==T[m]&&(C=e.__stateModule)}var E=g.split("").filter(function(e){return"/"===e}).length;if(0===E)p=g;else{if(1!==E)return Promise.reject(vr($e.CC_DISPATCH_STRING_INVALID,mr(g)));var $=g.split("/"),w=$[0];w&&(C=w),p=$[1]}}return"*"===C?Ht("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=yr[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));xr(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:M,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:Cr(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:T})}).catch(hn)}}function Or(a){return function(t){try{ir(a,t)}catch(e){var n=lr(a);if(!n)return ur("invalid module "+a);var r=Ge(t,dr(n),!1,!0),o=r.ignoredStateKeys;r.isStateEmpty||pr(a,r.partialState),0<o.length&&ur("invalid keys:"+o.join(",")+", their value is undefined or they are not declared in module"+a),J("no ccInstance found for module["+a+"] currently, cc will just store it, lately ccInstance will pick this state to render")}}}var Nr=function(o){return function(e,t){var n=o.ctx,r=Object.assign({},o.state,e);n.type===ve?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(r,t))}},Dr=function(r){return function(e){var t=r.ctx;if(t.type===ve){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},Ir=xe,Ar=Ie;function Tr(t,e){if($t.isStartup){if(!Ir(e))throw Error("param config "+be);if(t===_e)throw Error("configuring global module is not allowed");var n=e.state,r=e.reducer,o=e.computed,a=e.watch,c=e.init,i=e.isClassSingle,u=Ar(n);if("function"==typeof n&&($t.moduleName_stateFn_[t]=n),r&&!Ir(r))throw Error("config.reducer "+be);if(Ft(t,u,!0),Gt(t,r),o&&sn(t,o),a&&pn(t,a),$t.moduleSingleClass[t]=!0===i,c){if("function"!=typeof c)throw Error("init value must be a function!");Promise.resolve().then(c).then(function(e){Or(t)(e)})}$t.moduleName_isConfigured_[t]=!0,vn(14,t)}else Ot.push({module:t,config:e})}function Mr(r,o){var a={};return ie(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}function Rr(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var kr=ie,jr=xe,Lr=$t.store._state;var Fr=b,Pr=x,Vr=$t.featureStr_classKey_,zr=$t.userClassKey_featureStr_,qr=$t.ccClassKey_ccClassContext_,Hr=0;var Br=$t.moduleName_stateKeys_,Gr=$t.moduleName_ccClassKeys_,Yr=$t.moduleSingleClass,Xr=$t.ccClassKey_ccClassContext_,Jr=$t.computed._computedValue,Zr=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},Qr=P;function eo(e,t,n,r,o,a,c,i,u){void 0===e&&(e=z),void 0===a&&(a=[]),!0===i&&function(){if(!0!==$t.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;Mt(e,!1,"module["+e+"] is not configured in store"),Rt(Br[e],a);var d=c,f=Array.isArray(c);!f&&"string"!=typeof c||(d={},(f?c:c.split(",")).forEach(function(e){return d[e]="-"}));e===_e||d[_e]||(d[_e]="-");var l,p=function(e,t,n){if(t===B)return[];if(!n)return[];if("*"===n)return Br[e];var r=Zr(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+S+" "+Qr("ccClassKey:"+t));return n}(e,t,o),y=function(o,e,t,a){if(!jr(o))throw Error("CcFragment or CcClass's prop connect type error, it "+be);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=kr(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=Lr[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),kr(n).forEach(function(e){return s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!n.hasOwnProperty(e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,p),_=y.connectedModuleKeyMapping,v=y.connectedModuleNames,m=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===z&&Fr(n)&&0===r.length)return o+"0";var i=o+":"+a,u=Vr[i];return u||(Vr[i]=u=""+o+ ++Hr)}if(c.startsWith(h))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==B.toLowerCase())throw Error(B+" is cc built-in ccClassKey name.");if(qr[c]){if(zr[c]!==a)throw Pr($e.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else zr[c]=a;return c}(s,e,d,p,r,y.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");l=n}else l=[m];return function(e,t,n,r,o,a,c){var i=Xr[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Xr[e]=i);var u={},s={};if(a){var d=$t.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=Jr[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(m,l,e,o,p,_,v),function(e,t){var n=ee(Gr,e);if(!0===Yr[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:p,_ccClassKey:m}}var to=$t.event_handlers_,no=$t.handlerKey_handler_,ro=$t.ccUKey_handlerKeys_,oo=$t.ccUKey_ref_,ao=function(e,t,n){return e+"$"+t+"$"+n},co=ee,io=X;function uo(e,t,n,r,o){void 0===o&&(o=null);var a=to[e];if(a){var c=a;return r?c=a.filter(function(e){return e.ccUniqueKey===r}):n?c=a.filter(function(e){return e.ccClassKey===n}):t&&(c=a.filter(function(e){return e.module===t})),void 0!==o&&(c=c.filter(function(e){return e.identity===o})),c}return[]}function so(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete no[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=to[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete ro[n])}),to[e]=r.filter(function(e){return null!==e}))})}function fo(e,t,n,r,o,a){var c=co(to,r);if("function"!=typeof a)return io("event "+r+"'s handler is not a function!");var i=ao(n,r,o),u=co(ro,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),no[i]=d}function lo(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),uo(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=oo[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=no[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function po(e,t){so(uo(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function yo(e){var t=ro[e];if(t){var n=[];t.forEach(function(e){return n.push(no[e])}),so(n)}}function _o(e){if(e&&"object"==typeof e){var t;if(Array.isArray(e))t={name:e[0],identity:e[1]};else t=Object.assign({},e);return t}return{name:e}}var vo=Object.freeze({bindEventHandlerToCcContext:fo,findEventHandlersToPerform:lo,findEventHandlersToOff:po,offEventHandlersByCcUniqueKey:yo,getEventItem:_o});function mo(n,e,r,o){return new Proxy(e,{get:function(e,t){return Xe(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var ho=X,Co=F;function Ko(e){return e?e.props||e:{}}var go=$t.store.getState;var So=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[me],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=go(m);u="bool"===p?!Ae(m!==r?C:o,_):function(e){var t=ue(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):X("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var E=ue(t);if(!E)return null;var $=E.currentTarget;u=$.value;var w=$.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var Eo=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(X(t+" can not convert to int but you set ccint as true!！"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?X("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},$o=$t.store.getState;function wo(e,t,n){var r=t.ctx,o=r.module,a=So(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccsync,l=i.ccint,p=i.ccdelay,y=i.ccrkey;if(f.startsWith("/")&&(i.ccsync=""+o+f),f.includes("/")){var _=f.split("/")[0];Mt(_,!1);var v=r.ccKey,m=r.ccUniqueKey;if(d)return void(s&&ar(s,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t));var h=_!==o?$o(_):t.state;ar(Eo(f,u,l,h,a.isToggleBool).state,{calledBy:K,ccKey:v,ccUniqueKey:m,module:_,renderKey:y,delay:p},t)}else{if(d)return void(s&&t.setState(s,null,y,p));var C=Eo(f,u,l,t.state,a.isToggleBool);t.setState(C.state,null,y,p)}}}var bo=$t.reducer,xo=bo._module_fnNames_,Uo=bo._caller,Oo=$t.refStore,No=$t.ccClassKey_ccClassContext_,Do=$t.moduleName_stateKeys_,Io=$t.store.getState,Ao=$t.moduleName_ccClassKeys_,To=ie,Mo=x,Ro=P,Wo=ee,ko=Q,jo=X,Lo=b,Fo=0;var Po=function(){},Vo=function(e){return"type of defineEffect "+e+" param must be"},zo=function(e){return"-"===e.watchedKeys?To(e.__$$renderStatus===g?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},qo=function(t,e){function n(e){return To(t.__$$renderStatus===g?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?Do[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){return i[e]=r(e)}),i};function Ho(t,n,e){("*"===e?Do[n]:e).forEach(function(e){return function(e,t,n){je(We,Le(e,t),n)}(n,e,t)})}function Bo(c,e,t){var n;void 0===t&&(t=5);var r=e.isSingle,o=e.ccClassKey,a=e.ccKey,i=void 0===a?"":a,u=e.module,s=e.type,d=e.insType,f=e.state,l=e.storedKeys,p=void 0===l?[]:l,y=e.persistStoredKeys,_=void 0!==y&&y,v=e.watchedKeys,m=e.connect,h=void 0===m?{}:m,C=e.tag,K=void 0===C?"":C,g=e.ccOption,S=void 0===g?{}:g,E=u,$=c.ctx,w=Lo($),b=Do[E],x=c.setState,U=c.forceUpdate;!w&&$.ccUniqueKey?(x=$.__boundSetState,U=$.__boundForceUpdate):s!==ve&&(x=c.setState.bind(c),U=c.forceUpdate.bind(c));var O={};O.persistStoredKeys=void 0===S.persistStoredKeys?_:S.persistStoredKeys,O.tag=S.tag||K;var N=function(e,t,n,r){var o;if(e)n&&ho("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=Co(t,n);else{var a=Jt(r);o=Co(t,a)}return o}(r,o,i,O.tag);if(O.renderKey=S.renderKey||N,O.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(Rt(t,o),o):[]}(f,b,S.storedKeys,p),i&&!o)throw Error("missing ccClassKey while init a cc ins with ccKey["+i+"]");if(0<O.storedKeys.length&&!i)throw Mo($e.CC_STORED_KEYS_NEED_CCKEY,Ro("ccClassKey["+o+"]"));var D=Io(u),I=Oo._state[N]||{},A=Object.assign({},f,I,D),T=To(c.state=A),M=No[o].connectedState,R=To(h),W={},k={};R.forEach(function(e){return k[e]=tt(c,e,!1)});var j,L=tt(c,u),F=tt(c,_e),P=mo(c,Io(_e),_e,!1),V=Ue(To(f),b);j=E===_e?P:mo(c,D,u,!0);var z=Wo(Ao,u);z.includes(o)||z.push(o);function q(e,t){ar(e,t,c)}function H(e,t,n,r,o,a){q(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function B(e,t,n,r,o){H(e,t,Ce,n,r,o)}function G(e,t,n,r,o){"string"==typeof e?B(e,t,n,r,o):H(E,e,he,t,n,r)}function Y(e,t,n){H(E,c.state,Ke,e,t,n)}var X=[],J=[],Z={effectItems:X,eid_effectReturnCb_:{},effectPropsItems:J,eid_effectPropsReturnCb_:{}},Q={},ee=Ko(c.props),te=((n={type:s,insType:d,isSingle:r,module:u,ccClassKey:o,ccKey:i,ccUniqueKey:N,renderCount:1,initTime:Date.now(),watchedKeys:v,privStateKeys:V,connect:h,connectedModules:R,__$$onEvents:[],__$$hasModuleState:0<b.length,__$$renderStatus:we,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},__$$staticWaKeys:{},__$$staticWaKeyList:[],persistStoredKeys:O.persistStoredKeys,storedKeys:O.storedKeys,renderKey:O.renderKey,tag:O.tag,prevProps:ee,props:ee,mapped:{},prevState:A,state:A,moduleState:j,mstate:D,globalState:P,connectedState:W,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:L,globalComputed:F,connectedComputed:k,moduleReducer:{},connectedReducer:{},reducer:{}}).mapped={},n.stateKeys=T,n.computedDep={},n.computedRetKeyFns={},n.watchDep={},n.watchRetKeyFns={},n.execute=null,n.effectMeta=Z,n.retKey_fnUid_={},n.reactSetState=Po,n.__boundSetState=x,n.reactForceUpdate=Po,n.__boundForceUpdate=U,n.setState=G,n.setModuleState=B,n.forceUpdate=Y,n.changeState=q,n.refs=Q,n.useRef=function(t){return function(e){return Q[t]={current:e}}},n.__$$ccSetState=$r(c),n.__$$ccForceUpdate=wr(c),n.__$$settedList=[],n.__$$prevMoStateVer={},n);c.setState=G,c.forceUpdate=Y,te.initState=function(e){return c.__$$isMounted?jo("ctx.initState can only been called before first render period!"):xe(f)?(c.state=Object.assign({},f,e,I,j),void(te.prevState=te.state=c.state)):jo("state "+be)};var ne=Ur(c,!1,!1,E);if(te.dispatch=ne,1<t&&(te.lazyDispatch=Ur(c,!0,!1,E),te.silentDispatch=Ur(c,!1,!0,E),te.dispatchLazy=te.lazyDispatch,te.dispatchSilent=te.silentDispatch,te.invoke=br(c),te.lazyInvoke=br(c,{isLazy:!0}),te.silentInvoke=br(c,{isLazy:!1,isSilent:!0}),te.invokeLazy=te.lazyInvoke,te.invokeSilent=te.silentInvoke,te.setGlobalState=function(e,t,n,r){H(_e,e,he,t,n,r)}),2<t){var re=function(e,t,n,r,o){var a;if("string"==typeof e)return wo.bind(null,((a={})[me]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),c);wo({type:"val"},c,e)};te.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),re(e,t,n,r,"val")},te.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),re(e,t,n,r,"bool")},te.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),re(e,t,n,r,"int")},te.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),re(e,t,n,r,"as")},te.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),wo(((o={})[me]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),c)},te.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),wo(((r={})[me]=e,r.type="bool",r.delay=n,r.rkey=t,r),c)}}if(3<t&&(te.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];lo.apply(vo,[_o(e)].concat(n))},te.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?N:a,i=_o(e);po(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},te.on=function(e,t){var n=_o(e),r=n.identity;fo(E,o,N,n.name,void 0===r?null:r,t)}),4<t){te.execute=function(e){return te.execute=e},te.watch=function(r){return function(e,t,n){tn(ge,{type:Ee,refCtx:r,stateKeys:r.stateKeys,retKeyFns:r.watchRetKeyFns,module:r.module,connect:r.connect,dep:r.watchDep},e,t,n)}}(te),te.computed=function(r){return function(e,t,n){tn(ge,{type:Se,refCtx:r,stateKeys:r.stateKeys,retKeyFns:r.computedRetKeyFns,module:r.module,connect:r.connect,dep:r.computedDep},e,t,n)}}(te);var oe=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error(Vo("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error(Vo("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;if(e.includes("/")){var n=(t=e).split("/");if(!te.connect[n[0]])throw Mo($e.CC_MODULE_NOT_CONNECTED,Ro("depKey["+e+"]"))}else t=E+"/"+e;c.push(t),te.__$$staticWaKeys[t]=1}));var i={fn:e,isProp:s,depKeys:o,modDepKeys:c,eId:Symbol("__autoGen_"+ ++Fo+"__"),compare:n,immediate:a};u.push(i)}};te.effect=oe(X,!1),te.effectProps=oe(J,!0)}var ae=te.moduleReducer,ce=te.connectedReducer,ie=te.__$$curConnWaKeys,ue=te.__$$compareConnWaKeys,se=te.__$$compareConnWaKeyCount,de=te.__$$nextCompareConnWaKeys,fe=te.__$$nextCompareConnWaKeyCount,le=R.slice();le.includes(u)?jo("["+N+"]'s module["+u+"] is in belongTo and connect both, it will cause redundant render."):le.push(u);var pe=!1;if(le.forEach(function(o){var e;e=o===u?ae:ko(ce,o);var t=h[o];if(t){var n=M[o];"-"===t?(pe=!0,ie[o]={},ue[o]={},se[o]=0,de[o]={},fe[o]=0,n=o===_e?te.globalState:mo(c,n,o)):Ho(N,o,t),W[o]=n}(xo[o]||[]).forEach(function(r){e[r]=function(e,t,n){return ne(o+"/"+r,e,t,n)}})}),te.reducer=Uo,te.mr=te.moduleReducer,te.cr=te.connectedReducer,te.r=te.reducer,"-"===v?pe=!0:Ho(N,u,v),te.__$$autoWatch=pe,te.getWatchedKeys=function(){return zo(c.ctx||te)},te.getConnectWatchedKeys=function(e){return qo(c.ctx||te,e)},w)c.ctx=te;else{var ye=c.ctx;Object.assign(c.ctx,te,{__$$curWaKeys:ye.__$$curWaKeys,__$$compareWaKeys:ye.__$$compareWaKeys,__$$compareWaKeyCount:ye.__$$compareWaKeyCount,__$$nextCompareWaKeys:ye.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:ye.__$$nextCompareWaKeyCount,__$$curConnWaKeys:ye.__$$curConnWaKeys,__$$compareConnWaKeys:ye.__$$compareConnWaKeys,__$$compareConnWaKeyCount:ye.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:ye.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:ye.__$$nextCompareConnWaKeyCount})}}var Go=$t.store.getState;var Yo=ie,Xo=$t.runtimeVar;function Jo(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$inBM=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!xe(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Xo.bindCtxToMethod&&!1!==t)&&Yo(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.refComputedValue=cn(r.computedRetKeyFns,r.refComputedOri),r.refComputed=tt(n,null,!0,!0),function(o){function e(r){r(o,c,i,i,u,!0,!0),a.forEach(function(e){var t=Go(e),n=De(e);r(o,e,t,t,n,!0,!0)})}var t=o.ctx,n=t.hasComputedFn,r=t.hasWatchFn,a=t.connectedModules,c=t.module,i=t.state,u=De(c);n&&e(In),r&&e(Dn)}(n),r.__$$inBM=!1}var Zo=$t.moduleName_stateKeys_,Qo=$t.store,ea=Qo.getPrevState,ta=Qo.getState,na=Qo.getStateVer,ra=function(e,t){return X("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function oa(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=e.state,S=[];o.forEach(function(e){var t=e.modDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=ea(p),v=na(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){ra(s,"module["+p+"]");continue}if(!Zo[p].includes(y)){ra(s,"unmoduledKey["+y+"]");continue}d=ta(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var aa=X,ca=x,ia=P,ua=G,sa=V,da=$t.runtimeVar,fa=$t.ccClassKey_ccClassContext_,la=$t.ccUKey_ref_,pa={};function ya(e,t,n,r){function o(){la[e]=t,n.push(e)}!function(e){void 0===pa[e]?pa[e]=1:pa[e]+=1}(e),r?setTimeout(o,r):o()}function _a(e,t,n,r,o){var a=fa[n],c=a.ccKeys;da.isDebug&&console.log(ua("register ccKey "+o+" to CC_CONTEXT"),sa());var i=$t.isHotReloadMode();if(c.includes(o)){var u=function(){throw ca($e.CC_CLASS_INSTANCE_KEY_DUPLICATE,ia("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===pa[e]?0:pa[e]}(o);if(t&&0<s)throw ca($e.CC_CLASS_INSTANCE_MORE_THAN_ONE,ia("ccClass:"+n));1<s&&u(),aa("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+ia("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),ya(o,e,c,600)}else u()}else ya(o,e,c);return a}function va(t,e,n,r){var o=!1,a=ie(t);a.forEach(function(e){2===t[e]&&(o=!0,Pe(n,e,r))}),e<a.length&&(o=!0),o&&Lt(n)}function ma(e){var t=e.ctx;if(t.__$$renderStatus=we,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;va(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&va(a[e],c[e],e,o)})}}function ha(e){ma(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.ccUniqueKey,r=t.__$$onEvents,o=t.__$$staticWaKeys;_a(e,t.isSingle,t.ccClassKey,t.ccKey,n);var a=ie(o);(e.ctx.__$$staticWaKeyList=a).forEach(function(e){return function(e,t){je(ke,e,t)}(e,n)}),0<r.length&&(r.forEach(function(e){return e.fn.apply(void 0,e.args)}),r.length=0),oa(e,!0)}function Ca(e){ma(e),oa(e),e.ctx.prevState=e.state}var Ka=$t.ccUKey_ref_,ga=$t.ccUKey_handlerKeys_,Sa=$t.runtimeVar,Ea=$t.ccClassKey_ccClassContext_,$a=$t.handlerKey_handler_;function wa(e,t){Sa.isDebug&&console.log(G(t+" unset ref"),V("purple")),delete Ka[t];var n=Ea[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===pa[e]?pa[e]=0:pa[e]-=1}(t);var o=ga[t];o&&o.forEach(function(e){delete $a[e]})}var ba=ie;function xa(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),ba(n).forEach(e)}function Ua(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey,o=t.module,a=t.__$$staticWaKeyList;if(e.__$$isMounted){var c=t.effectMeta,i=c.eid_effectPropsReturnCb_;xa(c.eid_effectReturnCb_,t),xa(i,t),yo(n)}t.getWatchedKeys().forEach(function(e){return Pe(o,e,n)});var u=t.getConnectWatchedKeys();ie(u).map(function(t){u[t].forEach(function(e){return Pe(t,e,n)})}),a.forEach(function(e){return function(e,t){try{delete ke[e][t]}catch(e){}}(e,n)}),wa(r,n)}function Oa(e){var t=e.ctx;if(t.__$$renderStatus=g,t.__$$autoWatch){t.__$$hasModuleState&&(Object.assign(e.state,t.mstate),e.state=mo(e,e.state,t.module,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0);var n=t.connect;t.connectedModules.forEach(function(e){"-"===n[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}}var Na=function(e){return"CC("+e+")"},Da=Te,Ia=de,Aa=Ie,Ta=$t.runtimeVar,Ma=V,Ra=G,Wa=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function ka(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?z:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,E=n.__checkStartUp,$=void 0===E||E,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var U=eo(o,t,S,A,Da(s),d,_,$,x),O=U._module,N=U._ccClassKey,D=U._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;try{n=c.call(this,e,t)||this;var r=Aa(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(Wr(n));var a=Object.assign({},e,{isSingle:g,module:O,tag:v,state:o,type:A,insType:T,watchedKeys:s,ccClassKey:N,connect:D,storedKeys:d,persistStoredKeys:p});if(Bo(Wr(n),a,m),n.ctx.reactSetState=Nr(Wr(n)),n.ctx.reactForceUpdate=Dr(Wr(n)),l&&(n.$$setup||i))throw Wa("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(Wr(n))),Jo(Wr(n),l||n.$$setup||i,!1))}catch(e){hn(e)}return n}Rr(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&Ia(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=$r(e,this),t.__$$ccForceUpdate=wr(e),e.state||(e.state={}),Object.assign(e.state,this.state),Oa(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw Wa("ccUniqueKey "+t.ccUniqueKey);Jo(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),ha(this)},t.componentDidUpdate=function(){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this),Ca(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),Ua(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,Ta.isDebug&&console.log(Ra("@@@ render "+Na(N)),Ma()),!1===C?(Oa(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=N===B?"CcDispatcher":Na(N),t}}catch(e){hn(e)}}function ja(e){var t=function(e){function t(){return e.apply(this,arguments)||this}return Rr(t,e),t.prototype.render=function(){return this.props.children||I.createElement("span",{style:{display:"none"}})},t}(I.Component);if($t.refs[B]){if(!$t.isHotReloadMode())throw Error("CcDispatcher can only be initialize one time");J("hot reload mode, CC_DISPATCHER existed")}var n=e||t;return ka({isSingle:!0,__checkStartUp:!1,__calledBy:"cc"},B)(n)}var La=xe,Fa=ie;function Pa(e,t){if(!La(e))throw Error(t+" "+be)}function Va(e){if(0<e.length){var o=$t.plugins;o.length=0,yn.forEach(function(e){return _n[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(mn),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),$t.pluginNameMap=a}}var za=function(e){var t=document.querySelector("#"+c);if(!t){(t=document.createElement("div")).id=c;var n=t.style;n.position="fixed",n.left=0,n.top=0,n.display="none",n.zIndex=-888666,document.body.appendChild(t)}r.render(I.createElement(e),t)},qa=!1;function Ha(e,r){void 0===e&&(e=!1),ot={},at={},ce($t.event_handlers_),ce($t.ccUKey_handlerKeys_);var o=$t.ccClassKey_ccClassContext_,t=$t.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),ce(t.ccKeys,n)}),ce($t.handlerKey_handler_),ce(t,[B].concat(r)),e){var n=$t.computed,a=$t.watch,c=n._computedValue,i=a._watchDep;ie($t.store._state).forEach(function(e){e!==q&&(c[e]&&($t.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},sn(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},pn(e,a._watchRaw[e])))})}}function Ba(){var r=$t.ccUKey_ref_,o=[],a=[];return ie(r).forEach(function(e){var t=r[e];if(t&&!0===t.__$$isMounted&&0==t.__$$isUnmounted){var n=t.ctx.insType;n===U?(o.push(e),a.push(e)):n===f&&a.push(e)}}),{ccFragKeys:o,ccNonCusKeys:a}}function Ga(){ce($t.globalStateKeys);var e=ie($t.moduleName_isConfigured_).concat([z,q,_e,a]);ce($t.reducer._reducer,e),ce($t.store._state,e,{},!0),ce($t.computed._computedDep,e),ce($t.computed._computedValue,e),ce($t.watch._watchDep,e),ce($t.middlewares),ce($t.waKey_uKeyMap_),Ve={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Ba(),n=t.ccFragKeys;return Ha(!1,t.ccNonCusKeys),n}function Ya(e){void 0===e&&(e=!1),$t.info.latestStartupTime=Date.now();var t=[];if($t.isStartup){if($t.isHotReloadMode()){if(e)return console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),qa=!0,t=Ga();if(qa)return qa=!1,t;!function(){if(!$t.refs[B]){var e=ja();za(e)}}();var n=Ba();return Ha($t.reComputed,n.ccNonCusKeys),n.ccFragKeys}return console.warn("clear failed because of not running under hot reload mode!"),t}return qa=!0,t}var Xa=le,Ja=Ie;function Za(e){var t=e.props,n=Xa(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=Ja(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,E=l,$=C,w=y,b=T;if(!0!==t.__$$regDumb){b=U;var x=eo(r,C,o,A,Te(l),m,y,!0);E=l,$=x._ccClassKey,w=x._connect}Bo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,type:A,insType:b,storedKeys:m,watchedKeys:E,tag:a,ccClassKey:$,ccOption:S},c),e.ctx.reactSetState=Nr(e),e.ctx.reactForceUpdate=Dr(e),e.__$$compareProps=u,Jo(e,s,d)}var Qa=J,ec=se,tc="";function nc(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.computed,d=void 0===s?{}:s,f=n.watch,l=void 0===f?{}:f,p=n.moduleSingleClass,y=void 0===p?{}:p,_=void 0===t?{}:t,v=_.plugins,m=void 0===v?[]:v,h=_.middlewares,C=void 0===h?[]:h,K=_.isStrict,g=void 0!==K&&K,S=_.isDebug,E=void 0!==S&&S,$=_.errorHandler,w=void 0===$?null:$,b=_.isHot,x=_.bindCtxToMethod,U=void 0!==x&&x,O=_.objectValueCompare,N=void 0!==O&&O,D=_.computedCompare,I=void 0===D||D,A=_.watchCompare,T=void 0===A||A,M=_.watchImmediate,R=void 0!==M&&M,W=_.reComputed,k=void 0===W||W;try{throw Error()}catch(e){var j=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=$t.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return Ya($t.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(tc)if(tc!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);Ne()?(u=c(),tc=a):(Z(d),s=!1)}else u=c();else tc=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),L=j.ccFragKeys;if(!j.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),Qa("cc version "+$t.info.version),void 0!==b&&($t.isHot=b),$t.reComputed=k,$t.errorHandler=w;var F=$t.runtimeVar;if(F.isStrict=g,F.isDebug=E,F.objectValueCompare=N,F.computedCompare=I,F.watchCompare=T,F.watchImmediate=R,F.bindCtxToMethod=U,!$t.refs[B]){var P=ja();za(P)}!function(e){if(!La(e))throw Error("StartupOption.moduleSingleClass "+be);re($t.moduleSingleClass,e)}(y),function(e){Pa(e,"state"),delete e[H],delete e[q],void 0===e[_e]&&(e[_e]={}),void 0===e[z]&&(e[z]={});for(var t=Fa(e),n=t.length,r=0;r<n;r++){var o=t[r];Ft(o,e[o])}}(o),function(t){Pa(t,"reducer"),void 0===t[z]&&(t[z]={}),void 0===t[_e]&&(t[_e]={}),Fa(t).forEach(function(e){return Gt(e,t[e])})}(c),function(t){Pa(t,"computed"),Fa(t).forEach(function(e){return sn(e,t[e])})}(d),function(t){Pa(t,"watch"),Object.keys(t).forEach(function(e){return pn(e,t[e])})}(l),function(n){if(n){if(!La(n))throw Error("init "+be);Fa(n).forEach(function(t){Mt(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){Or(t)(e)})}),$t.init._init=n}}(u),function(e){if(0<e.length){var t=$t.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(C);var V=function(e){ec("CC_CONTEXT",$t,e),ec("ccc",$t,e),ec("cccc",$t.computed._computedValue,e),ec("sss",$t.store._state,e)};window.mcc?setTimeout(function(){V(window.mcc[ye()])},1200):V(),$t.isStartup=!0,Va(m),L.forEach(function(e){var t=$t.ccUKey_ref_[e];Ua(t),Za(t),ha(t)})}catch(e){if(!w)throw e;w(e)}}}function rc(e){throw Error("[[run]]: param error, "+e+" "+be)}var oc=xe,ac=ie,cc=b,ic=Ie;function uc(e,t){var n=le(e);return delete n.__checkStartUp,delete n.__calledBy,ka(n,t)}var sc=de,dc=I.createElement("span",{style:{display:"none"}}),fc=function(r){function e(e,t){var n;return Za(Wr(n=r.call(this,e,t)||this)),n}Rr(e,r);var t=e.prototype;return t.componentDidMount=function(){ha(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&sc(Ko(e),Ko(this.props));return this.state!==t||n},t.componentDidUpdate=function(){Ca(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),Ua(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=Ko(e);var t=e.render,n=t||e.children;if("function"==typeof n){Oa(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||dc):n(a)||dc}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function lc(e,t){var n=le(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=Te(c),l=eo(o,t,r,U,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(fc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var pc=$t.ccUKey_ref_,yc=1;function _c(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function vc(e,t,n,r,o,a,c,i,u,s,d){var f=r||Ie(o),l=a.bindCtxToMethod,p=a.watchedKeys,y=void 0===p?"-":p,_=a.storedKeys,v=void 0===_?[]:_,m=a.connect,h=void 0===m?{}:m,C=a.setup,K=a.lite;yc+=1;var g=eo(a.module,d,a.renderKeyClasses,ve,Te(y),v,h,!0),S=g._module,E=g._ccClassKey,$=g._connect,w=e||new _c(c,i,u),b=Object.assign({},a,{module:S,watchedKeys:y,state:f,type:ve,insType:t,ccClassKey:E,connect:$,ccOption:u.ccOption});w.props=u,Bo(w,b,K),w.ctx.reactSetState=Nr(w),w.ctx.reactForceUpdate=Dr(w);var x=w.ctx;return x.props=u,x.extra=s,Jo(w,C,l),n.prevCcUKey=n.ccUKey,n.ccUKey=w.ctx.ccUniqueKey,x.useRef=function(e){var t=I.useRef(null);return x.refs[e]=t},w}function mc(e){return e?Array.isArray(e)?e.join(","):"object"==typeof e?JSON.stringify(e):e:""}var hc="react version is LTE 16.8",Cc=function(e,t){return e.module!==t.module||mc(e.connect)!==mc(t.connect)};function Kc(e,t,n){var r=I.useRef({prevCcUKey:null,ccUKey:null,regOpt:e}).current,o=le(e),a=o.state,c=void 0===a?{}:a,i=o.props,u=void 0===i?{}:i,s=o.mapProps,d=o.layoutEffect,f=void 0!==d&&d,l=o.extra,p=void 0===l?{}:l,y=I.useState;if(!y)throw Error(hc);function _(e){return vc(e,n,r,C,c,o,g,S,u,p,t)}var v,m=yc,h=y(m)[0]===m,C=h?Ie(c):0,K=y(C),g=K[0],S=K[1];if(h||Cc(r.regOpt,e))r.regOpt=e,v=_();else if(v=pc[r.ccUKey]){var E=v.ctx;E.prevProps=E.props,v.props=E.props=u,E.extra=p}else v=_();var $=v.ctx,w=f?I.useLayoutEffect:I.useEffect;if(w(function(){return function(){var e=pc[r.prevCcUKey||r.ccUKey];e&&(r.prevCcUKey=null,Ua(e))}},[v]),w(function(){!function(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}($,S),v.isFirstRendered?(v.isFirstRendered=!1,ha(v)):Ca(v)}),Oa(v),s){var b=s($);if(!xe(b))throw Error("mapProps ret "+be);$.mapped=b}return $}function gc(e,t){return Kc(e,t,T)}function Sc(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function Ec(e){return $t.store.getState(e)}var $c=$t.store.getGlobalState,wc=$t.computed._computedValue;var bc=$t.ccUKey_ref_,xc=$t.ccClassKey_ccClassContext_;function Uc(){var n=[],r=$t.ccUKey_ref_;return ie(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function Oc(){return"Ob view"}function Nc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!$t.isStartup)throw Error("cc is not startup yet");Tt(e),Mt(t,!1);var s=$t.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,Ie(o));var f=Mr($t.reducer._reducer[t]||{},e);a&&Object.assign(f,Mr(a,e));var l=$t.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=$t.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=$t.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),Tr(e,_)}function Dc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.isClassSingle;if(s.store[e])throw Error("run api error: module"+e+" duplicate");s.store[e]=ic(n),"function"==typeof n&&($t.moduleName_stateFn_[e]=n),s.reducer[e]=o,a&&(s.watch[e]=a),c&&(s.computed[e]=c),i&&(s.init[e]=i),s.moduleSingleClass[e]=!0===u}void 0===t&&(t={}),void 0===e&&(e={}),oc(t)||rc("store"),oc(e)||rc("options");var s={store:{},reducer:{},watch:{},computed:{},init:{},moduleSingleClass:{}};ac(t).forEach(function(e){return r(e,t[e])}),Ot.forEach(function(e){var t=e.module,n=e.config;J("configure pending module["+t+"]"),r(t,n)}),Ot.length=0,cc(s.init)&&(s.init=null),nc(s,e)}function Ic(e,t){return uc({connect:e},t)}function Ac(e,t){return lc({connect:e},t)}function Tc(e,o){var a=le(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=gc(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function Mc(e,t,n,r,o){void 0===o&&(o=!1);try{Pt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;X(e.message)}}function Rc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&Sc(),"string"!=typeof e&&Sc(),ir(e,t,n,r,o)}function Wc(e,t,n,r){Pt().ctx.set(e,t,n,r)}function kc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=Ec(n[0]);return Eo(e,t,!1,r,!1).state}function jc(e){return Yc[e].connectedState||{}}function Lc(e){return e?wc[e]:wc}function Fc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=Pt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){X(e)}}function Pc(e,t){try{Pt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;X(e.message)}}function Vc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=xc[e];return t&&t.ccKeys.forEach(function(e){var t=bc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function zc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];Uc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function qc(e,t){return Re(e,t)}function Hc(e,t){var n=Re(e,t);return n.lazy=!0,n}function Bc(e){return{fn:function(){return e},depKeys:[]}}function Gc(e,t){return Re(e,t)}var Yc=$t.ccClassKey_ccClassContext_,Xc=$t.store.appendState,Jc=$t.reducer._caller,Zc=I.memo(function(e){var t=e.module,n=e.connect,r=e.classKey,o=e.render,a=e.children;if(t&&n)throw Error("module, connect can not been supplied both");if(!t&&!n)throw Error("module or connect should been supplied");var c=o||a||Oc,i=t?{module:t}:{connect:n};i.lite=1;var u,s,d=function(e,t){return Kc(e,t,f)}(i,r);return s=t?(u=d.moduleState,d.moduleComputed):(u=d.connectedState,d.connectedComputed),c([u,s])}),Qc=uc,ei=lc,ti=Tr,ni=Ec,ri=$c,oi=Bt,ai=$t,ci=ja,ii=Uc,ui=Jc,si=Ya,di=fc,fi=Zc,li=u,pi=Xc,yi=gc,_i={cloneModule:Nc,emit:Fc,off:Pc,connect:Ic,connectDumb:Ac,register:Qc,registerDumb:ei,registerHookComp:Tc,configure:ti,dispatch:oi,run:Dc,setGlobalState:Mc,setState:Rc,set:Wc,setValue:kc,getGlobalState:ri,getState:ni,getComputed:Lc,getConnectedState:jc,ccContext:ai,createDispatcher:ci,execute:Vc,executeAll:zc,getRefs:ii,reducer:ui,clearContextIfHot:si,CcFragment:di,Ob:fi,cst:li,appendState:pi,useConcent:yi,bindCcToMcc:vi,defComputed:qc,defLazyComputed:Hc,defComputedVal:Bc,defWatch:Gc};function vi(e){if(!hi)throw Error("current env is not multi concent ins mode");if(hi[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){pe=e}(e),se(e,_i,hi)}function mi(){var e=pe?window.mcc[pe]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=ai.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var hi=window.mcc;hi?setTimeout(function(){if(!ye())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");mi()},1e3):(mi(),se("cc",_i)),e.cloneModule=Nc,e.run=Dc,e.connect=Ic,e.connectDumb=Ac,e.register=Qc,e.registerDumb=ei,e.registerHookComp=Tc,e.configure=ti,e.setGlobalState=Mc,e.setState=Rc,e.set=Wc,e.setValue=kc,e.getState=ni,e.getGlobalState=ri,e.getConnectedState=jc,e.getComputed=Lc,e.emit=Fc,e.off=Pc,e.dispatch=oi,e.ccContext=ai,e.createDispatcher=ci,e.execute=Vc,e.executeAll=zc,e.getRefs=ii,e.reducer=ui,e.clearContextIfHot=si,e.CcFragment=di,e.Ob=fi,e.cst=li,e.appendState=pi,e.useConcent=yi,e.defComputed=qc,e.defLazyComputed=Hc,e.defComputedVal=Bc,e.defWatch=Gc,e.bindCcToMcc=vi,e.default=_i,Object.defineProperty(e,"__esModule",{value:!0})});
