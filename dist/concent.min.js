!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],t):t(e.concent={},e.React)}(this,function(e,I){"use strict";I=I&&I.hasOwnProperty("default")?I.default:I;var t,n,r,R={$$default:[]},me="$$global",Q="$$default",ee="$$cc",te="$$concent_void_module_624313307",o="$$CONCENT_ROUTER",ne="$$CcClass",he="$$CcHook",O="$$CcFrag",f="$$CcOb",A="$$CcCust",h="$$Cc",re="$$Dispatcher",Ce=Symbol("__for_sync_param_ccsync__"),U=10,D=11,N=13,T="dispatch",Ke="setState",ge="setModuleState",Se="forceUpdate",w="invoke",C="sync",W="module",$e="ref",Ee="computed",we="watch",be={CC_MODULE_NAME_DUPLICATE:1002,CC_MODULE_NOT_FOUND:1012,CC_DISPATCH_STRING_INVALID:1013,CC_DISPATCH_PARAM_INVALID:1014,CC_MODULE_NOT_CONNECTED:1015,CC_CLASS_KEY_DUPLICATE:1100,CC_CLASS_INSTANCE_KEY_DUPLICATE:1200,CC_CLASS_INSTANCE_MORE_THAN_ONE:1205,CC_STORED_KEYS_NEED_CCKEY:1207,CC_REDUCER_NOT_A_FUNCTION:1503},a=((t={})[be.CC_MODULE_NAME_DUPLICATE]="module name duplicate!",t[be.CC_MODULE_NOT_FOUND]="module not found!",t[be.CC_DISPATCH_STRING_INVALID]="when type param is string, it must be one of these format: (fnName)、(moduleName)/(fnName)",t[be.CC_DISPATCH_PARAM_INVALID]="dispatch param type is invalid, it must be string or object",t[be.CC_MODULE_NOT_CONNECTED]="module not been connected by ref",t[be.CC_CLASS_INSTANCE_KEY_DUPLICATE]="props.ccKey duplicate",t[be.CC_CLASS_INSTANCE_MORE_THAN_ONE]="ccClass is declared as singleton, trying new another one instance is not allowed! ",t[be.CC_STORED_KEYS_NEED_CCKEY]="you must explicitly specify a ccKey for ccInstance when set storedKeys!",t[be.CC_CLASS_KEY_DUPLICATE]="ccClassKey duplicate!",t[be.CC_REDUCER_NOT_A_FUNCTION]="reducer must be a function!",t),c=Object.freeze({MODULE_GLOBAL:me,MODULE_DEFAULT:Q,MODULE_CC:ee,MODULE_VOID:te,MODULE_CC_ROUTER:o,CC_CLASS:ne,CC_HOOK:he,CC_FRAGMENT:O,CC_OB:f,CC_CUSTOMIZE:A,CC_PREFIX:h,CC_DISPATCHER:re,CCSYNC_KEY:Ce,SIG_FN_START:U,SIG_FN_END:D,SIG_FN_QUIT:12,SIG_FN_ERR:N,SIG_MODULE_CONFIGURED:14,SIG_STATE_CHANGED:15,RENDER_NO_OP:1,RENDER_BY_KEY:2,RENDER_BY_STATE:3,FOR_ONE_INS_FIRSTLY:1,FOR_ALL_INS_OF_A_MOD:2,DISPATCH:T,SET_STATE:Ke,SET_MODULE_STATE:ge,FORCE_UPDATE:Se,INVOKE:w,SYNC:C,CATE_MODULE:W,CATE_REF:$e,FN_CU:Ee,FN_WATCH:we,ERR:be,ERR_MESSAGE:a}),i=((n={})[me]={},n[Q]={},n[ee]={},n),u=((r={})[me]={},r[Q]={},r[ee]={},r),s={},d={},k={_computedValueOri:u,_computedValue:i,_computedRaw:d,_computedDep:s,getRootComputedValue:function(){return i},getRootComputedDep:function(){return s},getRootComputedRaw:function(){return d}},l={},p={},K={_watchRaw:p,_watchDep:l,getRootWatchDep:function(){return l},getRootWatchRaw:function(){return p}},y={isStrict:!1,isDebug:!1,computedCompare:!0,watchCompare:!0,watchImmediate:!1,bindCtxToMethod:!1,extractModuleChangedState:!0,extractRefChangedState:!1,objectValueCompare:!1,nonObjectValueCompare:!0},_={},v={};function m(t,n,r){try{t[n][r]=1}catch(e){var o={};o[r]=1,t[n]=o}}function j(e,t){return e+"/"+t}function g(e,t){m(_,e,t)}function S(e,t,n){!function(e,t){try{delete _[e][t]}catch(e){}}(j(e,t),n)}var $=Symbol("cuk"),E="1",xe="2",M="function",Oe="is not a plain json object!",b="should be an string array or *!",x=console.error;function P(e){return null!=e&&0<de(e).length}function L(e){return!P(e)}function Ue(e,t){if(void 0===t&&(t=!1),!e)return!1;var n="object"==typeof e;if(n){var r=Array.isArray(e);return t?r:n&&!r}return!1}function F(e,t){var n="";n="string"==typeof e?e:a[e]||"",t&&(n+=t),n||(n="undefined message for code:"+e);var r=Error(n);return r.code=e,r}function V(e,t,n,r,o,a,c){var i;return(i={})[$]=1,i.needCompute=n,i.fn=r,i.newState=o,i.oldState=a,i.fnCtx=c,i.isLazy=e,i.result=t,i}function z(e,t){return e+"$"+t}function q(e){return e?" --verbose-info: "+e:""}function H(e){return void 0===e&&(e="green"),"color:"+e+";border:1px solid "+e}function B(e){return"%c"+e}var G=function(e){return"------------ CC "+e+" ------------"};function De(e){x(G("WARNING")),e instanceof Error?(x(e.message),x(e.stack)):x(e)}function Y(e){console.log(G("TIP")),console.log("%c"+e,"color:green;border:1px solid green;")}function oe(e){if(x(G("WARNING")),x(e),y.isStrict)throw e}function X(e,t,n){void 0===n&&(n={});var r=e[t];return r||(r=e[t]=n),r}function J(e,t){return X(e,t,[])}function Z(e,t){e.includes(t)||e.push(t)}function ae(e,t,n){Z(J(e,t),n)}function ce(t,n){Object.keys(n).forEach(function(e){t[e]=n[e]})}function ie(e,t,n){var r=e[t];r||(r=e[t]={}),ce(r,n)}function ue(e){void 0===e&&(e=52);var t=Math.random();return parseInt(t*e)}function se(n,r,o,a){if(void 0===r&&(r=[]),void 0===a&&(a=!1),Array.isArray(n)){var t=[];r.forEach(function(e){n.includes(e)&&t.push(e)}),n.length=0,t.forEach(function(e){return n.push(e)})}else Object.keys(n).forEach(function(e){if(r.includes(e));else{var t=n[e];a&&t?de(t).forEach(function(e){return delete t[e]}):o?n[e]=o:delete n[e]}})}function de(e){return Object.keys(e)}function fe(e){var t=null;return e&&(e.currentTarget&&e.type?t=e:e.nativeEvent&&e.target&&(e.currentTarget=e.target,t=e)),t}function le(t,n,e){function r(e){e?e[t]=n:window[t]=n}window?r(e):setTimeout(function(){r(e)},3e3)}function pe(e,t){for(var n in e)if(!(n in t))return!0;for(var r in t)if(e[r]!==t[r])return!0;return!1}function ye(o,a,c){var i={},u=!1,s=y.nonObjectValueCompare,d=y.objectValueCompare;if(!c){if(!(c?y.extractModuleChangedState:y.extractRefChangedState))return a;if(!s&&!d)return a}return a&&de(a).forEach(function(e){var t=o[e],n=a[e],r=!0;"object"!=typeof n?s&&(r=t!==n):d&&(r=t!==n),r&&(c&&(c.prevStateContainer[e]=t,c.incStateVer(e),o[e]=n),i[e]=n,u=!0)}),u?i:null}function Ne(e,t){var n=[];return e.forEach(function(e){t.includes(e)||n.push(e)}),n}function _e(e){return void 0===e&&(e={}),"string"==typeof e?{module:e}:Object.assign({module:Q},e)}var ve="";function Ie(){return ve}function Ae(){var t=null;return{commit:function(e){t||(t={}),Object.assign(t,e)},clear:function(){return t=null},getFnCommittedState:function(){return t}}}function Me(){var e=!1;return!window||("previewFrame"===window.name||window.__SANDBOX_DATA__||window.BrowserFS)&&(e=!0),e}function Te(e){return{payload:null,renderKey:"",delay:-1,module:e,fnName:""}}function Re(e){void 0===e&&(e={});var t="function"==typeof e?e():e;if(!Ue(t))throw Error("state "+Oe);return t}function We(e,t){var n=t.split(".");return function e(t,n,r,o){var a=n[o];return r===o?t[a]:e(t[a],n,r,++o)}(e,n,n.length-1,0)}function ke(e){return"-"===e?"*":e}function je(e){return Array.isArray(e)||"-"===e||"*"===e}function Pe(e,t,n){void 0===n&&(n=!0);var r=t||{},o={fn:e},a=je(r)?{depKeys:r}:r;return n&&function(e){if(e&&!je(e))throw Error("depKeys must an array , '*' or '-'")}(a.depKeys),Object.assign(o,a)}var Le={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};function Fe(e,t,n){var r=t[e];return{retKey:e,fn:r.fn,depKeys:r.depKeys,isLazy:n,sort:r.sort}}var Ve=function(e,t){return e.sort-t.sort};function ze(e,t,n,r,o,a,c,i){var u=r[o],s=[];if(!u)return{pickedFns:s,setted:[],changed:[]};var d=u.retKey_fn_,f=u.retKey_lazy_,l=u.stateKey_retKeys_,p=u.fnCount;if(e){var y=de(d),_=de(c),v=_;return"computed"===n?{pickedFns:y.map(function(e){return Fe(e,d,f[e])}).sort(Ve),setted:_,changed:v}:(y.forEach(function(e){var t=d[e];t.immediate&&s.push({retKey:e,fn:t.fn,depKeys:t.depKeys,sort:t.sort})}),s.sort(Ve),{pickedFns:s,setted:_,changed:v})}var m=function(n,r){var o=[],a=[];return de(r).forEach(function(e){var t=r[e];void 0!==t&&(a.push(e),t!==n[e]&&o.push(e))}),{changed:o,setted:a}}(a,c),h=m.setted,C=m.changed;if(0===h.length)return{pickedFns:s,setted:[],changed:[]};var K=h.join(",")+"|"+C.join(",")+"|"+o,g=Le[t][n],S=i?X(g,i):g,$=S[K];return $?{pickedFns:$.map(function(e){return Fe(e,d,f[e])}),setted:h,changed:C}:(function(s,o,d,f,a,l,c){if(0===o.length)return;var e=a["*"];if(e){var i=0<d.length;e.forEach(function(e){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c={retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a};r?i&&s.push(c):s.push(c)})}s.length<c&&function(){var u={},e=o.length,t=function(e){var i=o[e],t=a[i];return t?(t.forEach(function(e){if(!u[e]){var t=f[e],n=t.fn,r=t.compare,o=t.depKeys,a=t.sort,c=!0;r&&!d.includes(i)&&(c=!1),c&&(u[e]=!0,s.push({retKey:e,fn:n,depKeys:o,isLazy:l[e],sort:a}))}}),s.length===c?"break":void 0):"continue"};e:for(var n=0;n<e;n++){var r=t(n);switch(r){case"continue":continue;case"break":break e}}}();s.sort(Ve)}(s,h,C,d,l,f,p),S[K]=s.map(function(e){return e.retKey}),{pickedFns:s,setted:h,changed:C})}function qe(e,t,n){var r=t[n];return void 0!==r&&(e[n]=r,!0)}function He(t,n,e,r){void 0===n&&(n=[]),void 0===e&&(e=!1),void 0===r&&(r=!1);var o={},a=[];if(!Ue(t))return{partialState:e?null:o,isStateEmpty:!0,ignoredStateKeys:a};var c=!0,i=de(t);return i.length<n.length?i.forEach(function(e){n.includes(e)?qe(o,t,e)&&(c=!1):r&&a.push(e)}):(n.forEach(function(e){qe(o,t,e)&&(c=!1)}),r&&(a=Ne(i,n))),c&&e&&(o=null),{partialState:o,isStateEmpty:c,ignoredStateKeys:a}}var Be=function(e,t){return"symbol"!=typeof t&&Object.prototype.hasOwnProperty.call(e,t)};function Ge(e,n){return new Proxy(e,{get:function(e,t){return Be(e,t)&&!n.includes(t)&&n.push(t),e[t]},set:function(){return!0}})}function Ye(e,t,n,r){var o=e.ctx;if(!0===o.__$$inBM||o.__$$renderStatus===E){var a=o.ccUniqueKey;if(r){var c=o.module;if(!R[c].includes(n))return;var i=j(c,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[i]=1);if("-"!==o.watchedKeys)return;var u=o.__$$curWaKeys,s=o.__$$compareWaKeys,d=o.__$$nextCompareWaKeys;g(i,a),s[n]=u[n]=1,d[n]||(d[n]=2,o.__$$nextCompareWaKeyCount++)}else{var f=j(t,n);if(!0===o.__$$inBM)return void(o.__$$staticWaKeys[f]=1);if("-"!==o.connect[t])return;var l=o.__$$curConnWaKeys,p=o.__$$compareConnWaKeys,y=o.__$$nextCompareConnWaKeys,_=o.__$$nextCompareConnWaKeyCount;g(f,a),p[t][n]=l[t][n]=1;var v=y[t];v[n]||(v[n]=2,_[t]++)}}}var Xe=Object.prototype.hasOwnProperty,Je=k._computedValueOri,Ze=k._computedValue,Qe=k._computedDep;function et(e,t,n,r,o){(e.retKey_stateKeys_[r]||[]).forEach(function(e){Ye(t,n,e,o)})}function tt(r,o,a,c){void 0===a&&(a=!0),void 0===c&&(c=!1);var i=c?r.ctx.refComputedOri:Je[o],u=c?r.ctx.refComputedValue:Ze[o];return i?new Proxy(i,{get:function(e,t){if(Xe.call(i,t))if(c){var n=r.ctx.computedDep;Object.keys(n).forEach(function(e){et(n[e],r,e,t,a)})}else et(Qe[o],r,o,t,a);return u[t]},set:function(e,t,n){return e[t]=n,!0}}):{}}var nt,rt=function(e){return De(e+" call commit or commitCu as it is lazy")},ot={},at={};function ct(e,t,n){return e==W?X(ot,t):X(at,n)}function it(e,t,n,r,o,a,c){if(void 0===c&&(c=!0),0!==a.length){var i,u;if(t===$e){var s=e.computedDep,d=n===Ee?s:e.watchDep;u=X(s,r),i=X(d,r)}else{var f=k._computedDep,l=n===Ee?f:K._watchDep;u=X(f,r),i=X(l,r)}var p=X(i,"stateKey_retKeys_"),y=X(i,"retKey_stateKeys_"),_=function(e){var n=J(y,o);e.forEach(function(e){var t=J(p,e);Array.isArray(t)&&!t.includes(o)&&t.push(o),n.includes(e)||n.push(e)})};c?_(a):a.forEach(function(e){var t=X(u,"retKey_stateKeys_");_(t[e]||[])})}}function ut(e,t,n){return t===$e?e.computedRetKeyFns:(k._computedDep[n]||{}).retKey_fn_||{}}function st(d,$,E,w,f,e,b,x,O,U,D,N,I,l){void 0===d&&(d={}),void 0===l&&(l=!0);for(var A=d.ctx,M=A?A.ccUniqueKey:"",p={},y=0,T=e,_=!1,t=function(){var v=1===++y&&U,e=f(T,v),t=e.pickedFns,m=e.setted,h=e.changed;if(!t.length)return"break";var n=Ae(),C=n.commit,r=n.getFnCommittedState,o=Ae(),K=o.commit,g=o.getFnCommittedState,S=o.clear;if(t.forEach(function(e){var n=e.retKey,t=e.fn,r=e.isLazy,o=N+" "+D+" retKey["+n+"] can't",a={retKey:n,callInfo:O,isFirstCall:U,commit:C,commitCu:K,setted:m,changed:h,cuVal:I,committedState:T,deltaCommittedState:x,stateModule:$,refModule:E,oldState:w,refCtx:A},c=v&&"-"===e.depKeys,i=[],u=[];if(c&&(a.cuVal=function(n,r,o,e,t,a){var c,i;return i=W===r?(c=Je[e],Ze[e]):(c=t.refComputedOri,t.refComputedValue),new Proxy(c,{get:function(e,t){return Xe.call(c,t)?a.push(t):De(r+" "+o+" retKey["+n+"] get cuVal invalid retKey["+t+"]"),i[t]},set:function(){return!0}})}(n,N,D,$,A,i)),D===Ee)if(r&&(a.commit=function(){return rt(o)},a.commitCu=a.commit),c){var s=Ge(b,u),d=t(s,s,a);I[n]=V(!1,d),it(A,N,Ee,$,n,u),it(A,N,Ee,$,n,i,!1),function(e,t,n,r,o,a){var c=ct(e,o,a),i=ut(n,o,a),u=J(c,e);t.forEach(function(e){i[e].isStatic?u.push(e):J(c,e).forEach(function(e){return Z(u,e)})})}(n,i,A,0,N,$)}else if(r)I[n]=V(r,null,!0,t,b,w,a);else{var f=t(b,w,a);I[n]=V(!1,f)}else{var l=b,p=w;c&&(p=l=Ge(b,u)),t(l,p,a),c&&(it(A,N,we,$,n,u),it(A,N,we,$,n,i,!1))}c&&N===$e&&u.forEach(function(e){return A.__$$staticWaKeys[j($,e)]=1});var y=g();if(y){var _=ut(A,N,$);de(y).forEach(function(e){var t=_[e];t?t.isStatic?function(e,t,n,r){return J(ct(t,n,r),e)}(e,N,$,M).includes(e)?De("commitCu:"+o+" change ["+e+"], ["+n+"] referred ["+e+"]"):I[e]=V(!1,y[e]):De("commitCu:"+o+" change ["+e+"], it must have zero dep keys"):De("commitCu:"+o+" commit ["+e+"], it is not defined")}),S()}}),T=r()){var a=function(e,t){void 0===t&&(t=!1),t?Object.assign(T,e):T=e,T&&(Object.assign(p,T),l?(Object.assign(b,T),Object.assign(x,T)):T=null,_=!0)},c=function(e){var t=He(e,"ref"===N?A.privStateKeys:R[$],!0),n=t.partialState,r=t.ignoredStateKeys;if(r.length){var o="they are not "+(N===$e?"private":"module")+", fn is "+N+" "+D;De("these state keys["+r.join(",")+"] are invalid, "+o)}return n},i=c(T);if(i&&(a(i),D===we)){var u=function(e,t){return t===$e?e.computedDep:k._computedDep}(A,N),s=st(d,$,E,w,function(e,t){return ze(t,N,Ee,u,$,w,e,M)},i,b,x,O,!1,Ee,N,I);if(s.hasDelta)a(c(s.newCommittedState),!0)}}2<y&&(De("fnCtx.commit may goes endless loop, please check your code"),T=null)};T;){if("break"===t())break}return{hasDelta:_,newCommittedState:p}}function dt(){return bt.permanentDispatcher}function ft(n,e,t){var r=void 0===t?{}:t,o=r.ref,a=void 0===o?null:o,c=r.callInfo,i=void 0===c?{}:c,u=r.noSave,s=void 0!==u&&u,d=ht(n),f=pt[n],l=k.getRootComputedDep(),p=K.getRootWatchDep(),y=a||dt(),_=y.module,v=Object.assign({},d,e),m=Object.assign({},e),h=st(y,n,_,d,function(e,t){return ze(t,W,"computed",l,n,d,e)},m,v,m,i,!1,"computed",W,f).hasDelta,C=st(y,n,_,d,function(e,t){return ze(t,W,"watch",p,n,d,e)},m,v,m,i,!1,"watch",W,f).hasDelta;return s||mt(n,m),{hasDelta:h||C,deltaCommittedState:m}}function lt(){var e;return(e={})[ee]={},e[te]={},e[me]={},e[Q]={},e}var pt=k._computedValue,yt=de,_t=ye,vt={},mt=function(t,e,n){void 0===n&&(n=!1);var r=e;n&&(r=He(e,R[t],!0).partialState);var o=ht(t),a=Ct(t);return Kt(t),_t(o,r,{prevStateContainer:a,incStateVer:function(e){return gt(t,e)}})},ht=function(e){return St[e]},Ct=function(e){return $t[e]},Kt=function(t){try{wt[t]++}catch(e){wt[t]=1}},gt=function(e,t){Et[e][t]++},St=lt(),$t=lt(),Et={},wt={},bt={getDispatcher:dt,isHotReloadMode:function(){return!!bt.isHot||window&&(window.webpackHotUpdate||Me())},runtimeVar:y,isHot:!1,reComputed:!0,isStartup:!1,moduleSingleClass:{},moduleName_stateFn_:{},moduleName_ccClassKeys_:{},moduleName_stateKeys_:R,moduleName_isConfigured_:{},ccClassKey_ccClassContext_:{},globalStateKeys:[],store:{appendState:function(e,t){var n=J(R,e);yt(t).forEach(function(e){n.includes(e)||n.push(e)}),bt.store.setState(e,t)},_state:St,_prevState:$t,_stateVer:Et,getState:function(e){return e?ht(e):St},getPrevState:function(e){return e?Ct(e):$t},getStateVer:function(e){return e?Et[e]:Et},getModuleVer:function(e){return e?wt[e]:wt},setState:function(e,t,n){return ft(e,t,n)},setGlobalState:function(e){return ft(me,e)},saveSharedState:mt,getGlobalState:function(){return St[me]}},reducer:{_reducer:(nt={},nt[me]={},nt[ee]={},nt),_caller:{},_fnName_fullFnNames_:{},_module_fnNames_:{}},computed:k,watch:K,refStore:{_state:{},setState:function(e,t){var n=bt.refStore._state,r=Object.assign({},n[e],t);n[e]=r}},init:{_init:{}},ccUKey_ref_:vt,event_handlers_:{},ccUKey_handlerKeys_:{},handlerKey_handler_:{},waKey_uKeyMap_:_,waKey_staticUKeyMap_:v,refs:vt,info:{packageLoadTime:Date.now(),firstStartupTime:"",latestStartupTime:"",version:"2.6.4",author:"fantasticsoul",emails:["624313307@qq.com","zhongzhengkai@gmail.com"],tag:"yuna"},featureStr_classKey_:{},userClassKey_featureStr_:{},errorHandler:null,middlewares:[],plugins:[],pluginNameMap:{},permanentDispatcher:null,localStorage:null,recoverRefState:function(){}};bt.recoverRefState=function(){var e=bt.localStorage;if(e)for(var t=e.length,n=bt.refStore._state,r=0;r<t;r++){var o=e.key(r);if(o.startsWith("CCSS_"))try{n[o.substr(5)]=JSON.parse(e.getItem(o))}catch(e){console.error(e)}}};var xt=[],Ot=function(e){return e.toLowerCase()===ee},Ut=function(e){return/^[\$\#\&a-zA-Z0-9_-]+$/.test(e)},Dt=q,Nt=F;function It(e){if(!Ut(e))throw Error("module["+e+"] writing is invalid!");if(Ot(e))throw Error("'$$cc' is a built-in module name for concent")}function At(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var r=n||"module["+e+"]",o=bt.store._state;if(It(e),e!==me)if(t){if(P(o[e]))throw Nt(be.CC_MODULE_NAME_DUPLICATE,Dt(r))}else if(!o[e])throw Nt(be.CC_MODULE_NOT_FOUND,Dt(r))}function Mt(t,e){var n=Array.isArray(e);if(!n&&"*"!==e)throw Error("storedKeys type err, "+b);n&&e.forEach(function(e){if(t.includes(e))throw Error("the item["+e+"] of storedKeys is not a module state key!")})}var Tt={},Rt=function(e,t,n){if(e.code!==be.CC_MODULE_NAME_DUPLICATE||!bt.isHotReloadMode())throw e;var r=function(e){e||(e="");for(var t=e.split("\n"),n=t.length,o="",a=0;a<n;a++)if(t[a].includes(".checkModuleNameAndState")){!function(){var e=t[a+3].split(":"),n=e.length-1,r=[];e.forEach(function(e,t){t!==n&&r.push(e)}),o=r.join(":")}();break}return o}(e.stack),o=n+"|--link--|"+t,a=Tt[o];if(a){if(r!==a)throw e}else Tt[o]=r},Wt={};function kt(e){Wt[e]={}}function jt(t,e,n){void 0===n&&(n=!0),kt(t);var r=t===te?{}:e;try{!function(e,t,n){if(At(e,n),!Ue(t))throw Error("module["+e+"]'s state "+Oe)}(t,r,n)}catch(e){Rt(e,t,"state")}var o=bt.store,a=o.getState(),c=o.getStateVer(),i=o.getModuleVer(),u=o.getPrevState();ie(a,t,r),ie(u,t,r),c[t]=de(r).reduce(function(e,t){return e[t]=1,e},{}),i[t]=1;var s=bt.computed;X(s._computedDep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),X(s._computedValue,t),X(s._computedValueOri,t);var d=Object.keys(r);if(bt.moduleName_stateKeys_[t]=d,t===me){var f=bt.globalStateKeys;d.forEach(function(e){f.includes(e)||f.push(e)})}}function Pt(e,t){void 0===t&&(t=!1);var n=bt.ccUKey_ref_,r=bt.moduleName_ccClassKeys_,o=bt.ccClassKey_ccClassContext_,a=[];if(e){if(!bt.store._state[e])throw Error("module["+e+"] is not declared in store");var c=r[e];if(c&&0!==c.length){var i=c[0],u=o[i];if(!u)throw Error("no ccClassContext found for ccClassKey "+i+"!");a=u.ccKeys}if(e===Q&&(a=a.filter(function(e){return!e.startsWith(O)})),0===a.length&&t){throw Error("[[pickOneRef]]: no ref found for module["+e+"]!,if this message doesn't matter, you can ignore it")}}var s=n[a[0]];return s||(s=bt.permanentDispatcher),s}var Lt=z,Ft=De,Vt=function(){return Promise.resolve()};function zt(e,t,n,r,o){void 0===n&&(n="");var a=void 0===o?{}:o,c=a.ccClassKey,i=a.ccKey,u=a.throwError,s=a.refModule,d=void 0===s?"":s;if(void 0===e&&void 0===t)throw Error("params type error");var f,l="",p="";try{if(c&&i){var y=Lt(c,i),_=bt.refs[y];if(!_)return Ft("no ref found for ccUniqueKey:"+y+"!"),Vt();f=_.ctx.dispatch}else{if("string"==typeof e)if(e.includes("/")){var v=e.split("/");l=v[0],p=v[1]}else p=e;var m;if(!(m=l&&"*"!==l?Pt(l):d?Pt(d):Pt()))return Ft("no ref found"),Vt();f=m.ctx.dispatch}if("*"!==l)return f(e,t,n,r);var h=bt.reducer._fnName_fullFnNames_[p];if(!h)return;var C=[];return h.forEach(function(e){C.push(f(e,t,n,r))}),Promise.all(C)}catch(e){if(u)throw e;return Ft(e.message),Vt()}}function qt(e,t,n,r,o){return zt(e,t,n,r,o)}function Ht(a,e){void 0===e&&(e={});var t="module["+a+"] reducer";if(!Ue(e))throw Error(t+" "+Oe);At(a,!1,t+" is invalid");var n=bt.reducer,r=n._reducer,o=n._caller,c=n._fnName_fullFnNames_,i=n._module_fnNames_,u=Object.assign({},e);r[a]=u;var s=X(o,a),d=J(i,a);u.setState||(u.setState=function(e){return e}),de(u).forEach(function(e){d.includes(e)||d.push(e);var r=a+"/"+e,t=J(c,e);t.includes(r)||t.push(r),s[e]=function(e,t,n){return qt(r,e,t,n)};var o=u[e];if("function"!=typeof o)throw Error("reducer key["+e+"] 's value is not a function");var n=o;o.__fnName&&(u[e]=n=function(e,t,n){return o(e,t,n)}),n.__fnName=e,n.__stateModule=a,n.__ctName=o.__ctName||o.constructor.name})}var Bt=0,Gt=["a","A","b","B","c","C","d","D","e","E","f","F","g","G","h","H","i","I","j","J","k","K","l","L","m","M","n","N","o","O","p","P","q","Q","r","R","s","S","t","T","u","U","v","V","w","W","x","X","y","Y","z","Z"];function Yt(e){return Bt++,(e||function(e){void 0===e&&(e=6);for(var t="",n=0;n<e;n++)t+=Gt[ue()];return t}())+"_"+Bt}var Xt=bt.moduleName_stateKeys_,Jt=bt.runtimeVar,Zt=1;function Qt(e,t,n,r,o){var a=t.refCtx,c=t.type;if(e!==$e||a.__$$inBM){if(n){var i,u,s,d=typeof n;if("string"==d)Ue(r)?((u={})[n]=r,i=u):typeof r===M&&((s={})[n]=Pe(r,o),i=s);else if(Ue(n))i=n;else if(d===M&&!Ue(i=n(a)))throw Error("type of "+c+" callback result must be an object");i?function(O,U,D){var e=Jt.computedCompare,t=Jt.watchCompare,N=Jt.watchImmediate,I=U.type===Ee?e:t,A=U.module;de(D).forEach(function(c){var e=D[c],t=typeof e,n=e;if(t===M&&(n={fn:e}),Ue(n)){var r=n,o=r.fn,a=r.immediate,i=void 0===a?N:a,u=r.compare,s=void 0===u?I:u,d=r.lazy,f=r.retKeyDep,l=void 0===f||f,p=n.depKeys||"-",y=n.sort||Zt++,_=Yt("mark");if("*"===p||"-"===p){var v="-"===p&&l,m=rn(U,A,c,v),h=m.pureKey,C=m.module;en(O,U,_,h),nn(O,U,C,h,o,p,i,s,d,y)}else if(0===p.length){var K=rn(U,A,c),g=K.pureKey,S=K.module;en(O,U,_,g),nn(O,U,S,g,o,p,i,s,d,y)}else{var $=rn(U,A,c),E=$.pureKey,w=$.moduleOfKey,b=w;en(O,U,_,E);var x={};p.forEach(function(e){var t=rn(U,A,e),n=t.isStateKey,r=t.pureKey,o=t.module;if(b&&o!==b)throw Error("including slash both in retKey["+c+"] and depKey["+e+"] founded, but their module is different");var a=J(x,o);if(!n)throw Error("depKey["+e+"] invalid, module["+o+"] doesn't include its stateKey["+r+"]");tn(U,o,r),a.push(r)}),de(x).forEach(function(e){nn(O,U,e,E,o,x[e],i,s,d,y)})}}else De("retKey["+c+"] item type error")})}(e,t,i):De(e+" "+c+" param type error")}}else De(e+" "+c+" must been called in setup block")}function en(e,t,n,r){if(e===$e){var o=t.refCtx,a=o.retKey_fnUid_,c=t.type,i=c+"_"+r;if(a[i])throw Error("ccUKey["+o.ccUniqueKey+"], retKey["+r+"] duplicate in ref "+c);a[i]=n}}function tn(e,t,n){var r=e.refCtx;r&&(r.__$$staticWaKeys[j(t,n)]=1)}function nn(e,t,n,r,o,a,c,i,u,s){var d=X(t.dep,n,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),f=d.retKey_fn_,l=d.stateKey_retKeys_,p=d.retKey_lazy_,y=d.retKey_stateKeys_,_=Array.isArray(a)&&0===a.length,v=s;_?v<0||(v=-1):s<0&&(v=0);var m={fn:o,immediate:c,compare:i,depKeys:a,sort:v,isStatic:_};f[r]?e!==$e&&(f[r]=m,p[r]=u):(f[r]=m,p[r]=u,d.fnCount++),e===$e&&(t.retKeyFns[r]=f[r]);var h=t.refCtx;if(h&&("computed"===t.type?h.hasComputedFn=!0:h.hasWatchFn=!0),"-"!==a){var C="*"===a?["*"]:a;"*"===a&&(y[r]=Xt[n]),C.forEach(function(e){ae(l,e,r)})}}function rn(e,t,n,r){void 0===r&&(r=!1);var o,a=t,c=n,i="";if(n.includes("/")){var u=n.split("/"),s=u[0];s&&(a=i=s),c=u[1]}var d=Xt[a];if(a===e.module)o=e.stateKeys;else{if(!(o=d))throw F(be.CC_MODULE_NOT_FOUND,q("module["+a+"]"));if(!e.connect[a])throw F(be.CC_MODULE_NOT_CONNECTED,q("module["+a+"], retKey["+c+"]"))}var f=o.includes(c);return r&&f&&function(e,t,n,r){var o=X(e.dep,t,{retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0}),a=o.retKey_stateKeys_;ae(o.stateKey_retKeys_,n,n),ae(a,n,n),r&&tn(e,t,n)}(e,a,c,d.includes(c)),{isStateKey:f,pureKey:c,module:a,moduleOfKey:i}}function on(e,o){var t={};return de(e).forEach(function(r){o[r]=V(),Object.defineProperty(t,r,{get:function(){var e=o[r]||{},t=e.isLazy;if(!t)return e.result;if(t&&e.needCompute){var n=(0,e.fn)(e.newState,e.oldState,e.fnCtx);e.result=n,e.needCompute=!1}return e.result},set:function(e){var t=o[r];e[$]?e.isLazy?(t.isLazy=!0,t.needCompute=!0,t.newState=e.newState,t.oldState=e.oldState,t.fn=e.fn,t.fnCtx=e.fnCtx):(t.isLazy=!1,t.result=e.result):De("computed value can not been changed manually")}})}),t}var an=Ue;function cn(n,e){if(e){var t="module["+n+"] computed";if(!an(e))throw Error(t+" "+Oe);At(n,!1,t+" is invalid");var r=bt.computed,o=bt.store.getState(),a=r.getRootComputedValue(),c=r.getRootComputedDep();r.getRootComputedRaw()[n]=e;var i=o[n];Qt(W,{type:Ee,module:n,stateKeys:de(i),dep:c},e);var u=bt.getDispatcher();a[n]=on(e,r._computedValueOri[n]);var s=a[n];st(u,n,u&&u.ctx.module,i,function(e,t){return ze(t,W,Ee,c,n,i,e)},i,i,i,Te(n),!0,Ee,W,s)}}var un=Ue,sn=X,dn=de;function fn(n,e,t){if(void 0===t&&(t=!1),e){var r="module["+n+"] watch";if(!un(e))throw Error(r+" "+Oe);At(n,!1,r+" is invalid");var o=bt.watch.getRootWatchDep(),a=bt.watch.getRootWatchRaw(),c=bt.computed.getRootComputedValue();if(t){var i=a[n];i?Object.assign(i,e):a[n]=e}else a[n]=e;var u=(0,bt.store.getState)(n);Qt(W,{module:n,stateKeys:dn(u),dep:o},e);var s=bt.getDispatcher(),d=sn(c,n);st(s,n,s&&s.ctx.module,u,function(e,t){return ze(t,W,we,o,n,u,e)},u,u,u,Te(n),!0,we,W,d)}}var ln=[U,D,12,N,14,15],pn={};function yn(t,n){pn[t].forEach(function(e){return e({sig:t,payload:n})})}function _n(e,t){!function(n,e,t){function r(e,t){t?n[e].push(t):console.warn("invalid sig["+e+"]")}Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)}(pn,e,t)}ln.forEach(function(e){return pn[e]=[]});var vn=function(e){if(!bt.errorHandler)throw e;bt.errorHandler(e)},mn=0,hn={},Cn={},Kn={},gn={};function Sn(){return++mn}function $n(e,t,n,r){if(n){var o=r[e];o||(o=r[e]={});var a=o[t];a?Object.assign(a,n):o[t]=n}}function En(e,t,n){$n(e,t,n,hn)}function wn(e,t,n){return En(e,t,n),function(e){var t=function(e){return hn[e]}(e),n=[];return de(t).forEach(function(e){n.push({module:e,state:t[e]})}),n}(e)}function bn(e){delete hn[e]}var xn={},On=function(e,t,n){void 0===n&&(n=1e3);var r=xn[t];r&&clearTimeout(r),xn[t]=setTimeout(function(){delete xn[t],e()},n)};function Un(e,n,r,t,o,a,c){void 0===a&&(a=!1);var i=e.ctx;if(!i.hasWatchFn)return{hasDelta:!1,newCommittedState:{}};var u=Object.assign({},r,t),s=i.watchDep,d=i.module,f=i.ccUniqueKey,l=i.refComputed;n!==d&&(l=i.connectedComputed[n]);return{hasDelta:st(e,n,d,r,function(e,t){return ze(t,$e,we,s,n,r,e,f)},t,u,t,o,a,we,$e,l,c).hasDelta}}function Dn(e,n,r,t,o,a,c){void 0===a&&(a=!1);var i=e.ctx;if(!i.hasComputedFn)return{hasDelta:!1,newCommittedState:{}};var u=i.computedDep,s=i.module,d=i.ccUniqueKey,f=i.refComputed;n!==s&&(f=i.connectedComputed[n]);var l=Object.assign({},r,t);return st(e,n,s,r,function(e,t){return ze(t,$e,Ee,u,n,r,e,d)},t,l,t,o,a,Ee,$e,f,c)}var Nn=de,In=bt.ccUKey_ref_,An=bt.waKey_uKeyMap_,Mn=bt.waKey_staticUKeyMap_;function Tn(o,e,c,i){var t=Nn(e),n=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=[]),e+"/"+t.sort().join(",")+"/"+n+"/"+("*"===r?"*":r.sort().join(","))}(o,t,c,i),r=function(e,t){return Wt[e][t]}(o,n);if(r)return{sharedStateKeys:t,result:r};var a={},u=[],s=[];t.forEach(function(e){var t=o+"/"+e;Object.assign(a,An[t],Mn[t])});function d(e,t){e?u.push(t):s.push(t)}function f(e,t){var n=e.ctx,r=n.ccClassKey,o=n.ccUniqueKey;if(c){var a=n.renderKey===c;"*"===i?a&&d(t,o):i.includes(r)?a&&d(t,o):d(t,o)}else d(t,o)}var l=Nn(a),p=!1;l.forEach(function(e){var t=In[e];if(t){var n=t.ctx,r=!!n.connect[o];n.module===o&&f(t,!0),r&&f(t,!1)}else p=!0});var y={belong:u,connect:s};return p||function(e,t,n){Wt[e][t]=n}(o,n,y),{sharedStateKeys:t,result:y}}var Rn=Ue,Wn=De,kn=L,jn=function(e,t){return e+"/"+Object.keys(t).sort().join("|")},Pn=de,Ln=1,Fn=2,Vn=Se,zn=Ke,qn=15,Hn=1,Bn=2,Gn=3,Yn=bt.store,Xn=Yn.setState,Jn=Yn.getPrevState,Zn=Yn.saveSharedState,Qn=bt.middlewares,er=bt.ccClassKey_ccClassContext_,tr=bt.refStore,nr=bt.moduleName_stateKeys_;function rr(e,t,a){var n=void 0===t?{}:t,c=n.module,r=n.skipMiddleware,i=void 0!==r&&r,u=n.payload,s=n.stateChangedCb,o=n.reactCallback,d=n.type,f=n.calledBy,l=void 0===f?zn:f,p=n.fnName,y=void 0===p?"":p,_=n.renderKey,v=void 0===_?"":_,m=n.delay,h=void 0===m?-1:m;if(void 0!==e)if(Rn(e)){var C=a.ctx,K=C.module,g=C.ccUniqueKey,S=C.ccKey,$=function(e,t){return e===t?Ln:Fn}(c,K),E={payload:u,renderKey:v,ccKey:S,module:c,fnName:y},w=function(e,t,n){var r=He(t,nr[e],!0).partialState;if(r){var o=Xn(e,r,n),a=o.hasDelta,c=o.deltaCommittedState;return{partialState:c,hasDelta:a}}return{partialState:r,hasDelta:!1}}(c,e,{ref:a,callInfo:E,noSave:!0}),b=w.partialState;w.hasDelta&&Object.assign(e,b),or(a,E,v,l,e,$,o,function(t,n,r){var o={calledBy:l,type:d,payload:u,renderKey:v,delay:h,ccKey:S,ccUniqueKey:g,committedState:n,refModule:K,module:c,fnName:y,sharedState:b||{},modState:function(e,t){o.committedState[e]=t,o.sharedState[e]=t}};!function(e,n,r){if(!0!==e){var o=Qn.length;if(0<o){var a=0;!function e(){if(a===o)r();else{var t=Qn[a];a++,"function"==typeof t?t(n,e):(Wn("found one middleware is not a function"),e())}}()}else r()}else r()}(i,o,function(){var e=Zn(c,o.sharedState,!0);r&&r(),t===Hn&&!e||yn(qn,{calledBy:l,type:d,committedState:n,sharedState:e||{},module:c,ccUniqueKey:g,renderKey:v}),s&&s(),e&&function(e,t,n,r,o,a,c){var i=function(){!function(l,e,p,t,y,n){if(!p)return;var _=bt.ccUKey_ref_,r=e.ctx,o=r.ccUniqueKey,a=t===Ln,c=Tn(y,p,n,er[r.ccClassKey].renderKeyClasses),v=c.sharedStateKeys,i=c.result,u=i.connect;i.belong.forEach(function(e){var t=_[e];if(t){var n=t.ctx.ccUniqueKey;a&&n===o||or(t,l,null,"broadcastState",p,Ln)}});var m=Jn(y);u.forEach(function(e){var t=_[e];if(t&&!1===t.__$$isUnmounted){var n=t.ctx,r=Dn(t,y,m,p,l,!1,!1),o=r.hasDelta,a=r.newCommittedState,c=Un(t,y,m,p,l,!1,!1),i=c.hasDelta,u=c.newCommittedState;if(o||i){var s=Object.assign(a,u),d=n.module,f=n.unProxyState;Dn(t,d,f,s,l),Un(t,d,f,s,l),Object.assign(f,s),n.__$$settedList.push({module:d,keys:Pn(s)})}n.__$$settedList.push({module:y,keys:v}),n.__$$ccForceUpdate()}})}(e,t,n,r,o,a)};if(0<c){var u=jn(t.ctx.ccUniqueKey,n);On(i,u,c)}else i()}(E,a,e,$,c,v,h)})})}else Wn("your committed state "+Oe)}function or(e,t,n,r,o,a,c,i){var u=e.ctx,s=u.unProxyState;if(!0===e.__$$isUnmounted||a!==Ln||r!==Vn&&kn(o))return i&&i(Hn,o);var d=u.module,f=u.storedKeys,l=u.ccUniqueKey,p=Gn;if(n&&(p=Bn,u.renderKey!==n))return i&&i(Hn,o);if(0<f.length){var y=He(o,f),_=y.partialState;if(!y.isStateEmpty){if(!0===u.persistStoredKeys){var v=He(s,f),m=Object.assign({},v.partialState,_);bt.localStorage&&bt.localStorage.setItem("CCSS_"+l,JSON.stringify(m))}tr.setState(l,_)}}var h=Object.assign({},o);Dn(e,d,s,h,t),Un(e,d,s,h,t);function C(){var e=ye(u.unProxyState,h);e&&(u.__$$settedList.push({module:d,keys:Pn(e)}),u.__$$ccSetState(e,c))}i?i(p,h,C):C()}function ar(e,t){try{Pt(t.module).ctx.changeState(e,t)}catch(e){oe(e)}}var cr=De,ir=Ue,ur=de,sr=bt.store,dr=sr.getState,fr=sr.setState,lr=bt.reducer._reducer,pr=bt.computed._computedValue,yr=F,_r=q;function vr(e,t){void 0===t&&(t=!0);try{return At(e,!1,"module["+e+"] is not configured in store"),!0}catch(e){return function(e,t){if(void 0===t&&(t=!0),t)throw e;Cr(e)}(e,t),!1}}function mr(o,a){return function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?a(e):o.apply(void 0,n)}}function hr(e,t,n,r){var o;return!0===e?(function(e){Kn[e]=!0}(o=Sn()),r[o]=1):r[o=t||Sn()]||(r[o]=1),{_chainId:o,_oriChainId:n||o}}function Cr(e,t){e&&(t?t(e):(cr(e),bt.errorHandler&&bt.errorHandler(e)))}function Kr(e,t,n){return function(r,o,a,c){return new Promise(function(e,t){var n=Object.assign(a,{__innerCb:mr(e,t)});r(o,n,c)}).catch(vn)}(wr,e,t,n)}function gr(e,t,n){return Kr(e,{callerRef:t.callerRef,context:!0,module:t.module,calledBy:t.calledBy,fnName:e.name,delay:t.delay,renderKey:t.renderKey,chainId:t.chainId,oriChainId:t.oriChainId,chainId_depth_:t.chainId_depth_,isSilent:t.isSilent},n)}function Sr(o,a){return function(e,t){var n=o.ctx;if(a){var r=Object.assign({},n.unProxyState,e);a.state=r}n.reactSetState(e,t)}}function $r(t){return function(e){t.ctx.reactForceUpdate(e)}}function Er(h,e){var t=void 0===e?{}:e,C=t.chainId,K=t.oriChainId,g=t.isLazy,n=t.delay,S=void 0===n?-1:n,r=t.isSilent,$=void 0!==r&&r,o=t.chainId_depth_,E=void 0===o?{}:o;return function(e,t,n,r){var o=g,a=$,c="",i=null!=r?r:S;if(ir(n)){var u=n.lazy,s=n.silent,d=n.renderKey,f=n.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=n;var l,p,y=hr(o,C,K,E),_=typeof e,v={callerRef:h,calledBy:w,module:h.ctx.module,isSilent:a,chainId:y._chainId,oriChainId:y._oriChainId,chainId_depth_:E,delay:i,renderKey:c},m=Error("param type error, correct usage: invoke(userFn:function, ...args:any[]) or invoke(option:[module:string, fn:function], ...args:any[])");if("function"==_)return e.__fnName&&(e.name=e.__fnName),gr(e,v,t);if("object"!=_)throw m;if(p=Array.isArray(e)?(l=e[1],e[0]):(l=e.fn,e.module),"function"!=typeof l)throw m;return p&&(v.module=p),gr(l,v,t)}}function wr(l,e,p){var y=e.callerRef,_=y.ctx.module,t=e.module,v=void 0===t?_:t,n=e.context,m=void 0!==n&&n,h=e.__innerCb,C=e.type,K=e.calledBy,g=e.fnName,r=e.delay,S=void 0===r?-1:r,$=e.renderKey,E=e.chainId,w=e.oriChainId,b=e.chainId_depth_,x=e.isSilent;!function(e,t,n,r){var o=n;vr(e,!1)?(e!==t&&n&&(cr(function(e,t){return"param module["+e+"] must equal current ref's module["+t+"] when pass param reactCallback, or it will never been triggered! "}(e,t)),o=null),r(null,o)):r(Error("inputModule:"+e+" invalid"),null)}(v,_,e.cb,function(e,r){if(e)return Cr(e,h);var o,t=dr(v),n={};if(o=E===w&&1===b[E],m){b[E]=b[E]+1;var a=br(y,!1,x,v,$,S,E,w,b),c=br(y,!1,!0,v,$,S,E,w,b),i=br(y,!0,x,v,$,S,E,w,b),u=Er(y,{delay:S,chainId:E,oriChainId:w,chainId_depth_:b}),s=Er(y,{isLazy:!0,delay:S,oriChainId:w,chainId_depth_:b}),d=Er(y,{isLazy:!1,delay:S,isSilent:!0,oriChainId:w,chainId_depth_:b}),f=function(e){return gn[e]}(E)||{};n={module:v,callerModule:_,committedStateMap:f,committedState:f[v]||{},invoke:u,lazyInvoke:s,silentInvoke:d,invokeLazy:s,invokeSilent:d,dispatch:a,lazyDispatch:i,silentDispatch:c,dispatchLazy:i,dispatchSilent:c,rootState:dr(),globalState:dr(me),moduleState:t,moduleComputed:pr[v]||{},setState:function(e){return a("setState",e,{silent:x,renderKey:$,delay:S})},refCtx:y.ctx}}!1===x&&yn(U,{isSourceCall:o,calledBy:K,module:v,chainId:E,fn:l}),new Promise(function(e){return e(l(p,t,n))}).then(function(e){b[E]=b[E]-1;var t=1===b[E];!function(e,t,n){$n(e,t,n,gn)}(E,v,e);var n=[];!1===x&&(yn(D,{isSourceCall:o,calledBy:K,module:v,chainId:E,fn:l}),!function(e){return!0===Kn[e]}(E)?n=[{module:v,state:e}]:t?function(e){return!0===Cn[e]}(E)||(n=wn(E,v,e),bn(E)):En(E,v,e)),n.forEach(function(e){e.state&&rr(e.state,{renderKey:$,module:e.module,reactCallback:r,type:C,calledBy:K,fnName:g,delay:S,payload:p},y)}),o&&(bn(E),function(e){delete gn[e]}(E)),h&&h(null,e)}).catch(function(e){yn(N,{isSourceCall:o,calledBy:K,module:v,chainId:E,fn:l}),Cr(e,h)})})}function br(b,x,O,U,D,N,I,A,M){return void 0===D&&(D=""),void 0===N&&(N=-1),void 0===M&&(M={}),function(e,n,t,r){void 0===e&&(e={});var o=x,a=O,c="",i=r||N;if(ir(t)){c=D;var u=t.lazy,s=t.silent,d=t.renderKey,f=t.delay;void 0!==u&&(o=u),void 0!==s&&(a=s),void 0!==d&&(c=d),void 0!==f&&(i=f)}else c=t||D;function l(){return Er(b,{chainId:v,oriChainId:m,isLazy:o,chainId_depth_:M})(e,n,c,i)}var p,y,_=hr(o,I,A,M),v=_._chainId,m=_._oriChainId,h=typeof e,C=U;if(h&&"object"==h){if(Array.isArray(h))return l();var K=e.module;K&&(C=K),p=e.type,y=e.cb}else{if("string"!=h&&"function"!=h)return Promise.reject(yr(be.CC_DISPATCH_PARAM_INVALID));var g=e;if("function"==h){var S=e.__fnName;if(!S)return l();g=S,1==M[m]&&(C=e.__stateModule)}var $=g.split("").filter(function(e){return"/"===e}).length;if(0===$)p=g;else{if(1!==$)return Promise.reject(yr(be.CC_DISPATCH_STRING_INVALID,_r(g)));var E=g.split("/"),w=E[0];w&&(C=w),p=E[1]}}return"*"===C?zt("*/"+p,n,{silent:a,lazy:o,renderKey:c},i,{refModule:b.ctx.module}):new Promise(function(e,t){!function(e){var t=void 0===e?{}:e,n=t.callerRef,r=t.module,o=t.renderKey,a=t.isSilent,c=t.type,i=t.payload,u=t.cb,s=t.__innerCb,d=t.delay,f=void 0===d?-1:d,l=t.chainId,p=t.oriChainId,y=t.chainId_depth_,_=lr[r];if(!_)return s(Error("no reducerMap found for module:["+r+"]"));var v=_[c];if(!v)return s(Error("no reducer fn found for ["+r+"/"+c+"], is these fn you want:"+Object.keys(_)));wr(v,{callerRef:n,module:r,type:c,cb:u,context:!0,__innerCb:s,calledBy:T,delay:f,renderKey:o,isSilent:a,chainId:l,oriChainId:p,chainId_depth_:y},i)}({callerRef:b,module:C,type:p,payload:n,cb:y,__innerCb:mr(e,t),delay:i,renderKey:c,isSilent:a,chainId:v,oriChainId:m,chainId_depth_:M})}).catch(vn)}}function xr(c,e){return function(t){function n(){e&&e(function(e){for(var t="string"!=typeof e||e.includes("/")?e:c+"/"+e,n=arguments.length,r=Array(1<n?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];zt.apply(void 0,[t].concat(r))},dr(c))}try{!function(e,t,n){ar(t,{module:e,stateChangedCb:n})}(c,t,n)}catch(e){var r=dr(c);if(!r)return cr("invalid module "+c);var o=He(t,ur(r),!1,!0),a=o.ignoredStateKeys;o.isStateEmpty||fr(c,o.partialState),0<a.length&&cr("invalid keys:"+a.join(",")+", their value is undefined or they are not declared in module"+c),Y("no ccInstance found for module["+c+"] currently, cc will just store it, lately ccInstance will pick this state to render"),n()}}}var Or=function(o){return function(e,t){var n=o.ctx;Object.assign(n.unProxyState,e);var r=Object.assign({},o.state,e);n.type===he?(o.state=n.state=r,n.__boundSetState(r),t&&t(r)):(n.state=r,o.__$$isMounted?o.state=r:Object.assign(o.state,e),n.__boundSetState(e,function(){t&&t(r)}))}},Ur=function(r){return function(e){var t=r.ctx;if(t.type===he){var n=Object.assign({},r.state);t.__boundSetState(n),e&&e(n)}else t.__boundForceUpdate(e)}},Dr=Ue,Nr=Re;function Ir(t,n){if(bt.isStartup){if(!Dr(n))throw Error("param config "+Oe);if(t===me)throw Error("configuring global module is not allowed");var e=n.state,r=n.reducer,o=n.computed,a=n.watch,c=n.init,i=n.isClassSingle,u=Nr(e);if("function"==typeof e&&(bt.moduleName_stateFn_[t]=e),r&&!Dr(r))throw Error("config.reducer "+Oe);if(jt(t,u,!0),Ht(t,r),o&&cn(t,o),a&&fn(t,a),bt.moduleSingleClass[t]=!0===i,c){if("function"!=typeof c)throw Error("init value must be a function!");Promise.resolve().then(c).then(function(e){xr(t,n.initPost)(e)})}bt.moduleName_isConfigured_[t]=!0,yn(14,t)}else xt.push({module:t,config:n})}function Ar(r,o){var a={};return de(r).forEach(function(e){function t(){return n.apply(void 0,arguments)}var n=r[e];t.__fnName=e,t.__stateModule=o,a[e]=t}),a}var Mr=bt.event_handlers_,Tr=bt.handlerKey_handler_,Rr=bt.ccUKey_handlerKeys_,Wr=bt.ccUKey_ref_,kr=function(e,t,n){return e+"$"+t+"$"+n},jr=J,Pr=De;function Lr(e,t,n,r,o){var a=null==o?null:o,c=Mr[e];if(c){var i=c;return r?i=c.filter(function(e){return e.ccUniqueKey===r}):n?i=c.filter(function(e){return e.ccClassKey===n}):t&&(i=c.filter(function(e){return e.module===t})),void 0!==a&&(i=i.filter(function(e){return e.identity===a})),i}return[]}function Fr(e){var o={},r=[];e.forEach(function(e){var t=e.ccUniqueKey,n=e.event;delete Tr[e.handlerKey],o[t]=1,r.includes(n)||r.push(n)}),r.forEach(function(e){var r=Mr[e];r&&(r.forEach(function(e,t){var n=e.ccUniqueKey;1===o[n]&&(r[t]=null,delete Rr[n])}),Mr[e]=r.filter(function(e){return null!==e}))})}function Vr(e,t,n,r,o,a){var c=jr(Mr,r);if("function"!=typeof a)return Pr("event "+r+"'s handler is not a function!");var i=kr(n,r,o),u=jr(Rr,n),s=c.findIndex(function(e){return e.handlerKey===i}),d={event:r,module:e,ccClassKey:t,ccUniqueKey:n,identity:o,handlerKey:i,fn:a};-1<s?c[s]=d:(c.push(d),u.push(i)),Tr[i]=d}function zr(e){for(var t=arguments.length,a=Array(1<t?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];var r,o,c,i,u=null,s=null;"string"==typeof e?r=e:(r=e.name,u=e.identity,o=e.module,c=e.ccClassKey,i=e.ccUniqueKey,s=e.canPerform),Lr(r,o,c,i,u).forEach(function(e){var t=e.handlerKey,n=Wr[e.ccUniqueKey];if(n&&t){if(n.__$$isUnmounted)return;var r=Tr[t];if(r){if(s&&!s(n))return;var o=r.fn;n.__$$isMounted?o.apply(void 0,a):n.ctx.__$$onEvents.push({fn:o,args:a})}}})}function qr(e,t){Fr(Lr(e,t.module,t.ccClassKey,t.ccUniqueKey,t.identity))}function Hr(e){var t=Rr[e];if(t){var n=[];t.forEach(function(e){return n.push(Tr[e])}),Fr(n)}}function Br(e){var t;if(e&&"object"==typeof e){var n;if(Array.isArray(e))n={name:e[0],identity:e[1]};else n=Object.assign({},e);n.identity||(n.identity=null),t=n}else t={name:e,identity:null};return t}var Gr=Object.freeze({bindEventHandlerToCcContext:Vr,findEventHandlersToPerform:zr,findEventHandlersToOff:qr,offEventHandlersByCcUniqueKey:Hr,getEventItem:Br});function Yr(n,e,r,o){return new Proxy(e,{get:function(e,t){return Ye(n,r,t,o),e[t]},set:function(e,t,n){return e[t]=n,!0}})}var Xr=De,Jr=z;function Zr(e){return e?e.props||e:{}}var Qr=bt.store.getState;var eo=function(e,t,n){var r=n.module,o=n.state,a=!1,c="",i="",u="",s=null,d=-1,f=!1,l=e[Ce],p=e.type,y=!1;if(void 0!==l){var _,v,m;if(d=e.delay,i=e.rkey,a="int"===p,f="bool"===p,(c=l).includes("/")){var h=c.split("/");_=h[1],v=c,m=h[0]}else v=r+"/"+(_=c),m=r;var C=Qr(m);u="bool"===p?!We(m!==r?C:o,_):function(e){var t=fe(e);return t?t.currentTarget.value:e}(t);var K=e.val;if(void 0===K);else if("function"==typeof K){var g=K(u,_,{module:m,moduleState:C,fullKeyPath:v,state:o,refCtx:n});if(null!=g)if("as"===p)u=g;else{var S=typeof g;"boolean"==S?y=!g:"object"==S?(y=!0,s=g):De("syncKey["+l+"] cb result type error.")}else"as"===p&&(y=!0)}else u=K}else{var $=fe(t);if(!$)return null;var E=$.currentTarget;u=E.value;var w=E.dataset;if(a="int"===p||void 0!==w.ccint,!(c=w.ccsync))return null;i=w.ccrkey;var b=w.ccdelay;if(b)try{d=parseInt(b)}catch(e){}}return{currentTarget:{value:u,extraState:s,noAutoExtract:y,dataset:{ccsync:c,ccint:a,ccdelay:d,ccrkey:i}},isToggleBool:f}};var to=function(e,t,n,r,o){var a=t;!0!==n||Number.isNaN(a=parseInt(t))&&(De(t+" can not convert to int but you set ccint as true!！"),a=t);var c=null,i=[];if(e.includes("/")){var u=e.split("/"),s=u[1];c=u[0],i=s.includes(".")?s.split("."):[s]}else i=e.includes(".")?e.split("."):[e];if(1===i.length){var d,f,l=i[0];return!0!==o?{module:c,state:(d={},d[l]=a,d)}:{module:c,state:(f={},f[l]=!r[l],f)}}var p,y=i[0],_=i.slice(1),v=r[y];return function e(t,n,r,o,a,c){void 0===c&&(c=!1);var i=n[o];if(r===o)if(!0===c){var u=t[i];"boolean"!=typeof u?De("key["+i+"]'s value type is not boolean"):t[i]=!u}else t[i]=a;else e(t[i],n,r,++o,a,c)}(v,_,_.length-1,0,a,o),{module:c,state:(p={},p[y]=v,p)}},no=bt.store.getState;function ro(e,t,n){var r=t.ctx,o=r.module,a=eo(e,n,r);if(a){var c=a.currentTarget,i=c.dataset,u=c.value,s=c.extraState,d=c.noAutoExtract;n&&n.stopPropagation&&n.stopPropagation();var f=i.ccint,l=i.ccdelay,p=i.ccrkey,y=i.ccsync;if(y.startsWith("/")&&(y=""+o+y),y.includes("/")){var _=y.split("/")[0];At(_,!1);var v={calledBy:C,ccKey:r.ccKey,ccUniqueKey:r.ccUniqueKey,module:_,renderKey:p,delay:l};if(d)return void(s&&rr(s,v,t));var m=_!==o?no(_):t.state;rr(to(y,u,f,m,a.isToggleBool).state,v,t)}else{if(d)return void(s&&t.setState(s,null,p,l));var h=to(y,u,f,t.state,a.isToggleBool);t.setState(h.state,null,p,l)}}}var oo=bt.reducer,ao=oo._module_fnNames_,co=oo._caller,io=bt.refStore,uo=bt.ccClassKey_ccClassContext_,so=bt.moduleName_stateKeys_,fo=bt.store.getState,lo=bt.moduleName_ccClassKeys_,po=de,yo=F,_o=q,vo=J,mo=X,ho=De,Co=L,Ko=function(e){return!(null==e)},go=0;var So=function(){},$o=function(e){return"type of defineEffect "+e+" param must be"},Eo=function(e){return"-"===e.watchedKeys?po(e.__$$renderStatus===E?e.__$$compareWaKeys:e.__$$curWaKeys):e.watchedKeys},wo=function(t,e){function n(e){return po(t.__$$renderStatus===E?t.__$$compareConnWaKeys[e]:t.__$$curConnWaKeys[e])}function r(e){if(c)return n(e);var t=o[e];return"*"===t?so[e]:"-"===t?n(e):t}var o=t.connect,a=t.connectedModules,c=Array.isArray(o);if(e)return r(e);var i={};return a.forEach(function(e){i[e]=r(e)}),i};function bo(t,n,e){("*"===e?so[n]:e).forEach(function(e){return function(e,t,n){m(_,j(e,t),n)}(n,e,t)})}function xo(d,e,t){void 0===t&&(t=5);var n=e.isSingle,r=e.ccClassKey,o=e.ccKey,a=void 0===o?"":o,c=e.module,i=e.type,u=e.insType,s=e.state,f=e.storedKeys,l=void 0===f?[]:f,p=e.persistStoredKeys,y=void 0!==p&&p,_=e.watchedKeys,v=void 0===_?"-":_,m=e.connect,h=void 0===m?{}:m,C=e.tag,K=void 0===C?"":C,g=e.ccOption,S=void 0===g?{}:g,$=c,E=d.ctx,w=Co(E),b=so[$],x=d.setState,O=d.forceUpdate;!w&&E.ccUniqueKey?(x=E.__boundSetState,O=E.__boundForceUpdate):i!==he&&(x=d.setState.bind(d),O=d.forceUpdate.bind(d));var U={};U.persistStoredKeys=void 0===S.persistStoredKeys?y:S.persistStoredKeys,U.tag=S.tag||K;var D=function(e,t,n,r){var o;if(e)n&&Xr("now the ccClass is singleton, you needn't supply ccKey to instance props, cc will ignore the ccKey["+n+"]"),o=t;else if(n)o=Jr(t,n);else{var a=Yt(r);o=Jr(t,a)}return o}(n,r,a,U.tag);if(U.renderKey=S.renderKey||D,U.storedKeys=function(e,t,n,r){var o=n||r;return o?"*"===o?Object.keys(e).filter(function(e){return!t.includes(e)}):(Mt(t,o),o):[]}(s,b,S.storedKeys,l),a&&!r)throw Error("missing ccClassKey while init a cc ins with ccKey["+a+"]");if(0<U.storedKeys.length&&!a)throw yo(be.CC_STORED_KEYS_NEED_CCKEY,_o("ccClassKey["+r+"]"));var N=fo(c),I=io._state[D]||{},A=Object.assign({},s,I,N),M=po(d.state=A),T=uo[r].connectedState,R=po(h),W={},k={};R.forEach(function(e){k[e]=tt(d,e,!1)});var j=tt(d,c),P=k[me],L=Yr(d,fo(me),me,!1),F=Ne(po(s),b),V=Yr(d,N,c,!0);c===me&&De("belong to $$global is not good.");var z=vo(lo,c);z.includes(r)||z.push(r);function q(e,t){rr(e,t,d)}function H(e,t,n,r,o,a){q(t,{calledBy:n,module:e,renderKey:o,delay:a,reactCallback:r})}function B(e,t,n,r,o){H(e,t,ge,n,r,o)}function G(e,t,n,r,o){var a=typeof e;if("string"==a)B(e,t,n,r,o);else if("function"==a){var c=e(Object.assign({},ne.unProxyState),ne.props);H($,c,Ke,t,n,r)}else H($,e,Ke,t,n,r)}function Y(e,t,n){H($,d.state,Se,e,t,n)}var X=[],J=[],Z={effectItems:X,eid_effectReturnCb_:{},effectPropsItems:J,eid_effectPropsReturnCb_:{}},Q={},ee=Zr(d.props),te=Date.now(),ne={type:i,insType:u,isSingle:n,module:c,ccClassKey:r,ccKey:a,ccUniqueKey:D,renderCount:1,initTime:te,watchedKeys:v,privStateKeys:F,connect:h,connectedModules:R,__$$onEvents:[],__$$hasModuleState:0<b.length,__$$renderStatus:xe,__$$curWaKeys:{},__$$compareWaKeys:{},__$$compareWaKeyCount:0,__$$nextCompareWaKeys:{},__$$nextCompareWaKeyCount:0,__$$curConnWaKeys:{},__$$compareConnWaKeys:{},__$$compareConnWaKeyCount:{},__$$nextCompareConnWaKeys:{},__$$nextCompareConnWaKeyCount:{},__$$staticWaKeys:{},__$$staticWaKeyList:[],persistStoredKeys:U.persistStoredKeys,storedKeys:U.storedKeys,renderKey:U.renderKey,tag:U.tag,prevProps:ee,props:ee,mapped:{},prevState:A,state:A,unProxyState:A,moduleState:V,mstate:N,globalState:L,connectedState:W,extra:{},staticExtra:{},refComputed:{},refComputedValue:{},refComputedOri:{},moduleComputed:j,globalComputed:P,connectedComputed:k,moduleReducer:{},connectedReducer:{},reducer:{},stateKeys:M,computedDep:{},computedRetKeyFns:{},watchDep:{},watchRetKeyFns:{},execute:null,effectMeta:Z,retKey_fnUid_:{},reactSetState:So,__boundSetState:x,reactForceUpdate:So,__boundForceUpdate:O,setState:G,setModuleState:B,forceUpdate:Y,changeState:q,refs:Q,useRef:function(t){return function(e){return Q[t]={current:e}}},__$$ccSetState:Sr(d),__$$ccForceUpdate:$r(d),__$$settedList:[],__$$prevMoStateVer:{},__$$prevModuleVer:{},__$$cuOrWaCalled:!1};d.setState=G,d.forceUpdate=Y,ne.initState=function(e){if(d.__$$isMounted)return ho("initState can only been called before first render period!");if(!Ue(s))return ho("state "+Oe);if(ne.__$$cuOrWaCalled)return ho("initState must been called before computed or watch");var t=Object.assign({},s,e,I,N);ne.stateKeys=po(t),ne.privStateKeys=Ne(po(t),b),ne.unProxyState=ne.prevState=ne.state=d.state=t};var re=br(d,!1,!1,$);if(ne.dispatch=re,1<t&&(ne.lazyDispatch=br(d,!0,!1,$),ne.silentDispatch=br(d,!1,!0,$),ne.dispatchLazy=ne.lazyDispatch,ne.dispatchSilent=ne.silentDispatch,ne.invoke=Er(d),ne.lazyInvoke=Er(d,{isLazy:!0}),ne.silentInvoke=Er(d,{isLazy:!1,isSilent:!0}),ne.invokeLazy=ne.lazyInvoke,ne.invokeSilent=ne.silentInvoke,ne.setGlobalState=function(e,t,n,r){H(me,e,Ke,t,n,r)}),2<t){var oe={},ae=function(e,t,n,r,o){if("string"==typeof e){var a,c=typeof t;if(!Ko(t)||"object"!=c&&"function"!=c){var i,u=e+"|"+t+"|"+n+"|"+r,s=oe[u];if(!s)s=oe[u]=ro.bind(null,((i={})[Ce]=e,i.type=o,i.val=t,i.delay=r,i.rkey=n,i),d);return s}return ro.bind(null,((a={})[Ce]=e,a.type=o,a.val=t,a.delay=r,a.rkey=n,a),d)}ro({type:"val"},d,e)};ne.sync=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ae(e,t,n,r,"val")},ne.syncBool=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ae(e,t,n,r,"bool")},ne.syncInt=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ae(e,t,n,r,"int")},ne.syncAs=function(e,t,n,r){return void 0===n&&(n=""),void 0===r&&(r=-1),ae(e,t,n,r,"as")},ne.set=function(e,t,n,r){var o;void 0===n&&(n=""),void 0===r&&(r=-1),ro(((o={})[Ce]=e,o.type="val",o.val=t,o.delay=r,o.rkey=n,o),d)},ne.setBool=function(e,t,n){var r;void 0===t&&(t=""),void 0===n&&(n=-1),ro(((r={})[Ce]=e,r.type="bool",r.delay=n,r.rkey=t,r),d)}}if(3<t&&(ne.emit=function(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];zr.apply(Gr,[Br(e)].concat(n))},ne.off=function(e,t){var n=void 0===t?{}:t,r=n.module,o=n.ccClassKey,a=n.ccUniqueKey,c=void 0===a?D:a,i=Br(e);qr(i.name,{module:r,ccClassKey:o,ccUniqueKey:c,identity:i.identity})},ne.on=function(e,t){var n=Br(e);Vr($,r,D,n.name,n.identity,t)}),4<t){ne.execute=function(e){return ne.execute=e},ne.watch=function(o){return function(e,t,n){var r={type:we,refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.watchRetKeyFns,module:o.module,connect:o.connect,dep:o.watchDep};o.__$$cuOrWaCalled=!0,Qt($e,r,e,t,n)}}(ne),ne.computed=function(o){return function(e,t,n){var r={type:Ee,refCtx:o,stateKeys:o.stateKeys,retKeyFns:o.computedRetKeyFns,module:o.module,connect:o.connect,dep:o.computedDep};o.__$$cuOrWaCalled=!0,Qt($e,r,e,t,n)}}(ne);var ce=function(u,s){return function(e,t,n,r){if(void 0===n&&(n=!0),void 0===r&&(r=!0),"function"!=typeof e)throw Error($o("first")+" function");var o=t,a=s?n:r;if(null!=t&&!Array.isArray(t))throw Error($o("second")+" one of them(array, null, undefined)");var c=null;!s&&o&&(c=[],o.forEach(function(e){var t;if(e.includes("/")){var n=(t=e).split("/");if(!ne.connect[n[0]])throw yo(be.CC_MODULE_NOT_CONNECTED,_o("depKey["+e+"]"))}else t=$+"/"+e;c.push(t),ne.__$$staticWaKeys[t]=1}));var i={fn:e,isProp:s,depKeys:o,modDepKeys:c,eId:Symbol("__autoGen_"+ ++go+"__"),compare:n,immediate:a};u.push(i)}};ne.effect=ce(X,!1),ne.effectProps=ce(J,!0)}var ie=ne.moduleReducer,ue=ne.connectedReducer,se=ne.__$$curConnWaKeys,de=ne.__$$compareConnWaKeys,fe=ne.__$$compareConnWaKeyCount,le=ne.__$$nextCompareConnWaKeys,pe=ne.__$$nextCompareConnWaKeyCount,ye=R.slice();ye.includes(c)?ho("["+D+"]'s module["+c+"] is in belongTo and connect both, it will cause redundant render."):ye.push(c);var _e=!1;if(ye.forEach(function(o){var e;e=o===c?ie:mo(ue,o);var t=h[o];if(t){var n=T[o];"-"===t?(_e=!0,se[o]={},de[o]={},fe[o]=0,le[o]={},pe[o]=0,n=o===me?ne.globalState:Yr(d,n,o)):bo(D,o,t),W[o]=n}(ao[o]||[]).forEach(function(r){e[r]=function(e,t,n){return re(o+"/"+r,e,t,n)}})}),ne.reducer=co,ne.mr=ne.moduleReducer,ne.cr=ne.connectedReducer,ne.r=ne.reducer,"-"===v?_e=!0:bo(D,c,v),ne.__$$autoWatch=_e,ne.getWatchedKeys=function(){return Eo(d.ctx||ne)},ne.getConnectWatchedKeys=function(e){return wo(d.ctx||ne,e)},w)d.ctx=ne;else{var ve=d.ctx;Object.assign(d.ctx,ne,{__$$curWaKeys:ve.__$$curWaKeys,__$$compareWaKeys:ve.__$$compareWaKeys,__$$compareWaKeyCount:ve.__$$compareWaKeyCount,__$$nextCompareWaKeys:ve.__$$nextCompareWaKeys,__$$nextCompareWaKeyCount:ve.__$$nextCompareWaKeyCount,__$$curConnWaKeys:ve.__$$curConnWaKeys,__$$compareConnWaKeys:ve.__$$compareConnWaKeys,__$$compareConnWaKeyCount:ve.__$$compareConnWaKeyCount,__$$nextCompareConnWaKeys:ve.__$$nextCompareConnWaKeys,__$$nextCompareConnWaKeyCount:ve.__$$nextCompareConnWaKeyCount})}}var Oo=de,Uo=Ue,Do=bt.store._state,No=Object.prototype.hasOwnProperty;var Io=L,Ao=F,Mo=bt.featureStr_classKey_,To=bt.userClassKey_featureStr_,Ro=bt.ccClassKey_ccClassContext_,Wo=0;var ko=bt.moduleName_stateKeys_,jo=bt.moduleName_ccClassKeys_,Po=bt.moduleSingleClass,Lo=bt.ccClassKey_ccClassContext_,Fo=bt.computed._computedValue,Vo=function(e,t){var n=!1,r=!1;if(!Array.isArray(e))return{duplicate:n,notArray:!0,keyElementNotString:r};if(!Array.isArray(t))return{duplicate:n,notArray:!0,keyElementNotString:r};var o=e.length,a=t.length;e:for(var c=0;c<o;c++){var i=e[c];if("string"!=typeof i){r=!0;break e}for(var u=0;u<a;u++){var s=t[u];if("string"!=typeof s){r=!0;break e}if(s===i){n=!0;break e}}}return{duplicate:n,notArray:!1,keyElementNotString:r}},zo=q;function qo(e,t,n,r,o,a,c,i,u){void 0===e&&(e=Q),void 0===a&&(a=[]),!0===i&&function(){if(!0!==bt.isStartup)throw Error("you must startup cc by call startup method before register ReactClass to cc!")}();var s="cc"===u;At(e,!1,"module["+e+"] is not configured in store"),Mt(ko[e],a);var d=c||{},f=Array.isArray(c);!f&&"string"!=typeof c||(d={},(f?c:c.split(",")).forEach(function(e){d[e]="-"}));e===me||d[me]||(d[me]="-");var l,p=function(e,t,n){if(t===re)return[];if(!n)return[];if("*"===n)return ko[e];var r=Vo(n,[]);if(r.notArray||r.keyElementNotString)throw Error("watchedKeys "+b+" "+zo("ccClassKey:"+t));return n}(e,t,o),y=function(o,e,t,a){if(!Uo(o))throw Error("CcFragment or CcClass's prop connect type error, it "+Oe);function c(e){return i+" module["+e+"]'s value must be * or array of string"}var i="CcFragment or CcClass's prop connect is invalid,",n=Oo(o);n.sort();var u=[],s={};if(n.forEach(function(t){var n=Do[t],r=a+"_"+t+"/";if(void 0===n)throw Error(i+" module["+t+"] not found in cc store ");var e=o[t];if("string"==typeof e){if("*"!==e&&"-"!==e)throw Error(c(t));u.push(r+"*"),Oo(n).forEach(function(e){s[t+"/"+e]=e})}else{if(!Array.isArray(e))throw Error(c(t));e.forEach(function(e){if(!No.call(n,e))throw Error(i+" module["+t+"]'s key["+e+"] not declared in cc store ");r+=e+",",s[t+"/"+e]=e}),u.push(r)}}),u.push("|"),"*"===e)u.push(a+"_$"+t+"/*");else{e.sort();var r=t+"/"+e.join(",");u.push(r)}return{featureStr:u.join("@"),connectedModuleKeyMapping:s,connectedModuleNames:n}}(d,p),_=y.connectedModuleKeyMapping,v=y.connectedModuleNames,m=function(e,t,n,r,o,a,c){if(void 0===c&&(c=""),!c){if(t===Q&&Io(n)&&0===r.length)return o+"0";var i=o+":"+a,u=Mo[i];return u||(Mo[i]=u=""+o+ ++Wo)}if(c.startsWith(h))throw Error("user can not specify a classKey["+c+"] starts with $$Cc");if(!e&&c.toLowerCase()==re.toLowerCase())throw Error(re+" is cc built-in ccClassKey name.");if(Ro[c]){if(To[c]!==a)throw Ao(be.CC_CLASS_KEY_DUPLICATE,"ccClassKey:["+c+"] duplicate")}else To[c]=a;return c}(s,e,d,p,r,y.featureStr,t);if(n){if(!Array.isArray(n)&&"*"!==n)throw Error("renderKeyClasses type err, it is must be an array or string *");l=n}else l=[m];return function(e,t,n,r,o,a,c){var i=Lo[e];i||(i=function(e,t,n,r,o){return{module:e,ccClassKey:t,renderKeyClasses:n,originalWatchedKeys:o,watchedKeys:r,ccKeys:[],connectedState:{},connectedModuleKeyMapping:null,connectedModule:{}}}(n,e,t,o,r),Lo[e]=i);var u={},s={};if(a){var d=bt.store._state,f=i.connectedState;c.forEach(function(e){f[e]=d[e],s[e]=Fo[e],u[e]=1}),i.connectedModuleKeyMapping=a,i.connectedModule=u,i.connectedComputed=s}}(m,l,e,o,p,_,v),function(e,t){var n=J(jo,e);if(!0===Po[e]&&1<=n.length)throw Error("module["+e+"] is declared as single, only on ccClassKey can been registered to it, and now a ccClassKey["+n[0]+"] has been registered!");n.includes(t)||n.push(t)}(e,m),{_module:e,_connect:d,_watchedKeys:p,_ccClassKey:m}}var Ho=function(){};var Bo=Ue,Go=de;function Yo(e,t){if(!Bo(e))throw Error(t+" "+Oe)}function Xo(e){if(0<e.length){var o=bt.plugins;o.length=0,ln.forEach(function(e){return pn[e].length=0});var a={};e.forEach(function(e){if(o.push(e),!e.install)throw Error("a plugin must export install handler!");var t=e.install(_n),n=Error("plugin.install must return result:{name:string, options?:object}");if(!t)throw n;var r=t.name;if(!r)throw n;if(a[r])throw Error("pluginName["+r+"] duplicate");a[r]=1}),bt.pluginNameMap=a}}var Jo=!1;function Zo(e,r){void 0===e&&(e=!1),ot={},at={},se(bt.event_handlers_),se(bt.ccUKey_handlerKeys_);var o=bt.ccClassKey_ccClassContext_,t=bt.ccUKey_ref_;if(Object.keys(o).forEach(function(e){var t=o[e],n=[];0<r.length&&t.ccKeys.forEach(function(e){r.includes(e)&&n.push(e)}),se(t.ccKeys,n)}),se(bt.handlerKey_handler_),se(t,r),e){var n=bt.computed,a=bt.watch,c=n._computedValue,i=a._watchDep;de(bt.store._state).forEach(function(e){e!==ee&&(c[e]&&(bt.computed._computedDep[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},cn(e,n._computedRaw[e])),i[e]&&(i[e]={retKey_fn_:{},retKey_lazy_:{},stateKey_retKeys_:{},retKey_stateKeys_:{},fnCount:0},fn(e,a._watchRaw[e])))})}}function Qo(){var r=bt.ccUKey_ref_,o=[],a=[];return de(r).forEach(function(e){var t=r[e];if(t&&!0===t.__$$isMounted&&!1===t.__$$isUnmounted){var n=t.ctx.insType;n===O?(o.push(e),a.push(e)):n===f&&a.push(e)}}),{ccFragKeys:o,ccNonCusKeys:a}}function ea(){se(bt.globalStateKeys);var e=de(bt.moduleName_isConfigured_).concat([Q,ee,me,o]);se(bt.reducer._reducer,e),se(bt.store._state,e,{},!0),se(bt.computed._computedDep,e),se(bt.computed._computedValue,e),se(bt.watch._watchDep,e),se(bt.middlewares),se(bt.waKey_uKeyMap_),Le={module:{computed:{},watch:{}},ref:{computed:{},watch:{},effect:{}}};var t=Qo(),n=t.ccFragKeys;return Zo(!1,t.ccNonCusKeys),n}function ta(e){void 0===e&&(e=!1),bt.info.latestStartupTime=Date.now();var t=[];if(bt.isStartup){if(bt.isHotReloadMode()){if(e)return console.warn("attention: make sure [[clearContextIfHot]] been called before app rendered!"),Jo=!0,t=ea();if(Jo)return Jo=!1,t;var n=Qo();return Zo(bt.reComputed,n.ccNonCusKeys),n.ccFragKeys}return console.warn("clear failed because of not running under hot reload mode!"),t}return Jo=!0,t}var na=bt.moduleName_stateKeys_,ra=bt.store,oa=ra.getPrevState,aa=ra.getState,ca=ra.getStateVer,ia=function(e,t){return De("effect: key["+e+"] is invalid, its "+t+" has not been declared in' store!")};function ua(e,t){function n(a,c,i){return function(e){var t=e.fn,n=e.eId;if(!i||!1!==e.immediate){var r=a[n];r&&r(u);var o=t(u,c);a[n]=o}}}var u=e.ctx,r=u.effectMeta,o=r.effectItems,a=r.eid_effectReturnCb_,c=r.effectPropsItems,i=r.eid_effectPropsReturnCb_,m=u.__$$prevMoStateVer,h=u.__$$settedList,C=u.module;if(t)o.forEach(n(a,!0,!0)),c.forEach(n(i,!0,!0));else{var K=u.prevState,g=u.unProxyState,S=[];o.forEach(function(e){var t=e.modDepKeys,n=e.compare,r=e.fn,o=e.eId;if(t){var a=t.length;if(0===a)return;for(var c=function(e){return e.reduce(function(t,e){var n=e.module;return e.keys.forEach(function(e){return t[n+"/"+e]=1}),t},{})}(h),i=!1,u=0;u<a;u++){var s=t[u];if(n){var d=void 0,f=void 0,l=s.split("/"),p=l[0],y=l[1];if(p!==C){var _=oa(p),v=ca(p);if(m[y]===v[y])continue;if(m[y]=v[y],!_){ia(s,"module["+p+"]");continue}if(!na[p].includes(y)){ia(s,"unmoduledKey["+y+"]");continue}d=aa(p),f=_}else d=g,f=K;if(f[y]!==d[y]){i=!0;break}}else if(c[s]){i=!0;break}}i&&S.push({fn:r,eId:o})}else S.push({fn:r,eId:o})}),S.forEach(n(a,!1,!1));var s=u.prevProps,d=u.props,f=[];c.forEach(function(e){var t=e.depKeys,n=e.fn,r=e.eId;if(t){var o=t.length;if(0===o)return;for(var a=!1,c=0;c<o;c++){var i=t[c];if(s[i]!==d[i]){a=!0;break}}a&&f.push({fn:n,eId:r})}else f.push({fn:n,eId:r})}),f.forEach(n(i,!1,!1)),h.length=0}}var sa=De,da=F,fa=q,la=B,pa=H,ya=bt.runtimeVar,_a=bt.ccClassKey_ccClassContext_,va=bt.ccUKey_ref_,ma={};function ha(e,t,n,r){function o(){va[e]=t,n.push(e)}!function(e){void 0===ma[e]?ma[e]=1:ma[e]+=1}(e),r?setTimeout(o,r):o()}function Ca(e,t,n,r,o){var a=_a[n],c=a.ccKeys;ya.isDebug&&console.log(la("register ccKey "+o+" to CC_CONTEXT"),pa());var i=bt.isHotReloadMode();if(c.includes(o)){var u=function(){throw da(be.CC_CLASS_INSTANCE_KEY_DUPLICATE,fa("ccClass:"+n+",ccKey:"+o))};if(i){var s=function(e){return void 0===ma[e]?0:ma[e]}(o);if(t&&0<s)throw da(be.CC_CLASS_INSTANCE_MORE_THAN_ONE,fa("ccClass:"+n));1<s&&u(),sa("\n        found ccKey["+r+"] duplicated in hot reload mode, please make sure your ccKey is unique manually,\n        "+fa("ccClassKey:"+n+" ccKey:"+r+" ccUniqueKey:"+o)+"\n      "),ha(o,e,c,600)}else u()}else ha(o,e,c);return a}function Ka(t,e,n,r){var o=!1,a=de(t);a.forEach(function(e){2===t[e]&&(o=!0,S(n,e,r))}),e<a.length&&(o=!0),o&&kt(n)}function ga(e){var t=e.ctx;if(t.__$$renderStatus=xe,t.__$$autoWatch){var n=t.connectedModules,r=t.connect,o=t.ccUniqueKey,a=t.__$$compareConnWaKeys,c=t.__$$compareConnWaKeyCount;Ka(t.__$$compareWaKeys,t.__$$compareWaKeyCount,t.module,o),n.forEach(function(e){"-"===r[e]&&Ka(a[e],c[e],e,o)})}}function Sa(e){ga(e),e.__$$isMounted=!0,e.__$$isUnmounted=!1;var t=e.ctx,n=t.ccUniqueKey,r=t.__$$onEvents,o=t.__$$staticWaKeys;Ca(e,t.isSingle,t.ccClassKey,t.ccKey,n);var a=de(o);(e.ctx.__$$staticWaKeyList=a).forEach(function(e){return function(e,t){m(v,e,t)}(e,n)}),0<r.length&&(r.forEach(function(e){return e.fn.apply(void 0,e.args)}),r.length=0),ua(e,!0)}var $a=bt.ccUKey_ref_,Ea=bt.ccUKey_handlerKeys_,wa=bt.runtimeVar,ba=bt.ccClassKey_ccClassContext_,xa=bt.handlerKey_handler_;function Oa(e,t){wa.isDebug&&console.log(B(t+" unset ref"),H("purple")),delete $a[t];var n=ba[e].ccKeys,r=n.indexOf(t);r<0||n.splice(r,1),function(e){void 0===ma[e]?ma[e]=0:ma[e]-=1}(t);var o=Ea[t];o&&o.forEach(function(e){delete xa[e]})}var Ua=de;function Da(n,r){function e(e){var t=n[e];"function"==typeof t&&t(r)}Object.getOwnPropertySymbols(n).forEach(e),Ua(n).forEach(e)}function Na(e){e.__$$isUnmounted=!0;var t=e.ctx,n=t.ccUniqueKey,r=t.ccClassKey,o=t.module,a=t.__$$staticWaKeyList;if(e.__$$isMounted){var c=t.effectMeta,i=c.eid_effectPropsReturnCb_;Da(c.eid_effectReturnCb_,t),Da(i,t),Hr(n)}t.getWatchedKeys().forEach(function(e){return S(o,e,n)});var u=t.getConnectWatchedKeys();de(u).map(function(t){u[t].forEach(function(e){return S(t,e,n)})}),a.forEach(function(e){return function(e,t){try{delete v[e][t]}catch(e){}}(e,n)}),Oa(r,n)}var Ia=bt.store.getState;var Aa=de,Ma=bt.runtimeVar;function Ta(n,e,t){var r=n.ctx;if(n.__$$isUnmounted=!1,r.__$$inBM=!(n.__$$isMounted=!1),e){if("function"!=typeof e)throw Error("type of setup must be function");var o=e(r)||{};if(!Ue(o))throw Error("type of setup return result must be an plain json object");(!0===t||!0===Ma.bindCtxToMethod&&!1!==t)&&Aa(o).forEach(function(e){var t=o[e];"function"==typeof t&&(o[e]=t.bind(n,r))}),r.settings=o}r.refComputedValue=on(r.computedRetKeyFns,r.refComputedOri),r.refComputed=tt(n,null,!0,!0),function(o){function e(r){r(o,c,i,i,u,!0),a.forEach(function(e){var t=Ia(e),n=Te(e);r(o,e,t,t,n,!0)})}var t=o.ctx,n=t.hasComputedFn,r=t.hasWatchFn,a=t.connectedModules,c=t.module,i=t.state,u=Te(c);n&&e(Dn),r&&e(Un)}(n),r.__$$inBM=!1}var Ra=_e,Wa=Re;function ka(e){var t=e.props,n=Ra(t.register),r=n.module,o=n.renderKeyClasses,a=n.tag,c=n.lite,i=n.compareProps,u=void 0===i||i,s=n.setup,d=n.bindCtxToMethod,f=n.watchedKeys,l=void 0===f?"-":f,p=n.connect,y=void 0===p?{}:p,_=n.isSingle,v=n.storedKeys,m=void 0===v?[]:v,h=Wa(n.state),C=t.ccClassKey,K=t.ccKey,g=t.ccOption,S=void 0===g?{}:g,$=l,E=C,w=y,b=A;if(!0!==t.__$$regDumb){b=O;var x=qo(r,C,o,ne,ke(l),m,y,!0);$=l,E=x._ccClassKey,w=x._connect}xo(e,{isSingle:_,ccKey:K,connect:w,state:h,module:r,type:ne,insType:b,storedKeys:m,watchedKeys:$,tag:a,ccClassKey:E,ccOption:S},c),e.ctx.reactSetState=Or(e),e.ctx.reactForceUpdate=Ur(e),e.__$$compareProps=u,Ta(e,s,d)}var ja=Y,Pa=le,La="";function Fa(e,t){var n=void 0===e?{}:e,r=n.store,o=void 0===r?{}:r,a=n.reducer,c=void 0===a?{}:a,i=n.init,u=void 0===i?null:i,s=n.initPost,d=void 0===s?{}:s,f=n.computed,l=void 0===f?{}:f,p=n.watch,y=void 0===p?{}:p,_=n.moduleSingleClass,v=void 0===_?{}:_,m=void 0===t?{}:t,h=m.plugins,C=void 0===h?[]:h,K=m.middlewares,g=void 0===K?[]:K,S=m.isStrict,$=void 0!==S&&S,E=m.isDebug,w=void 0!==E&&E,b=m.errorHandler,x=void 0===b?null:b,O=m.isHot,U=m.bindCtxToMethod,D=void 0!==U&&U,N=m.computedCompare,I=void 0===N||N,A=m.watchCompare,M=void 0===A||A,T=m.watchImmediate,R=void 0!==T&&T,W=m.reComputed,k=void 0===W||W,j=m.extractModuleChangedState,P=void 0===j||j,L=m.extractRefChangedState,F=void 0!==L&&L,V=m.objectValueCompare,z=void 0!==V&&V,q=m.nonObjectValueCompare,H=void 0===q||q,B=m.localStorage,G=void 0===B?null:B;try{throw Error()}catch(e){var Y=function(e){function t(e,t){for(var n=0;n<o;n++)if(r[n].includes(e)){a=r[n+t];break}}var n=bt.info,r=e.stack.split("\n"),o=r.length,a="";function c(){return ta(bt.isHot=!0)}t("startup",2),a||t("runConcent",0);var i=Date.now(),u=[],s=!0;if(La)if(La!==a){var d="invalid run api call!(it can only be called once, changing 'call run' line location in HMR will cause this error also, \n    try refresh browser to reload your app to avoid this tip)";if(i-n.latestStartupTime<1e3)throw Error(d);Me()?(u=c(),La=a):(oe(d),s=!1)}else u=c();else La=a,n.firstStartupTime=i,n.latestStartupTime=i;return{canStartup:s,ccFragKeys:u}}(e),X=Y.ccFragKeys;if(!Y.canStartup)return;try{console.log("%c window.name:"+window.name,"color:green;border:1px solid green"),ja("cc version "+bt.info.version),void 0!==O&&(bt.isHot=O),bt.reComputed=k,bt.errorHandler=x;var J=bt.runtimeVar;J.isStrict=$,J.isDebug=w,J.computedCompare=I,J.watchCompare=M,J.watchImmediate=R,J.extractModuleChangedState=P,J.extractRefChangedState=F,J.objectValueCompare=z,J.nonObjectValueCompare=H,J.bindCtxToMethod=D,G?bt.localStorage=G:window&&window.localStorage&&(bt.localStorage=window.localStorage),bt.recoverRefState(),function(){var e=re;qo(Q,e,"",ne,[],[],[],!1,"cc");var t={setState:Ho,forceUpdate:Ho};xo(t,{module:Q,ccClassKey:e,state:{}}),bt.permanentDispatcher=t}(),function(e){if(!Bo(e))throw Error("StartupOption.moduleSingleClass "+Oe);ce(bt.moduleSingleClass,e)}(v),function(e){Yo(e,"state"),delete e[te],delete e[ee],void 0===e[me]&&(e[me]={}),void 0===e[Q]&&(e[Q]={});for(var t=Go(e),n=t.length,r=0;r<n;r++){var o=t[r];jt(o,e[o])}}(o),function(t){Yo(t,"reducer"),void 0===t[Q]&&(t[Q]={}),void 0===t[me]&&(t[me]={}),Go(t).forEach(function(e){return Ht(e,t[e])})}(c),function(t){Yo(t,"computed"),Go(t).forEach(function(e){return cn(e,t[e])})}(l),function(t){Yo(t,"watch"),Object.keys(t).forEach(function(e){return fn(e,t[e])})}(y),function(n,r){if(n){if(!Bo(n))throw Error("init "+Oe);Go(n).forEach(function(t){At(t,!1);var e=n[t];e&&Promise.resolve().then(e).then(function(e){xr(t,r[t])(e)})}),bt.init._init=n}}(u,d),function(e){if(0<e.length){var t=bt.middlewares;t.length=0,e.forEach(function(e){return t.push(e)})}}(g);var Z=function(e){Pa("CC_CONTEXT",bt,e),Pa("ccc",bt,e),Pa("cccc",bt.computed._computedValue,e),Pa("sss",bt.store._state,e)};window.mcc?setTimeout(function(){Z(window.mcc[Ie()])},1200):Z(),bt.isStartup=!0,Xo(C),X.forEach(function(e){var t=bt.ccUKey_ref_[e];Na(t),ka(t),Sa(t)})}catch(e){if(!x)throw e;x(e)}}}function Va(e){throw Error("[[run]]: param error, "+e+" "+Oe)}var za=Ue,qa=de,Ha=L,Ba=Re;function Ga(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ya(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function Xa(e){ga(e),ua(e),e.ctx.prevState=e.state}var Ja=bt.store;function Za(e){var t=e.ctx;if(t.__$$renderStatus=E,t.__$$autoWatch){if(t.__$$hasModuleState){var n=t.__$$prevModuleVer,r=t.module,o=Ja.getModuleVer(r);n[r]!==o&&(n[r]=o,Object.assign(t.unProxyState,t.mstate)),e.state=Yr(e,t.unProxyState,r,!0),t.state=e.state,t.__$$curWaKeys={},t.__$$compareWaKeys=t.__$$nextCompareWaKeys,t.__$$compareWaKeyCount=t.__$$nextCompareWaKeyCount,t.__$$nextCompareWaKeys={},t.__$$nextCompareWaKeyCount=0}var a=t.connect;t.connectedModules.forEach(function(e){"-"===a[e]&&(t.__$$curConnWaKeys[e]={},t.__$$compareConnWaKeys[e]=t.__$$nextCompareConnWaKeys[e],t.__$$compareConnWaKeyCount[e]=t.__$$nextCompareConnWaKeyCount[e],t.__$$nextCompareConnWaKeys[e]={},t.__$$nextCompareConnWaKeyCount[e]=0)})}t.renderCount+=1}var Qa=function(e){return"CC("+e+")"},ec=ke,tc=pe,nc=Re,rc=bt.runtimeVar,oc=H,ac=B,cc=function(e){return Error("can not defined setup both in register options and class body --verbose:"+e)};function ic(e,t){var n=_e(e);return delete n.__checkStartUp,delete n.__calledBy,function(e,t){var n=void 0===e?{}:e,r=n.module,o=void 0===r?Q:r,a=n.state,u=void 0===a?{}:a,c=n.watchedKeys,s=void 0===c?"-":c,i=n.storedKeys,d=void 0===i?[]:i,f=n.setup,l=void 0===f?null:f,p=n.persistStoredKeys,y=n.connect,_=void 0===y?{}:y,v=n.tag,m=n.lite,h=n.isPropsProxy,C=void 0!==h&&h,K=n.isSingle,g=void 0!==K&&K,S=n.renderKeyClasses,$=n.__checkStartUp,E=void 0===$||$,w=n.compareProps,b=void 0===w||w,x=n.__calledBy;void 0===t&&(t="");try{var O=qo(o,t,S,ne,ec(s),d,_,E,x),U=O._module,D=O._ccClassKey,N=O._connect;return function(n){if(n.prototype&&n.prototype.$$attach)throw Error("register a cc class is prohibited!");var e=!1===C?n:I.Component,i=e.$$setup,t=function(c){function e(e,t){var n;n=c.call(this,e,t)||this;try{var r=nc(u),o=Object.assign(n.state||{},r);n.$$attach=n.$$attach.bind(Ga(n));var a=Object.assign({},e,{isSingle:g,module:U,tag:v,state:o,type:ne,insType:A,watchedKeys:s,ccClassKey:D,connect:N,storedKeys:d,persistStoredKeys:p});if(xo(Ga(n),a,m),n.ctx.reactSetState=Or(Ga(n)),n.ctx.reactForceUpdate=Ur(Ga(n)),l&&(n.$$setup||i))throw cc("ccUniqueKey "+n.ctx.ccUniqueKey);C||(n.$$setup&&(n.$$setup=n.$$setup.bind(Ga(n))),Ta(Ga(n),l||n.$$setup||i,!1))}catch(e){vn(e)}return n}Ya(e,c);var t=e.prototype;return t.shouldComponentUpdate=function(e,t){var n=this.ctx.childRef;if(n&&n.shouldComponentUpdate)return n.shouldComponentUpdate(e,t);if(c.prototype.shouldComponentUpdate)return c.prototype.shouldComponentUpdate.call(this,e,t);var r=!!b&&tc(this.props,e);return this.state!==t||r},t.$$attach=function(e){var t=this.ctx;if(((t.childRef=e).ctx=t).reactSetState=e.setState.bind(e),t.reactForceUpdate=e.forceUpdate.bind(e),e.setState=t.setState,e.forceUpdate=t.forceUpdate,t.__$$ccSetState=Sr(e,this),t.__$$ccForceUpdate=$r(e),e.state||(e.state={}),Object.assign(e.state,this.state),Za(e),e.$$setup&&(e.$$setup=e.$$setup.bind(e)),l&&(e.$$setup||i))throw cc("ccUniqueKey "+t.ccUniqueKey);Ta(e,l||e.$$setup||i,!1)},t.componentDidMount=function(){c.prototype.componentDidMount&&c.prototype.componentDidMount.call(this),Sa(this)},t.componentDidUpdate=function(e,t,n){c.prototype.componentDidUpdate&&c.prototype.componentDidUpdate.call(this,e,t,n),Xa(this)},t.componentWillUnmount=function(){c.prototype.componentWillUnmount&&c.prototype.componentWillUnmount.call(this),Na(this)},t.render=function(){return this.ctx.prevProps=this.ctx.props,this.ctx.props=this.props,rc.isDebug&&console.log(ac("@@@ render "+Qa(D)),oc()),!1===C?(Za(this),c.prototype.render.call(this)):I.createElement(n,{ctx:this.ctx,$$attach:this.$$attach})},e}(e);return t.displayName=D===re?"CcDispatcher":Qa(D),t}}catch(e){vn(e)}}(n,t)}var uc=pe,sc=I.createElement("span",{style:{display:"none"}}),dc=function(r){function e(e,t){var n;return ka(Ga(n=r.call(this,e,t)||this)),n}Ya(e,r);var t=e.prototype;return t.componentDidMount=function(){Sa(this)},t.shouldComponentUpdate=function(e,t){var n=!!this.__$$compareProps&&uc(Zr(e),Zr(this.props));return this.state!==t||n},t.componentDidUpdate=function(){Xa(this)},t.componentWillUnmount=function(){r.prototype.componentWillUnmount&&r.prototype.componentWillUnmount.call(this),Na(this)},t.render=function(){var e=this.props;this.ctx.prevProps=this.ctx.props,this.ctx.props=Zr(e);var t=e.render,n=t||e.children;if("function"==typeof n){Za(this);var r=e.register,o=void 0===r?{}:r,a=this.ctx;return!0!==e.__$$regDumb&&o.mapProps?(a.mapped=o.mapProps(a)||{},n(a.mapped)||sc):n(a)||sc}if(I.isValidElement(n))throw Error("CcFragment's children can not b a react dom ");return n},e}(I.Component);function fc(e,t){var n=_e(e),r=n.renderKeyClasses,o=n.module,a=n.watchedKeys,c=void 0===a?"-":a,i=n.storedKeys,u=n.render,s=n.connect,d=void 0===s?{}:s,f=ke(c),l=qo(o,t,r,O,f,i,d,!0),p=l._ccClassKey,y=l._connect;function _(t){return function(e){return n.props=e,function(t,e){var n=e.mapProps,r=e.props,o=void 0===r?{}:r,a={__$$regDumb:!0,props:o,ccOption:o.ccOption,ccClassKey:e.ccClassKey,render:function(e){return n?(e.mapped=n(e),I.createElement(t,e.mapped)):I.createElement(t,e)},ccKey:o.ccKey,register:e};return I.createElement(dc,a)}(t,n)}}return n.module=l._module,n.watchedKeys=c,n.ccClassKey=p,n.connect=y,u?_(u):function(e){return _(e)}}var lc=bt.ccUKey_ref_,pc=1;function yc(e,t,n){this.setState=t,this.forceUpdate=t,this.state=e,this.isFirstRendered=!0,this.props=n}function _c(e,t,n,r,o,a,c,i,u,s,d){var f=r||Re(o),l=a.bindCtxToMethod,p=a.watchedKeys,y=void 0===p?"-":p,_=a.storedKeys,v=void 0===_?[]:_,m=a.connect,h=void 0===m?{}:m,C=a.setup,K=a.lite;pc+=1;var g=qo(a.module,d,a.renderKeyClasses,he,ke(y),v,h,!0),S=g._module,$=g._ccClassKey,E=g._connect,w=e||new yc(c,i,u),b=Object.assign({},a,{module:S,watchedKeys:y,state:f,type:he,insType:t,ccClassKey:$,connect:E,ccOption:u.ccOption});w.props=u,xo(w,b,K),w.ctx.reactSetState=Or(w),w.ctx.reactForceUpdate=Ur(w);var x=w.ctx;return x.props=u,x.extra=s,Ta(w,C,l),n.prevCcUKey=n.ccUKey,n.ccUKey=w.ctx.ccUniqueKey,x.useRef=function(e){var t=I.useRef(null);return x.refs[e]=t},w}function vc(e){return e?Array.isArray(e)?e.join(","):"object"==typeof e?JSON.stringify(e):e:""}var mc="react version is LTE 16.8",hc=function(e,t){return e.module!==t.module||vc(e.connect)!==vc(t.connect)};function Cc(e,t,n){void 0===e&&(e={});var r=I.useRef({prevCcUKey:null,ccUKey:null,regOpt:e}).current,o=_e(e),a=o.state,c=void 0===a?{}:a,i=o.props,u=void 0===i?{}:i,s=o.mapProps,d=o.layoutEffect,f=void 0!==d&&d,l=o.extra,p=void 0===l?{}:l,y=I.useState;if(!y)throw Error(mc);function _(e){return _c(e,n,r,C,c,o,g,S,u,p,t)}var v,m=pc,h=y(m)[0]===m,C=h?Re(c):0,K=y(C),g=K[0],S=K[1];if(h||hc(r.regOpt,e))r.regOpt=e,v=_();else if(v=lc[r.ccUKey]){var $=v.ctx;$.prevProps=$.props,v.props=$.props=u,$.extra=p}else v=_();var E=v.ctx,w=f?I.useLayoutEffect:I.useEffect;if(w(function(){return function(){var e=lc[r.prevCcUKey||r.ccUKey];e&&(r.prevCcUKey=null,Na(e))}},[v]),w(function(){!function(e,t){e.__boundSetState=t,e.__boundForceUpdate=t}(E,S),v.isFirstRendered?(v.isFirstRendered=!1,Sa(v)):Xa(v)}),Za(v),s){var b=s(E);if(!Ue(b))throw Error("mapProps ret "+Oe);E.mapped=b}return E}function Kc(e,t){return Cc(e,t,A)}function gc(){throw Error("api doc: cc.setState(module:string, state:object, renderKey:string, delayMs?:number, skipMiddleware?:boolean, throwError?:boolean)")}function Sc(e){return bt.store.getState(e)}var $c=bt.store.getGlobalState,Ec=bt.computed._computedValue;var wc=bt.ccUKey_ref_,bc=bt.ccClassKey_ccClassContext_;function xc(){var n=[],r=bt.ccUKey_ref_;return de(r).forEach(function(e){var t=r[e];t&&!t.__$$isUnmounted&&n.push(t)}),n}function Oc(){return"Ob view"}function Uc(e,t,n){var r=void 0===n?{}:n,o=r.state,a=r.reducer,c=r.computed,i=r.watch,u=r.init;if(!bt.isStartup)throw Error("cc is not startup yet");It(e),At(t,!1);var s=bt.moduleName_stateFn_[t];if(!s)throw Error("target module["+t+"] state must be a function when use cloneModule");var d=s();Object.assign(d,Re(o));var f=Ar(bt.reducer._reducer[t]||{},e);a&&Object.assign(f,Ar(a,e));var l=bt.computed._computedRaw[t]||{};c&&Object.assign(l,c);var p=bt.watch._watchRaw[t]||{};i&&Object.assign(p,i);var y=bt.init._init[t];u&&(y=u);var _={state:d,reducer:f,computed:l,watch:p};y&&(_.init=y),Ir(e,_)}function Dc(t,e){function r(e,t){var n=t.state,r=t.reducer,o=void 0===r?{}:r,a=t.watch,c=t.computed,i=t.init,u=t.initPost,s=t.isClassSingle;if(d.store[e])throw Error("run api error: module"+e+" duplicate");d.store[e]=Ba(n),"function"==typeof n&&(bt.moduleName_stateFn_[e]=n),d.reducer[e]=o,a&&(d.watch[e]=a),c&&(d.computed[e]=c),i&&(d.init[e]=i),u&&(d.initPost[e]=u),d.moduleSingleClass[e]=!0===s}void 0===t&&(t={}),void 0===e&&(e={}),za(t)||Va("store"),za(e)||Va("options");var d={store:{},reducer:{},watch:{},computed:{},init:{},initPost:{},moduleSingleClass:{}};qa(t).forEach(function(e){return r(e,t[e])}),xt.forEach(function(e){var t=e.module,n=e.config;Y("configure pending module["+t+"]"),r(t,n)}),xt.length=0,Ha(d.init)&&(d.init=null),Fa(d,e)}function Nc(e,t){return ic({connect:e},t)}function Ic(e,t){return fc({connect:e},t)}function Ac(e,o){var a=_e(e);function t(n){var e=a.memo,t=void 0===e||e;function r(){return function(e){a.props=e;var t=Kc(a,o);return I.createElement(n,a.mapProps?t.mapped:t)}}return delete a.memo,t&&I.memo?I.memo(r()):r()}"function"==typeof a.state&&(a.state=a.state());var n=a.render;return n?t(n):function(e){return t(e)}}function Mc(e,t,n,r,o){void 0===o&&(o=!1);try{Pt().ctx.setGlobalState(e,t,n,r)}catch(e){if(o)throw e;De(e.message)}}function Tc(e,t,n,r,o,a){void 0===r&&(r=-1),void 0===a&&(a=!1),void 0===e&&void 0===t&&gc(),"string"!=typeof e&&gc(),function(e,t,n,r,o){void 0===r&&(r=-1),ar(t,{ccKey:"[[top api:setState]]",module:e,renderKey:n,delay:r,skipMiddleware:o})}(e,t,n,r,o)}function Rc(e,t,n,r){Pt().ctx.set(e,t,n,r)}function Wc(e,t){if(!e.includes("/"))throw Error("keyPath must start with module");var n=e.split("/"),r=Sc(n[0]);return to(e,t,!1,r,!1).state}function kc(e){return Gc[e].connectedState||{}}function jc(e){return e?Ec[e]:Ec}function Pc(e){if(void 0===e)throw Error("api doc: cc.emit(event:string|{name:string, identity?:string, ctx?:boolean}, ...args)");try{for(var t,n=Pt(),r=arguments.length,o=Array(1<r?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];(t=n.ctx).emit.apply(t,[e].concat(o))}catch(e){De(e)}}function Lc(e,t){try{Pt().ctx.off(e,t)}catch(e){if(t.throwError)throw e;De(e.message)}}function Fc(e){for(var t=arguments.length,n=Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(function(e){var n=[],t=bc[e];return t&&t.ccKeys.forEach(function(e){var t=wc[e];t&&n.push(t)}),n})(e).forEach(function(e){var t;e.__$$isUnmounted||e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function Vc(){for(var e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];xc().forEach(function(e){var t;e.ctx.execute&&(t=e.ctx).execute.apply(t,n)})}function zc(e,t){return Pe(e,t)}function qc(e,t){var n=Pe(e,t);return n.lazy=!0,n}function Hc(e){return{fn:function(){return e},depKeys:[]}}function Bc(e,t){return Pe(e,t)}var Gc=bt.ccClassKey_ccClassContext_,Yc=bt.store.appendState,Xc=bt.reducer._caller,Jc=I.memo(function(e){var t=e.module,n=e.connect,r=e.classKey,o=e.render,a=e.children;if(t&&n)throw Error("module, connect can not been supplied both");if(!t&&!n)throw Error("module or connect should been supplied");var c=o||a||Oc,i=t?{module:t}:{connect:n};i.lite=1;var u,s,d=function(e,t){return Cc(e,t,f)}(i,r);return s=t?(u=d.moduleState,d.moduleComputed):(u=d.connectedState,d.connectedComputed),c([u,s,{mr:d.mr,cr:d.cr,r:d.r}])}),Zc=ic,Qc=fc,ei=Ir,ti=Sc,ni=$c,ri=qt,oi=bt,ai=xc,ci=Xc,ii=ta,ui=dc,si=Jc,di=c,fi=Yc,li=Kc,pi={cloneModule:Uc,emit:Pc,off:Lc,connect:Nc,connectDumb:Ic,register:Zc,registerDumb:Qc,registerHookComp:Ac,configure:ei,dispatch:ri,run:Dc,setGlobalState:Mc,setState:Tc,set:Rc,setValue:Wc,getGlobalState:ni,getState:ti,getComputed:jc,getConnectedState:kc,ccContext:oi,execute:Fc,executeAll:Vc,getRefs:ai,reducer:ci,clearContextIfHot:ii,CcFragment:ui,Ob:si,cst:di,appendState:fi,useConcent:li,bindCcToMcc:yi,defComputed:zc,defLazyComputed:qc,defComputedVal:Hc,defWatch:Bc};function yi(e){if(!vi)throw Error("current env is not multi concent ins mode");if(vi[e])throw Error("ccNamespace["+e+"] already existed in window.mcc");!function(e){ve=e}(e),le(e,pi,vi)}function _i(){var e=ve?window.mcc[ve]:window.cc;if(e&&e.ccContext&&e.ccContext.info){var t=e.ccContext.info.version,n=oi.info.version;if(t!==n)throw Error("a existed version concent "+t+" is different with current about to import concent "+n+", \n        it may caused by some of your concent-eco-module with older version concent, please reinstall them (concent-*** module)")}}var vi=window.mcc;vi?setTimeout(function(){if(!Ie())throw Error("detect window.mcc, but user forget call bindCcToMcc in bundle entry");_i()},1e3):(_i(),le("cc",pi)),e.cloneModule=Uc,e.run=Dc,e.connect=Nc,e.connectDumb=Ic,e.register=Zc,e.registerDumb=Qc,e.registerHookComp=Ac,e.configure=ei,e.setGlobalState=Mc,e.setState=Tc,e.set=Rc,e.setValue=Wc,e.getState=ti,e.getGlobalState=ni,e.getConnectedState=kc,e.getComputed=jc,e.emit=Pc,e.off=Lc,e.dispatch=ri,e.ccContext=oi,e.execute=Fc,e.executeAll=Vc,e.getRefs=ai,e.reducer=ci,e.clearContextIfHot=ii,e.CcFragment=ui,e.Ob=si,e.cst=di,e.appendState=fi,e.useConcent=li,e.defComputed=zc,e.defLazyComputed=qc,e.defComputedVal=Hc,e.defWatch=Bc,e.bindCcToMcc=yi,e.default=pi,Object.defineProperty(e,"__esModule",{value:!0})});
