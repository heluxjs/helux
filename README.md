# concent [C_C]
<p align="center">
  <a href="#">
    <img width="500" src="https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/banner.png">
  </a>
</p>

<p>
<a href='https://www.npmjs.com/package/concent' style='margin: 0 0.5rem;'>
<img src='data:image/svg+xml;base64,PHN2ZyBjb250ZW50U2NyaXB0VHlwZT0idGV4dC9lY21hc2NyaXB0IiB3aWR0aD0iMTM2IgogICAg%0D%0AIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB6b29tQW5kUGFuPSJt%0D%0AYWduaWZ5IgogICAgIGNvbnRlbnRTdHlsZVR5cGU9InRleHQvY3NzIiBoZWlnaHQ9IjIwIiBwcmVz%0D%0AZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCBtZWV0IgogICAgIHhtbG5zPSJodHRwOi8vd3d3Lncz%0D%0ALm9yZy8yMDAwL3N2ZyIgdmVyc2lvbj0iMS4wIj4KCgogICAgPGxpbmVhckdyYWRpZW50IHhtbG5z%0D%0AOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4Mj0iMCIgeTI9IjEwMCUiCiAg%0D%0AICAgICAgICAgICAgICAgICAgeGxpbms6dHlwZT0ic2ltcGxlIiB4bGluazphY3R1YXRlPSJvbkxv%0D%0AYWQiIGlkPSJhIgogICAgICAgICAgICAgICAgICAgIHhsaW5rOnNob3c9Im90aGVyIj4KICAgICAg%0D%0AICA8c3RvcCBzdG9wLW9wYWNpdHk9Ii4xIiBzdG9wLWNvbG9yPSIjYmJiIiBvZmZzZXQ9IjAiLz4K%0D%0AICAgICAgICA8c3RvcCBzdG9wLW9wYWNpdHk9Ii4xIiBvZmZzZXQ9IjEiLz4KICAgIDwvbGluZWFy%0D%0AR3JhZGllbnQ+CgogICAgPHJlY3Qgcng9IjMiIGZpbGw9IiM1NTUiIHdpZHRoPSIxMzYiIGhlaWdo%0D%0AdD0iMjAiIGNsYXNzPSJzV2lkdGgiLz4KICAgIDxyZWN0IHJ4PSIzIiBmaWxsPSIjNGMxIiB3aWR0%0D%0AaD0iNDkiIHg9Ijg3IiBoZWlnaHQ9IjIwIiBjbGFzcz0idldpZHRoIHRNb3ZlIi8+CiAgICA8cmVj%0D%0AdCBmaWxsPSIjNGMxIiB4PSI4NyIgd2lkdGg9IjEzIiBoZWlnaHQ9IjIwIiBjbGFzcz0idE1vdmUi%0D%0ALz4KICAgIDxyZWN0IHJ4PSIzIiBmaWxsPSJ1cmwoI2EpIiB3aWR0aD0iMTM2IiBoZWlnaHQ9IjIw%0D%0AIiBjbGFzcz0ic1dpZHRoIi8+CgogICAgPGcgZm9udC1zaXplPSIxMSIgZm9udC1mYW1pbHk9IkRl%0D%0AamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiCiAgICAgICBmaWxsPSIjZmZmIj4K%0D%0AICAgICAgICA8dGV4dCB4PSI2IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIiB5PSIx%0D%0ANSI+CiAgICAgICAgICAgIG5wbSBwYWNrYWdlCiAgICAgICAgPC90ZXh0PgogICAgICAgIDx0ZXh0%0D%0AIHg9IjYiIGlkPSJ0VGV4dCIgeT0iMTQiPgogICAgICAgICAgICBucG0gcGFja2FnZQogICAgICAg%0D%0AIDwvdGV4dD4KICAgICAgICA8dGV4dCBmaWxsPSIjMDEwMTAxIiB4PSI5MiIgZmlsbC1vcGFjaXR5%0D%0APSIuMyIgeT0iMTUiIGNsYXNzPSJ0TW92ZSI+CiAgICAgICAgICAgIDEuMS44MgogICAgICAgIDwv%0D%0AdGV4dD4KICAgICAgICA8dGV4dCB4PSI5MiIgaWQ9InZUZXh0IiB5PSIxNCIgY2xhc3M9InRNb3Zl%0D%0AIj4KICAgICAgICAgICAgMS4xLjgyCiAgICAgICAgPC90ZXh0PgogICAgPC9nPgo8L3N2Zz4=' alt='npm version' height='18'>
</a>

<a href='#' style='margin: 0 0.5rem;'>
  <img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI5MCIgaGVpZ2h0%0D%0APSIyMCI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiB4Mj0iMCIgeTI9IjEwMCUiPjxzdG9wIG9mZnNl%0D%0AdD0iMCIgc3RvcC1jb2xvcj0iI2JiYiIgc3RvcC1vcGFjaXR5PSIuMSIvPjxzdG9wIG9mZnNldD0i%0D%0AMSIgc3RvcC1vcGFjaXR5PSIuMSIvPjwvbGluZWFyR3JhZGllbnQ+PHJlY3Qgcng9IjMiIHdpZHRo%0D%0APSI5MCIgaGVpZ2h0PSIyMCIgZmlsbD0iIzU1NSIvPjxyZWN0IHJ4PSIzIiB4PSIzNyIgd2lkdGg9%0D%0AIjUzIiBoZWlnaHQ9IjIwIiBmaWxsPSIjNGMxIi8+PHBhdGggZmlsbD0iIzRjMSIgZD0iTTM3IDBo%0D%0ANHYyMGgtNHoiLz48cmVjdCByeD0iMyIgd2lkdGg9IjkwIiBoZWlnaHQ9IjIwIiBmaWxsPSJ1cmwo%0D%0AI2EpIi8+PGcgZmlsbD0iI2ZmZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZm9udC1mYW1pbHk9IkRl%0D%0AamFWdSBTYW5zLFZlcmRhbmEsR2VuZXZhLHNhbnMtc2VyaWYiIGZvbnQtc2l6ZT0iMTEiPjx0ZXh0%0D%0AIHg9IjE5LjUiIHk9IjE1IiBmaWxsPSIjMDEwMTAxIiBmaWxsLW9wYWNpdHk9Ii4zIj5idWlsZDwv%0D%0AdGV4dD48dGV4dCB4PSIxOS41IiB5PSIxNCI+YnVpbGQ8L3RleHQ+PHRleHQgeD0iNjIuNSIgeT0i%0D%0AMTUiIGZpbGw9IiMwMTAxMDEiIGZpbGwtb3BhY2l0eT0iLjMiPnBhc3Npbmc8L3RleHQ+PHRleHQg%0D%0AeD0iNjIuNSIgeT0iMTQiPnBhc3Npbmc8L3RleHQ+PC9nPjwvc3ZnPg==' alt='build:passing' height='18'>
</a>

<a href='#' style='margin: 0 0.5rem;'>
<img src='data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRw%0D%0AOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTA4IiBoZWlnaHQ9IjIwIj48bGluZWFy%0D%0AR3JhZGllbnQgaWQ9ImIiIHgyPSIwIiB5Mj0iMTAwJSI+PHN0b3Agb2Zmc2V0PSIwIiBzdG9wLWNv%0D%0AbG9yPSIjYmJiIiBzdG9wLW9wYWNpdHk9Ii4xIi8+PHN0b3Agb2Zmc2V0PSIxIiBzdG9wLW9wYWNp%0D%0AdHk9Ii4xIi8+PC9saW5lYXJHcmFkaWVudD48Y2xpcFBhdGggaWQ9ImEiPjxyZWN0IHdpZHRoPSIx%0D%0AMDgiIGhlaWdodD0iMjAiIHJ4PSIzIiBmaWxsPSIjZmZmIi8+PC9jbGlwUGF0aD48ZyBjbGlwLXBh%0D%0AdGg9InVybCgjYSkiPjxwYXRoIGZpbGw9IiM1NTUiIGQ9Ik0wIDBoNjl2MjBIMHoiLz48cGF0aCBm%0D%0AaWxsPSIjNGMxIiBkPSJNNjkgMGgzOXYyMEg2OXoiLz48cGF0aCBmaWxsPSJ1cmwoI2IpIiBkPSJN%0D%0AMCAwaDEwOHYyMEgweiIvPjwvZz48ZyBmaWxsPSIjZmZmIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBm%0D%0Ab250LWZhbWlseT0iRGVqYVZ1IFNhbnMsVmVyZGFuYSxHZW5ldmEsc2Fucy1zZXJpZiIgZm9udC1z%0D%0AaXplPSIxMTAiPiA8dGV4dCB4PSIzNTUiIHk9IjE1MCIgZmlsbD0iIzAxMDEwMSIgZmlsbC1vcGFj%0D%0AaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjU5MCI+bGljZW5zZTwv%0D%0AdGV4dD48dGV4dCB4PSIzNTUiIHk9IjE0MCIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5n%0D%0AdGg9IjU5MCI+bGljZW5zZTwvdGV4dD48dGV4dCB4PSI4NzUiIHk9IjE1MCIgZmlsbD0iIzAxMDEw%0D%0AMSIgZmlsbC1vcGFjaXR5PSIuMyIgdHJhbnNmb3JtPSJzY2FsZSguMSkiIHRleHRMZW5ndGg9IjI5%0D%0AMCI+TUlUPC90ZXh0Pjx0ZXh0IHg9Ijg3NSIgeT0iMTQwIiB0cmFuc2Zvcm09InNjYWxlKC4xKSIg%0D%0AdGV4dExlbmd0aD0iMjkwIj5NSVQ8L3RleHQ+PC9nPiA8L3N2Zz4=' alt='license:MIT' height='18'>
  </img>
</a>

</p>
## concentæ˜¯ä»€ä¹ˆï¼Œï¼ˆæ³¨ï¼šä»¥ä¸‹æœ‰çš„åœ°æ–¹ç®€ç§°ä¸ºccï¼‰
concentæ˜¯ä¸€ä¸ªä¸“ä¸º`react`æä¾›çŠ¶æ€ç®¡ç†æœåŠ¡çš„æ¡†æ¶ï¼Œé‡æ–°å®šä¹‰`state`å’Œ`component`ä¹‹é—´çš„å…³ç³»ï¼ŒåŒæ—¶ä¹Ÿä¸ºä½ çš„`react`ç»„ä»¶æä¾›æ›´å¤šæœ‰è¶£ä¸”å¼ºå¤§çš„ç‰¹æ€§ï¼Œä¿æŒæ¸²æŸ“æ€§èƒ½æœ€ä¼˜åŒ–ï¼Œè®©ä½ ä¸“æ³¨äºä¸šåŠ¡ä»£ç ç¼–å†™ğŸ˜ï¼Œè®©ä½ çš„`react`å·¥ç¨‹ä»£ç å˜å¾—æ›´åŠ ç®€çº¦ã€ä¼˜é›…ï¼Œå¹¶å®¹æ˜“ç»´æŠ¤ä¸æ‰©å±•ã€‚

## âœ¨concentçš„ç‰¹ç‚¹
* æ ¸å¿ƒapiå°‘ä¸”ç®€å•ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä¸Šæ‰‹å®¹æ˜“ï¼Œå…¥ä¾µå°ï¼Œå®¹æ˜“è°ƒè¯•ï¼›
* æä¾›å…¨å±€æ¨¡å—åŒ–çš„å•ä¸€æ•°æ®æºï¼›
* å…±äº«æ•°æ®å¯ç›´æ¥æ³¨å…¥åˆ°stateï¼Œä¹Ÿå¯æ³¨å…¥propsï¼Œ[ç‚¹æˆ‘æŸ¥çœ‹](https://stackblitz.com/edit/concent-state-inject-way?file=index.js)ã€‚
* ä¿®æ”¹å…±äº«æ•°æ®çš„æ–¹å¼çµæ´»å¤šæ ·ä¸”ç®€å•ç›´æ¥ï¼Œ[ç‚¹æˆ‘æŸ¥çœ‹](https://stackblitz.com/edit/concent-state-modify-way)ï¼›
* å¯¹ç»„ä»¶æ‰©å±•äº†äº‹ä»¶æ€»çº¿ã€computedã€watchã€åŒå‘ç»‘å®šç­‰ç‰¹æ€§ï¼Œ[ç‚¹æˆ‘æŸ¥çœ‹](https://stackblitz.com/edit/concent-vue-like-programming)ï¼›
* å†…ç½®ä¸react16ä¸€æ ·çš„ä½¿ç”¨æ–¹å¼ä½†å´æ›´æœ‰è¶£çš„hookï¼Œ[ç‚¹æˆ‘æŸ¥çœ‹](https://stackblitz.com/edit/concent-hook?file=index.js)ï¼›
* é»˜è®¤é‡‡ç”¨åå‘ç»§æ‰¿åŒ…è£¹ä½ çš„ç»„ä»¶ï¼Œè®©react dom treeå±‚çº§æ›´å°‘ï¼Œä¿æŒå¹²å‡€å’Œæ¸…çˆ½ï¼›
* åŸºäºå¼•ç”¨å®šä½å’ŒçŠ¶æ€å¹¿æ’­ï¼Œæ”¯æŒç»†ç²’åº¦çš„çŠ¶æ€è®¢é˜…ï¼Œæ¸²æŸ“æ•ˆç‡å‡ºä¼—ï¼Œ[ç‚¹æˆ‘æŸ¥çœ‹](https://stackblitz.com/edit/concent-why-it-is-high-performance?file=index.js)ï¼›
* æ”¯æŒä¸­é—´ä»¶ï¼Œå¯ä»¥æ‰©å±•ä½ çš„ä¸ªæ€§åŒ–æ’ä»¶å¤„ç†æ•°æ®å˜æ›´ï¼Œ[ç‚¹æˆ‘æŸ¥çœ‹](https://stackblitz.com/edit/concent-middleware?file=index.js)ï¼›
* æ”¯æŒreact 0.10+ä»»æ„ç‰ˆæœ¬ï¼›
___
## ğŸ“¦ å¿«é€Ÿå¼€å§‹
ç¡®ä¿ä½ æœ¬åœ°æœºå™¨ä¸Šå®‰è£…æœ‰[nodejs](http://nodejs.cn/download/)ã€‚
### åˆ›å»ºä¸€ä¸ªapp
åœ¨ä½ çš„ç”µè„‘ä¸Šï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„ç›®å½•å¹¶è¿›å…¥ï¼Œä½¿ç”¨[create-react-app](https://github.com/facebookincubator/create-react-app) åˆ›å»ºä¸€ä¸ªapp
```sh
$ npm i -g create-react-app
$ create-react-app cc-app
```
### å®‰è£…cc
åˆ›å»ºå¥½appåï¼Œè¿›å…¥ä½ çš„appæ ¹ç›®å½•ï¼Œä½¿ç”¨npmå®‰è£…`concent`
```sh
$ cd cc-app
$ npm i --save concent
```
æˆ–è€…ä½¿ç”¨yarnå®‰è£…
```sh
$ yarn add concent
```
### counterç¤ºä¾‹
å°†ä»¥ä¸‹ä»£ç å¤åˆ¶ç²˜è´´åˆ°`cc-app`ç›®å½•ä¸‹çš„`src/App.js`æ–‡ä»¶é‡Œ(æ³¨ï¼šæ˜¯å®Œå…¨è¦†ç›–æ‰åŸæ¥çš„å†…å®¹)ã€‚
ç„¶åæ‰§è¡Œ`npm start`è¿è¡Œèµ·æ¥ï¼Œåœ¨æµè§ˆå™¨é‡Œå¼€å§‹ä½“éªŒ`cc`çš„ç¥å¥‡æ•ˆæœå§ã€‚
> è¯¥ç¤ºä¾‹ä¸»è¦æ¼”ç¤ºäº†å°†ä¸€ä¸ªæ™®é€šçš„`reactClass`æ³¨å†Œæˆä¸º`ccClass`ï¼Œå¤šä¸ª`ccClass`çš„å®ä¾‹å°†å…±äº«`store`çš„æ•°æ®ã€‚
```javascript
import React, {Component} from 'react';
import { register, startup } from 'concent';

startup({
  store:{
    count:1,
  }
});

class Counter extends Component {
  constructor(props, context) {
    super(props, context);
    this.state = { count: 0 }
  }
  inc = () => this.setState({ count: this.state.count + 1 })
  dec = () => this.setState({ count: this.state.count - 1 })
  render(){
    return (
      <div style={{padding:'12px', margin:'6px'}}>
        <span>{this.state.count}</span>
        <button onClick={this.inc}>+</button>
        <button onClick={this.dec}>-</button>
      </div>
    );
  }
}
const CcCounter = register('Counter', {sharedStateKeys:'*'})(Counter);

class App extends Component {
  constructor(props, context) {
    super(props, context);
    this.state = { isShowCounter: true }
  }
  render() {
    return (
      <div>
        <Counter />
        <Counter />
        <CcCounter />
        <CcCounter />
      </div>
    )
  }
}

export default App;
```
___
## ğŸ”¨æ›´å¤šç²¾å½©ç¤ºä¾‹
### [ccç‰ˆæœ¬çš„ant-design-pro](https://github.com/fantasticsoul/rcc-antd-pro)
### [æœ‰è¶£çš„counter](https://stackblitz.com/edit/funny-counter)
### [å¢å¼ºçš„counter](https://stackblitz.com/edit/dva-example-count-1saxx8)
### [Jsrun playground](http://jsrun.net/fLXKp/play) 
### [Jsrun video](http://jsrun.net/vLXKp/play)
### [ç¤ºä¾‹é›†åˆ](https://github.com/fantasticsoul/rcc-simple-demo)
___
## å›¾æ–‡ä»‹ç»
### ccæ¸²æŸ“æµç¨‹
![](https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/cc-core.png)
### `reactç±»`ã€`ccç±»`å’Œ`ccå®ä¾‹`ä¸‰è€…ä¹‹é—´çš„å…³ç³»
![](https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/cc2.png)
### ccç»„ä»¶çš„`state`å’Œ`$$propState`æ˜¯æ€ä¹ˆæ¥çš„
![](https://raw.githubusercontent.com/fantasticsoul/static/master/img/cc/cc-class-and-ins.png)
### [åœ¨ccé‡Œç”¨classå’Œfunctionå®ç°counter](https://juejin.im/post/5c8f77bdf265da60ec2812f7)
### [èŠä¸€èŠccçš„å˜åŒ–ä¾¦æµ‹å’Œhookå®ç°](https://juejin.im/post/5c8d99f4e51d4555816d6335)
### [åœ¨ccé‡Œç©è½¬æ— çŠ¶æ€ç»„ä»¶](https://juejin.im/post/5c838107f265da2dca389593)
### [å¯¹è¯ redux(å®¶æ—)ï¼Œåç”Ÿä½•ä»¥æŒ‘æˆ˜å‰è¾ˆï¼Ÿ](https://juejin.im/post/5c8479316fb9a049ba42635c)
### [ä¸ºä»€ä¹ˆä¸ç”¨redux](https://www.zhihu.com/question/263928256/answer/274963347)
