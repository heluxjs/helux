"use strict";(self.webpackChunkhelux_docs=self.webpackChunkhelux_docs||[]).push([[4861],{14861:function(zt,He,Ye){Ye.d(He,{TT:function(){return Dt},P2:function(){return we},_x:function(){return Fe},OA:function(){return bt},limuUtils:function(){return Rt},Xl:function(){return Nt},Uy:function(){return Ft}});const Lt=3,Ge="3.13.0",W=Symbol("M"),ye=Symbol("V"),me=Symbol("IMMUT_BASE"),k=Symbol("IS_RAW"),C="Map",x="Set",A="Array",We="Object",ke=[Symbol.iterator,Symbol.toStringTag,k],Je={Map:C,Set:x,Array:A},Q="[object Object]",J="[object Map]",$="[object Set]",Z="[object Array]",j="[object Function]",$e={[J]:C,[$]:x,[Z]:A,[Q]:We},Xe=["push","pop","shift","splice","unshift","reverse","copyWithin","delete","fill"],qe=["set","clear","delete"],Qe=["add","clear","delete"],Ze=["splice","sort","unshift","shift"],je=["concat","copyWithin","entries","every","fill","filter","find","findIndex","flat","flatMap","forEach","includes","indexOf","join","keys","lastIndexOf","map","pop","push","reduce","reduceRight","reverse","shift","unshift","slice","some","sort","splice","values","valueOf"],et=["clear","delete","entries","forEach","get","has","keys","set","values"],tt=["add","clear","delete","entries","forEach","has","keys","values"],he={[C]:et,[x]:tt,[A]:je},nt={[C]:["clear","set","delete"],[x]:["clear","add","delete"],[A]:["pop","push","shift","unshift","splice","sort","copyWithin"]},rt={[C]:["forEach","get"],[x]:["forEach"],[A]:["forEach","map"]},z={value:0,usablePrefix:1},ee={autoFreeze:!1,autoRevoke:!0,fastModeRange:"array"},ot=Object.prototype.toString,st=!!Reflect,it=Object.prototype.hasOwnProperty;function Me(e,t){return st?Reflect.has(e,t):it.call(e,t)}function at(e,t,n,r){const o=[],i=(a,u,s)=>{w(a)||o.includes(a)||(o.push(a),r(a,u,s),Array.isArray(a)&&a.forEach((l,f)=>{i(l,a,f)}),X(a)&&a.forEach((l,f)=>{i(l,a,f)}),L(a)&&Object.keys(a).forEach(l=>{i(a[l],a,l)}))};i(e,t,n)}function b(e){return ot.call(e)}function N(...e){return e}function L(e){return b(e)===Q}function X(e){return b(e)===J}function te(e){return b(e)===$}function I(e){return b(e)===j}function ge(e){var t=b(e);return $e[t]}function w(e){const t=b(e);return![Q,Z,J,$,j].includes(t)}function _e(e){return e.constructor.name==="AsyncFunction"||typeof e.then=="function"}function Ee(e){return typeof Promise!="undefined"&&e instanceof Promise}function ne(e){var t=typeof e;return t==="number"?!0:t==="string"?/^[0-9]*$/.test(e):!1}function ct(e){return typeof e=="symbol"}function ut(e){var t;return e&&(t=e[k])!==null&&t!==void 0?t:!1}const lt={[Z]:Array.prototype,[J]:Map.prototype,[$]:Set.prototype,[j]:Function.prototype};function ft(e){const t=b(e),n=lt[t]||Object.prototype,r=Object.create(null);return Object.setPrototypeOf(r,n),Object.setPrototypeOf(e,r),e}const re=new Map;function U(e){e.rootMeta.modified=!0;const t=n=>{n&&!n.modified&&(n.modified=!0,t(n.parentMeta))};t(e)}function oe(e,t,n){if(n.apiCtx.debug){const{fast:r}=n;r?e[W]=t:(ft(e),e.__proto__[W]=t)}return e}function pt(e,t,n){const r=[t],o=F(e,n);if(o&&o.level>0){const{keyPath:i}=o;return[...i,t]}return r}function dt(e,t,n){const{ver:r,parentMeta:o=null,immutBase:i,compareVer:a,apiCtx:u,hasOnOperate:s}=n,l=ge(t);let f=[],d=0,y=null;o&&(y=o.copy,d=mt(y,u),f=pt(y,e,u));const h={rootMeta:null,parentMeta:o,parent:y,selfType:l,self:t,copy:null,key:e,keyPath:f,level:d,proxyVal:null,proxyItems:null,modified:!1,scopes:[],isImmutBase:i,isDel:!1,isFast:!1,isArrOrderChanged:!1,newNodeStats:{},newNodeMap:new Map,newNodes:[],ver:r,compareVer:a,revoke:N,hasOnOperate:s,execOnOperate:N};return d===0?h.rootMeta=h:h.rootMeta=o.rootMeta,h}function Oe(e){const t=se(e);return t?!t.isImmutBase:!1}function yt(){z.value>=Number.MAX_SAFE_INTEGER?(z.value=1,z.usablePrefix+=1):z.value+=1;const{value:e,usablePrefix:t}=z;return`${t}_${e}`}function mt(e,t){const n=B(e,t);return n?n.level+1:1}function F(e,t){return t.metaMap.get(e)}function B(e,t){let n=t||Se(e);return(n==null?void 0:n.metaMap.get(e))||null}function Pe(e){return e&&e[ye]||""}function Se(e){const t=Pe(e);return re.get(t)||null}function se(e){const t=Se(e);return t&&t.metaMap.get(e)||null}function Ce(e,t){const n=se(e),r=se(t);if(!n&&!r)return!Object.is(e,t);const{self:o,modified:i,compareVer:a,ver:u,level:s}=n||{self:e,modified:!1,compareVer:!1,ver:"0",level:0},{self:l,modified:f,compareVer:d,ver:y,level:h}=r||{self:t,modified:!1,compareVer:!1,ver:"0",level:0};return o!==l||(a||d)&&(s===0||h===0)&&u!==y?!0:i||f}function ht(e,t,n=!0){const r=n?Ce:Object.is;return!((a,u)=>{for(let s in a)if(!(s in u))return!0;for(let s in u)if(r(a[s],u[s]))return!0;return!1})(e,t)}function Ut(e){const t=n=>{if(isPrimitive(n))return n;let r=n;if(Array.isArray(n)&&(r=n.slice(),r.forEach((o,i)=>{r[i]=t(o)})),isSet(n)){const o=Array.from(n);o.forEach((i,a)=>{o[a]=t(i)}),r=new Set(o)}return isMap(n)&&(r=new Map(n),r.forEach((o,i)=>{r.set(i,t(o))})),isObject(n)&&(r={},Object.keys(n).forEach(o=>{r[o]=t(n[o])})),r};return t(e)}function Mt(e,t){const{parentType:n,fastModeRange:r}=t;if(Array.isArray(e))return{copy:e.slice(),fast:!1};const o=r==="array"&&n===A||r==="all";let i=e;return e&&L(e)&&(i=Object.assign({},e)),X(e)&&(i=new Map(e)),te(e)&&(i=new Set(e)),{copy:i,fast:o}}function gt(e,t,n){const{apiCtx:r,immutBase:o}=n;if(o)return{copy:e,fast:!1};const{copy:i,fast:a}=Mt(e,n);return oe(i,t,{apiCtx:r,fast:a}),{copy:i,fast:a}}function _t(e,t,n){const{copy:r,isArrOrderChanged:o}=e,{targetNode:i,key:a}=n;if(o){const u=r.findIndex(s=>s===t.copy);u>=0&&(r[u]=i);return}r[a]=i}function Et(e,t){return L(e)?Pe(e)===t:!0}function Ot(e,t){const{debug:n}=t,r=new Map;t.newNodeMap.forEach(o=>{const{node:i,parent:a,key:u}=o,s=r.get(i);if(s){a[u]=s;return}const l=o;at(i,a,u,(f,d,y)=>{const h=B(f,t);if(h){const{modified:_,copy:g,self:S}=h,E=_?g:S;d[y]=E}}),l.target=a[u],r.set(i,l.target)}),e.scopes.forEach(o=>{const{modified:i,copy:a,parentMeta:u,key:s,self:l,revoke:f,proxyVal:d,isDel:y,isFast:h}=o;if(!a||(n&&(h?delete a[W]:delete a.__proto__[W]),!u))return f();const _=i?a:l,g=u.copy,S=u.selfType;if(S===C)return g.set(s,_),f();if(S===x)return g.delete(d),g.add(_),f();if(S===A)return _t(u,o,{targetNode:_,key:s}),f();if(y!==!0)return g[s]=_,f()}),e.scopes.length=0}function Pt(e,t){const{self:n,copy:r,modified:o}=e;let i=n;return r&&o&&(i=e.copy),Ot(e,t),i}function Ae(e){e.rootMeta.scopes.push(e)}function ve(e,t,n){const{traps:r,parentType:o,fastModeRange:i,immutBase:a,apiCtx:u,autoRevoke:s}=n,l=dt(e,t,n),{copy:f,fast:d}=gt(t,l,{immutBase:a,parentType:o,fastModeRange:i,apiCtx:u});if(l.copy=f,l.isFast=d,a){const y=new Proxy(f,r);l.proxyVal=y,l.revoke=N}else{const y=Proxy.revocable(f,r);l.proxyVal=y.proxy,l.revoke=s?y.revoke:N}return u.metaMap.set(f,l),u.metaMap.set(l.proxyVal,l),l}function St(e,t){return e===A?!0:(rt[e]||[]).includes(t)}function Ct(e,t){const{key:n,parentMeta:r,parent:o,parentType:i,fastModeRange:a,readOnly:u,apiCtx:s}=t;let l=e;if(u&&r&&!I(e)){const{copy:d,self:y}=r,h=y[n];if(l!==h){const _=s.metaMap.get(l);_&&(s.metaMap.delete(l),s.metaMap.delete(_.proxyVal)),d[n]=h,l=h}}const f=(d,y)=>{const h=y||"";if(w(d)||!d)return d;if(!r)throw new Error("[[ createMeta ]]: meta should not be null");if(!I(d)){if(r.newNodeStats[h]||d[k])return d;let g=F(d,s);return g||(g=ve(h,d,t),Ae(g),r.selfType===C?o.set(h,g.copy):o[h]=g.copy),g.proxyVal}if(!St(i,h)||r.proxyItems)return d;let _=[];if(i===x){const g=new Set;o.forEach(S=>g.add(f(S))),Ve(g,r,{dataType:x,apiCtx:s}),_=oe(g,r,{fast:a,apiCtx:s}),r.copy=_}else if(i===C){const g=new Map;o.forEach((S,E)=>g.set(E,f(S,E))),Ve(g,r,{dataType:C,apiCtx:s}),_=oe(g,r,{fast:a,apiCtx:s}),r.copy=_}else i===A&&h!=="sort"&&(r.copy=r.copy||o.slice(),_=r.proxyVal);return r.proxyItems=_,d};return f(l,n)}function xe(e,t){if(!L(e))return e;const n=F(e,t);return n?n.copy:e}function Ve(e,t,n){const{dataType:r,apiCtx:o}=n,i=e.delete.bind(e),a=e.clear.bind(e);if(e.delete=function(...s){return U(t),i(...s)},e.clear=function(...s){return U(t),a(...s)},r===x){const u=e.add.bind(e);e.add=function(...l){return U(t),u(...l)}}if(r===C){const u=e.set.bind(e),s=e.get.bind(e);e.set=function(...f){if(U(t),t.hasOnOperate){const d=f[1];t.rootMeta.execOnOperate("set",f[0],{mayProxyVal:d,value:d,parentMeta:t})}return u(...f)},e.get=function(...f){const d=s(...f);if(t.hasOnOperate){const y=B(d,o),h=y?y.copy||y.self:d;t.rootMeta.execOnOperate("get",f[0],{mayProxyVal:d,value:h,parentMeta:t,isChanged:!1})}return d}}}function At(e){const{calledBy:t,parentMeta:n,op:r,parentType:o}=e;(["deleteProperty","set"].includes(t)||t==="get"&&(o===x&&Qe.includes(r)||o===A&&Xe.includes(r)||o===C&&qe.includes(r)))&&U(n)}function Re(e,t){const n=e.keyPath.slice();return n.push(t),n.join("|")}function ie(e,t){const{op:n,key:r,value:o,calledBy:i,parentType:a,parentMeta:u,apiCtx:s,isValueDraft:l}=t,f=xe(o,s);if(!u){e[r]=f;return}const{self:d,copy:y}=u;At({calledBy:i,parentMeta:u,op:n,key:r,parentType:a});const h=he[a]||[];if(I(o)&&h.includes(n))return n==="slice"?d.slice:(Ze.includes(n)&&(u.isArrOrderChanged=!0),y?a===x||a===C?y[n].bind(y):y[n]:d[n].bind(d));if(!y)return f;const _=y[r],g=()=>{const E=B(_,s);E&&(E.isDel=!0)},S=()=>{const E=B(o,s);E&&E.isDel&&(E.isDel=!1,E.key=r,E.keyPath=u.keyPath.concat([r]),E.level=u.level+1,E.parent=u.copy,E.parentMeta=u)};if(i==="deleteProperty"){const E=B(o,s);E?E.isDel=!0:g();const ue=y[r];w(ue)||s.newNodeMap.delete(Re(u,r)),delete y[r];return}!l&&!w(f)&&(u.newNodeStats[r]=!0,s.newNodeMap.set(Re(u,r),{parent:y,node:f,key:r,target:null})),y[r]=f,g(),S()}function ae(e){if(w(e))return e;if(Array.isArray(e)&&e.length>0)return e.forEach(ae),Object.freeze(e);if(te(e)){const n=e;n.add=()=>n,n.delete=()=>!1,n.clear=N;for(const r of n.values())Object.freeze(r);return Object.freeze(e)}if(X(e)){const n=e;n.set=()=>n,n.delete=()=>!1,n.clear=N;for(const r of n.values())Object.freeze(r);return Object.freeze(e)}return Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];ae(r)}),Object.freeze(e)}const vt=["length","constructor","asymmetricMatch","nodeType","size"],De={};vt.forEach(e=>De[e]=1);const xt={[A]:1,[x]:1,[C]:1},ce=new Map;function Te(e){var t,n,r,o,i,a,u;const s=e||{},l=s.onOperate,f=!!l,d=s.customKeys||[],y=s.fastModeRange||ee.fastModeRange,h=(t=s[me])!==null&&t!==void 0?t:!1,_=(n=s.readOnly)!==null&&n!==void 0?n:!1,g=s.disableWarn,S=(r=s.compareVer)!==null&&r!==void 0?r:!1,E=(o=s.debug)!==null&&o!==void 0?o:!1,ue=(i=s.autoFreeze)!==null&&i!==void 0?i:ee.autoFreeze,D=yt(),v={metaMap:new Map,newNodeMap:new Map,debug:E,metaVer:D};re.set(D,v);const Ie=(a=s.autoRevoke)!==null&&a!==void 0?a:ee.autoRevoke,It=(u=s.silenceSetTrapErr)!==null&&u!==void 0?u:!0,Be=(K,R)=>(console.warn(`${K} ${R} failed, cuase draft root has been finised!`),It);let le=!1;const Ke=()=>(g||console.warn("can not mutate state at readOnly mode!"),!0),V=(K,R,M)=>{const{mayProxyVal:c,parentMeta:p,value:m,isCustom:O=!1}=M;let P=!1;if(!l)return{isChanged:P,mayProxyVal:c};const H=p||{},{selfType:T="",keyPath:Y=[],copy:q,self:G,modified:fe,proxyVal:Bt}=H||{};let Le=!1;M.isChanged!==void 0?P=M.isChanged:(he[T]||[]).includes(R)?(Le=!0,P=(nt[T]||[]).includes(R)):K!=="get"&&(P=p?(fe?q:G)[R]!==m:!0);let pe=null,de=!1;return l({immutBase:h,parent:G,parentType:T,parentProxy:Bt,op:K,replaceValue:Ue=>{de=!0,pe=Ue},getReplaced:()=>({isReplaced:de,replacedValue:pe}),isBuiltInFnKey:Le,isChanged:P,isCustom:O,key:R,keyPath:Y,fullKeyPath:Y.concat(R),value:m,proxyValue:c}),{mayProxyVal:de?pe:c,isChanged:P}},ze=(()=>{let K=!0;const R={get:(M,c)=>{if(ye===c)return D;const p=M[c];if(ke.includes(c)){if(I(p)){if(Symbol.iterator===c&&Array.isArray(M)){let T=0;const Y=()=>({next:()=>{const q=M.length;if(q===0)return{done:!0,value:void 0};const G=T===q,fe=G?void 0:R.get(M,String(T));return T++,{done:G,value:fe}},[Symbol.iterator]:()=>Y});return Y}return p.bind(M)}return p}if(c==="__proto__"||c==="toJSON"&&!Me(M,c))return p;let m=p;const O=F(M,v);if(d.includes(c))return V("get",c,{parentMeta:O,mayProxyVal:m,value:p,isChanged:!1,isCustom:!0}).mayProxyVal;const P=O==null?void 0:O.selfType;return xt[P]&&De[c]?((c==="length"||c==="size")&&V("get",c,{parentMeta:O,mayProxyVal:m,value:p}),O.copy[c]):(m=Ct(p,{key:c,compareVer:S,parentMeta:O,parentType:P,ver:D,traps:R,parent:M,fastModeRange:y,immutBase:h,readOnly:_,apiCtx:v,hasOnOperate:f,autoRevoke:Ie}),P===A&&ne(c)?V("get",c,{parentMeta:O,mayProxyVal:m,value:p}).mayProxyVal:Je[P]?(m=ie(M,{op:c,key:c,value:p,metaVer:D,calledBy:"get",parentType:P,parentMeta:O,apiCtx:v}),V("get",c,{parentMeta:O,mayProxyVal:m,value:p}).mayProxyVal):V("get",c,{parentMeta:O,mayProxyVal:m,value:p}).mayProxyVal)},set:(M,c,p)=>{if(le)return Be("set",c);const m=F(M,v);let O=!1;if(Oe(p))if(O=!0,Et(p,D)){if(xe(p,v)===M[c])return!0}else K=!1;if(_)return V("set",c,{parentMeta:m,isChanged:!1,value:p}),Ke();if(m&&m.selfType===A){if(m.copy&&m.__callSet&&ne(c))return V("set",c,{parentMeta:m,value:p}),m.copy[c]=p,!0;m.__callSet=!0}let P=!1;return l?P=V("set",c,{parentMeta:m,value:p}).isChanged:P=(m.modified?m.copy:m.self)[c]!==p,P&&ie(M,{parentMeta:m,key:c,value:p,metaVer:D,calledBy:"set",apiCtx:v,isValueDraft:O}),!0},deleteProperty:(M,c)=>{if(le)return Be("set",c);const p=F(M,v),m=M[c];return _?(V("del",c,{parentMeta:p,isChanged:!1,value:m}),Ke()):(V("del",c,{parentMeta:p,isChanged:!0,value:m}),ie(M,{parentMeta:p,op:"del",key:c,value:"",metaVer:D,calledBy:"deleteProperty",apiCtx:v}),!0)},apply:function(M,c,p){return M.apply(c,p)}};return{createDraft:M=>{if(w(M))throw new Error("base state can not be primitive");let c=M;const p=F(M,v);if(p){if(h&&p.isImmutBase)return p.proxyVal;c=p.self}const m=ve("",c,{ver:D,traps:R,immutBase:h,readOnly:_,compareVer:S,apiCtx:v,hasOnOperate:f,autoRevoke:Ie});return Ae(m),m.execOnOperate=V,ce.set(m.proxyVal,ze.finishDraft),m.proxyVal},finishDraft:M=>{const c=F(M,v);if(!c)throw new Error("rootMeta should not be null!");if(c.level!==0)throw new Error("can not finish sub draft node!");if(c.isImmutBase)return M;let p=Pt(c,v);return ue&&K&&(p=ae(p)),re.delete(D),le=!0,p}}})();return ze}function Ht(e){const t=getDraftMeta(e);return t?t.self:e}function Yt(e){const t=getDraftMeta(e);return t?deepCopy(t.copy||t.self):e}function Vt(e){return!e||w(e)||(e[k]=!0),e}const Rt={has:Me,noop:N,isObject:L,isMap:X,isSet:te,isFn:I,isPrimitive:w,isPromiseFn:_e,isPromiseResult:Ee,isSymbol:ct,isMardedRaw:ut,canBeNum:ne,isDraft:Oe,isDiff:Ce,shallowCompare:ht,getDraftMeta:B,getDataType:ge},Dt=Ge;function we(e,t){return Te(t).createDraft(e)}function Fe(e){const t=ce.get(e);if(!t)throw new Error("Not a Limu root draft or draft has been finished!");return ce.delete(e),t(e)}function be(e){if(!I(e))throw new Error("produce callback is not a function")}function Tt(e,t){if(_e(e)||Ee(t))throw new Error("produce callback can not be a promise function or result")}function Ne(e,t,n){be(t);const r=we(e,n),o=t(r);return Tt(t,o),Fe(r)}function wt(e,t,n){if(!t||!I(t)){const r=e,o=t;return be(e),i=>Ne(i,r,o)}return Ne(e,t,n)}const Ft=wt,Jt=null;function $t(e){return deepCopyFn(e)}function bt(e,t){return Te(Object.assign(Object.assign({},t||{}),{readOnly:!0,[me]:!0})).createDraft(e)}function Xt(e){conf.autoFreeze=e}function qt(){return conf.autoFreeze}const Qt=null,Nt=Vt,Zt=null}}]);
